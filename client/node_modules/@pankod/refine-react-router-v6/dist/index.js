var O=Object.create;var L=Object.defineProperty;var K=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var q=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty;var Q=(r,e)=>{for(var n in e)L(r,n,{get:e[n],enumerable:!0})},x=(r,e,n,d)=>{if(e&&typeof e=="object"||typeof e=="function")for(let m of _(e))!G.call(r,m)&&m!==n&&L(r,m,{get:()=>e[m],enumerable:!(d=K(e,m))||d.enumerable});return r},l=(r,e,n)=>(x(r,e,"default"),n&&x(n,e,"default")),H=(r,e,n)=>(n=r!=null?O(q(r)):{},x(e||!r||!r.__esModule?L(n,"default",{value:r,enumerable:!0}):n,r)),T=r=>x(L({},"__esModule",{value:!0}),r);var p={};Q(p,{BrowserRouterComponent:()=>B,HashRouterComponent:()=>D,MemoryRouterComponent:()=>I,default:()=>Y});module.exports=T(p);var F=require("@pankod/refine-core"),c=require("react-router-dom");var R=H(require("react")),v=require("react-router-dom");var o=H(require("react")),s=require("react-router-dom"),t=require("@pankod/refine-core"),S=({route:r})=>{let{catchAll:e}=(0,t.useRefineContext)(),{useParams:n}=(0,t.useRouterContext)(),{resources:d}=(0,t.useResource)(),{action:m,id:a}=n(),C=d.find(y=>y.route===r);if(C){let{list:y,create:w,edit:k,show:g,name:f,canCreate:h,canEdit:E,canShow:i,canDelete:u,options:P}=C,M=y!=null?y:()=>null,N=w!=null?w:()=>null,j=k!=null?k:()=>null,z=g!=null?g:()=>null;return(()=>{switch(m){case void 0:return o.default.createElement(t.CanAccess,{resource:f,action:"list",fallback:e!=null?e:o.default.createElement(t.ErrorComponent,null),params:{resource:C}},y?o.default.createElement(M,{name:f,canCreate:h,canEdit:E,canDelete:u,canShow:i,options:P}):e!=null?e:o.default.createElement(t.ErrorComponent,null));case"create":case"clone":return o.default.createElement(t.CanAccess,{resource:f,action:"create",fallback:e!=null?e:o.default.createElement(t.ErrorComponent,null),params:{id:a?decodeURIComponent(a):void 0,resource:C}},w?o.default.createElement(N,{name:f,canCreate:h,canEdit:E,canDelete:u,canShow:i,options:P}):e!=null?e:o.default.createElement(t.ErrorComponent,null));case"edit":return o.default.createElement(t.CanAccess,{resource:f,action:"edit",params:{id:a?decodeURIComponent(a):void 0,resource:C},fallback:e!=null?e:o.default.createElement(t.ErrorComponent,null)},k?o.default.createElement(j,{name:f,canCreate:h,canEdit:E,canDelete:u,canShow:i,options:P}):e!=null?e:o.default.createElement(t.ErrorComponent,null));case"show":return o.default.createElement(t.CanAccess,{resource:f,action:"show",params:{id:a?decodeURIComponent(a):void 0,resource:C},fallback:e!=null?e:o.default.createElement(t.ErrorComponent,null)},g?o.default.createElement(z,{name:f,canCreate:h,canEdit:E,canDelete:u,canShow:i,options:P}):e!=null?e:o.default.createElement(t.ErrorComponent,null));default:return o.default.createElement(o.default.Fragment,null,e!=null?e:o.default.createElement(t.ErrorComponent,null))}})()}return o.default.createElement(o.default.Fragment,null,e!=null?e:o.default.createElement(t.ErrorComponent,null))},b=({initialRoute:r})=>{let{resources:e}=(0,t.useResource)(),{catchAll:n,DashboardPage:d,LoginPage:m}=(0,t.useRefineContext)(),{routes:a}=(0,t.useRouterContext)(),{isFetching:C,isError:y}=(0,t.useAuthenticated)({type:"routeProvider"});if(C)return o.default.createElement(s.Routes,null,o.default.createElement(s.Route,{path:"*",element:null}));let w=!y,k=()=>{let{pathname:i,search:u}=location,P=`${i}${u}`;return o.default.createElement(s.Navigate,{to:`/login?to=${encodeURIComponent(P)}`})},g=[];e.map(i=>{let u=o.default.createElement(s.Route,{key:`${i.route}`,path:`${i.route}`,element:o.default.createElement(S,{route:i.route})},o.default.createElement(s.Route,{path:":action",element:o.default.createElement(S,{route:i.route})},o.default.createElement(s.Route,{path:":id",element:o.default.createElement(S,{route:i.route})})));g.push(u)});let f=()=>{var i;return o.default.createElement(s.Routes,null,[...a||[]].filter(u=>!u.layout).map((u,P)=>o.default.createElement(s.Route,{key:`custom-route-${P}`,...u,element:u.element})),o.default.createElement(s.Route,{path:"/",element:o.default.createElement(t.LayoutWrapper,null,o.default.createElement(s.Outlet,null))},[...a||[]].filter(u=>u.layout).map((u,P)=>o.default.createElement(s.Route,{key:`custom-route-${P}`,...u,element:u.element})),o.default.createElement(s.Route,{index:!0,element:d?o.default.createElement(t.CanAccess,{resource:"dashboard",action:"list",fallback:n!=null?n:o.default.createElement(t.ErrorComponent,null)},o.default.createElement(d,null)):o.default.createElement(s.Navigate,{to:r!=null?r:`/${(i=e.find(u=>u.list))==null?void 0:i.route}`})}),...[...g||[]],o.default.createElement(s.Route,{path:"*",element:o.default.createElement(S,{route:""})})))},h=()=>m?o.default.createElement(m,null):o.default.createElement(t.LoginPage,null);return w?f():(()=>o.default.createElement(s.Routes,null,[...a||[]].map((i,u)=>o.default.createElement(s.Route,{key:`custom-route-${u}`,...i})),o.default.createElement(s.Route,{path:"/",element:h()}),o.default.createElement(s.Route,{path:"/login",element:h()}),o.default.createElement(s.Route,{path:"*",element:o.default.createElement(k,null)})))()};function B({children:r,...e}){return R.default.createElement(v.BrowserRouter,{...e},R.default.createElement(b,{initialRoute:typeof this<"u"?this.initialRoute:void 0}),r)}function I({children:r,...e}){return R.default.createElement(v.MemoryRouter,{...e},R.default.createElement(b,{initialRoute:typeof this<"u"?this.initialRoute:void 0}),r)}function D({children:r,...e}){return R.default.createElement(v.HashRouter,{...e},R.default.createElement(b,{initialRoute:typeof this<"u"?this.initialRoute:void 0}),r)}var U=require("react"),J=require("react-router-dom"),X=({message:r,when:e,setWarnWhen:n})=>{let d=(0,U.useContext)(J.UNSAFE_NavigationContext).navigator;return(0,U.useEffect)(()=>{if(!e)return;let m=d.block(a=>{window.confirm(r)?(n==null||n(!1),m(),a.retry()):d.location.pathname=window.location.pathname});return m},[e,location,r]),null};l(p,require("react-router-dom"),module.exports);var V={useHistory:()=>{let r=(0,c.useNavigate)();return{push:r,replace:e=>{r(e,{replace:!0})},goBack:()=>{r(-1)}}},useLocation:c.useLocation,useParams:()=>{let r=(0,c.useParams)(),{pathname:e}=(0,c.useLocation)(),n=`/${Object.values(r).join("/")}`;return(0,F.handleUseParams)({...r,resource:Object.keys(r).length===0?e.substring(1):decodeURIComponent(e.substring(1)).replace(n,"")})},Prompt:X,Link:c.Link,RouterComponent:B},Y=V;
//# sourceMappingURL=index.js.map