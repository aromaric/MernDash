(()=>{var _r=Object.create;var $t=Object.defineProperty;var Yr=Object.getOwnPropertyDescriptor;var Gr=Object.getOwnPropertyNames;var Zr=Object.getPrototypeOf,Jr=Object.prototype.hasOwnProperty;var y=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Xr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ea=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Gr(t))!Jr.call(e,o)&&o!==r&&$t(e,o,{get:()=>t[o],enumerable:!(a=Yr(t,o))||a.enumerable});return e};var Ut=(e,t,r)=>(r=e!=null?_r(Zr(e)):{},ea(t||!e||!e.__esModule?$t(r,"default",{value:e,enumerable:!0}):r,e));var wt=Xr((On,jr)=>{var ta=Object.create,_e=Object.defineProperty,ra=Object.getOwnPropertyDescriptor,aa=Object.getOwnPropertyNames,oa=Object.getPrototypeOf,na=Object.prototype.hasOwnProperty,la=(e,t)=>{for(var r in t)_e(e,r,{get:t[r],enumerable:!0})},ir=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of aa(t))!na.call(e,o)&&o!==r&&_e(e,o,{get:()=>t[o],enumerable:!(a=ra(t,o))||a.enumerable});return e},F=(e,t,r)=>(r=e!=null?ta(oa(e)):{},ir(t||!e||!e.__esModule?_e(r,"default",{value:e,enumerable:!0}):r,e)),ia=e=>ir(_e({},"__esModule",{value:!0}),e),sr={};la(sr,{AuthPage:()=>En,Authenticated:()=>Un,CanAccess:()=>kn,ErrorComponent:()=>pn,LayoutWrapper:()=>Ln,LoginPage:()=>Wr,ReadyPage:()=>Hr,Refine:()=>Nn,RouteChangeHandler:()=>Ir,UndoableQueue:()=>Br,createTreeView:()=>Cr,file2Base64:()=>Qa,getDefaultFilter:()=>Oa,getDefaultSortOrder:()=>Va,handleUseParams:()=>Wa,importCSVMapper:()=>gr,parseTableParams:()=>ht,parseTableParamsFromQuery:()=>Aa,routeGenerator:()=>Et,setInitialFilters:()=>ft,setInitialSorters:()=>vt,stringifyTableParams:()=>ct,unionFilters:()=>Oe,unionSorters:()=>mt,useApiUrl:()=>lo,useAuthenticated:()=>pr,useBreadcrumb:()=>fn,useCan:()=>Or,useCanWithoutCache:()=>Zo,useCancelNotification:()=>Ue,useCheckError:()=>ue,useCreate:()=>St,useCreateMany:()=>Tr,useCustom:()=>so,useCustomMutation:()=>co,useDataProvider:()=>Y,useDelete:()=>eo,useDeleteMany:()=>no,useExport:()=>Ro,useForgotPassword:()=>fr,useForm:()=>Ao,useGetIdentity:()=>dr,useGetLocale:()=>To,useHandleNotification:()=>re,useImport:()=>Ho,useInvalidate:()=>xe,useIsExistAuthentication:()=>La,useList:()=>Ct,useLiveMode:()=>Mr,useLog:()=>tt,useLogList:()=>sn,useLogin:()=>gt,useLogout:()=>cr,useMany:()=>Fr,useMenu:()=>vn,useModal:()=>Bo,useMutationMode:()=>Re,useNavigation:()=>ne,useNotification:()=>Ce,useOne:()=>Pt,usePermissions:()=>ma,usePublish:()=>De,useRedirectionAfterSubmission:()=>Rr,useRefineContext:()=>Je,useRegister:()=>mr,useResource:()=>z,useResourceSubscription:()=>Ge,useResourceWithRoute:()=>pe,useRouterContext:()=>I,useSelect:()=>en,useSetLocale:()=>xo,useShow:()=>Oo,useSubscription:()=>yo,useSyncWithLocation:()=>kr,useTable:()=>an,useTitle:()=>Lo,useTranslate:()=>V,useUpdate:()=>xr,useUpdateMany:()=>ao,useUpdatePassword:()=>vr,useWarnAboutChange:()=>xt,userFriendlyResourceName:()=>bt});jr.exports=ia(sr);var Se=F(y("react")),sa=y("react"),ur=F(y("react")),ua=y("@tanstack/react-query"),X=ur.default.createContext({}),da=({children:e,isProvided:t,...r})=>{let{replace:a}=ne(),o=(0,ua.useQueryClient)(),n=()=>{o.invalidateQueries(["useAuthenticated"]),o.invalidateQueries(["getUserIdentity"]),o.invalidateQueries(["usePermissions"])},i=async g=>{var m;try{let l=await((m=r.login)==null?void 0:m.call(r,g));return n(),Promise.resolve(l)}catch(l){return Promise.reject(l)}},u=async g=>{var m;try{let l=await((m=r.register)==null?void 0:m.call(r,g));return n(),Promise.resolve(l)}catch(l){return Promise.reject(l)}},v=async g=>{var m;try{let l=await((m=r.logout)==null?void 0:m.call(r,g));return n(),Promise.resolve(l)}catch(l){return Promise.reject(l)}},c=async g=>{var m;try{return await((m=r.checkAuth)==null?void 0:m.call(r,g)),Promise.resolve()}catch(l){return l!=null&&l.redirectPath&&a(l.redirectPath),Promise.reject(l)}};return ur.default.createElement(X.Provider,{value:{...r,login:i,logout:v,checkAuth:c,register:u,isProvided:t}},e)},ca=y("@tanstack/react-query"),ma=e=>{let{getPermissions:t}=(0,sa.useContext)(X);return(0,ca.useQuery)(["usePermissions"],t!=null?t:()=>Promise.resolve(void 0),{enabled:!!t,...e})},fa=F(y("react")),va=y("@tanstack/react-query"),dr=({queryOptions:e}={})=>{let{getUserIdentity:t}=fa.default.useContext(X);return(0,va.useQuery)(["getUserIdentity"],t!=null?t:()=>Promise.resolve({}),{enabled:!!t,retry:!1,...e})},pa=F(y("react")),ga=y("@tanstack/react-query"),cr=()=>{let{push:e}=ne(),{logout:t}=pa.default.useContext(X),{open:r}=Ce();return(0,ga.useMutation)(["useLogout"],t,{onSuccess:(a,o)=>{var n;let i=(n=o==null?void 0:o.redirectPath)!=null?n:a;if(i!==!1){if(i){e(i);return}e("/login")}},onError:a=>{r==null||r({key:"useLogout-error",type:"error",message:(a==null?void 0:a.name)||"Logout Error",description:(a==null?void 0:a.message)||"Something went wrong during logout"})}})},ya=F(y("react")),ha=y("@tanstack/react-query"),ba=F(y("qs")),gt=()=>{let{replace:e}=ne(),{login:t}=ya.default.useContext(X),{useLocation:r}=I(),{search:a}=r(),{close:o,open:n}=Ce(),{to:i}=ba.default.parse(a,{ignoreQueryPrefix:!0});return(0,ha.useMutation)(["useLogin"],t,{onSuccess:u=>{if(i)return e(i);u!==!1&&e(typeof u=="string"?u:"/"),o==null||o("login-error")},onError:u=>{n==null||n({message:(u==null?void 0:u.name)||"Login Error",description:(u==null?void 0:u.message)||"Invalid credentials",key:"login-error",type:"error"})}})},Ea=F(y("react")),Ca=y("@tanstack/react-query"),mr=()=>{let{replace:e}=ne(),{register:t}=Ea.default.useContext(X),{close:r,open:a}=Ce();return(0,Ca.useMutation)(["useRegister"],t,{onSuccess:o=>{o!==!1&&e(o||"/"),r==null||r("register-error")},onError:o=>{a==null||a({message:(o==null?void 0:o.name)||"Register Error",description:(o==null?void 0:o.message)||"Error while registering",key:"register-error",type:"error"})}})},Pa=F(y("react")),Sa=y("@tanstack/react-query"),fr=()=>{let{replace:e}=ne(),{forgotPassword:t}=Pa.default.useContext(X),{close:r,open:a}=Ce();return(0,Sa.useMutation)(["useForgotPassword"],t,{onSuccess:o=>{o!==!1&&o&&e(o),r==null||r("forgot-password-error")},onError:o=>{a==null||a({message:(o==null?void 0:o.name)||"Forgot Password Error",description:(o==null?void 0:o.message)||"Error while resetting password",key:"forgot-password-error",type:"error"})}})},Fa=F(y("react")),Da=y("@tanstack/react-query"),xa=F(y("qs")),vr=()=>{let{replace:e}=ne(),{updatePassword:t}=Fa.default.useContext(X),{close:r,open:a}=Ce(),{useLocation:o}=I(),{search:n}=o(),i=xa.default.parse(n,{ignoreQueryPrefix:!0});return(0,Da.useMutation)(["useUpdatePassword"],async u=>t==null?void 0:t({...i,...u}),{onSuccess:u=>{u!==!1&&u&&e(u),r==null||r("update-password-error")},onError:u=>{a==null||a({message:(u==null?void 0:u.name)||"Update Password Error",description:(u==null?void 0:u.message)||"Error while updating password",key:"update-password-error",type:"error"})}})},Ta=y("react"),wa=y("@tanstack/react-query"),pr=e=>{let{checkAuth:t}=(0,Ta.useContext)(X);return(0,wa.useQuery)(["useAuthenticated",e],async()=>{var r;return(r=await(t==null?void 0:t(e)))!=null?r:{}},{retry:!1})},qa=F(y("react")),Ma=y("@tanstack/react-query"),ue=()=>{let{checkError:e}=qa.default.useContext(X),{mutate:t}=cr();return(0,Ma.useMutation)(["useCheckError"],e,{onError:r=>{t({redirectPath:r})}})},Na=y("react"),La=()=>{let{isProvided:e}=(0,Na.useContext)(X);return e||!1},$a=y("@tanstack/react-query"),nt=e=>e/1e3,Ua=F(y("lodash/zip")),ka=F(y("lodash/fromPairs")),gr=(e,t=r=>r)=>{let[r,...a]=e;return a.map(o=>(0,ka.default)((0,Ua.default)(r,o))).map((o,n,i)=>t.call(void 0,o,n,i))},kt=F(y("pluralize")),yt=F(y("qs")),yr=F(y("lodash/unionWith")),hr=F(y("lodash/differenceWith")),Ra=F(y("warn-once")),ht=e=>{let{current:t,pageSize:r,sorter:a,filters:o}=yt.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:a!=null?a:[],parsedFilters:o!=null?o:[]}},Aa=e=>{let t=yt.default.stringify(e);return ht(`/${t}`)},ct=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:a,filters:o,...n}=e;return yt.default.stringify({...n,...r||{},sorter:a,filters:o},t)},br=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Er=(e,t)=>e.field==t.field,Oe=(e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,Ra.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,yr.default)(e,t,r,br).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),mt=(e,t)=>(0,yr.default)(e,t,Er).filter(r=>r.order!==void 0&&r.order!==null),ft=(e,t)=>[...(0,hr.default)(t,e,br),...e],vt=(e,t)=>[...(0,hr.default)(t,e,Er),...e],Va=(e,t)=>{if(!t)return;let r=t.find(a=>a.field===e);if(r)return r.order},Oa=(e,t,r="eq")=>{let a=t==null?void 0:t.find(o=>{if(o.operator!=="or"&&o.operator!=="and"&&"field"in o){let{operator:n,field:i}=o;return i===e&&n===r}});if(a)return a.value||[]},Qa=e=>new Promise((t,r)=>{let a=new FileReader,o=()=>{a.result&&(a.removeEventListener("load",o,!1),t(a.result))};a.addEventListener("load",o,!1),a.readAsDataURL(e.originFileObj),a.onerror=n=>(a.removeEventListener("load",o,!1),r(n))}),bt=(e="",t)=>{let r=Qe(e);return t==="singular"?kt.default.singular(r):kt.default.plural(r)},Wa=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,oe=(e,t,r)=>{let a=t||"default",o={all:[a],resourceAll:[a,e||""],list:n=>[...o.resourceAll,"list",{...n,...r}],many:n=>[...o.resourceAll,"getMany",n&&n.map(String),{...r}].filter(i=>i!==void 0),detail:n=>[...o.resourceAll,"detail",n==null?void 0:n.toString(),{...r}],logList:n=>["logList",e,n,r].filter(i=>i!==void 0)};return o},Ha=(e,t)=>!e||!t?!1:!!e.find(r=>r===t),Ba=e=>t=>e.parentName?t.name===e.parentName:!1,Et=(e,t)=>{var r,a,o,n,i;let u,v=(a=(r=e.options)==null?void 0:r.route)!=null?a:e.name;if(e.parentName){let c=t.find(Ba(e));c!=null&&c.parentName?u=`${Et(c,t)}/${v}`:e.parentName&&(u=`${(i=(n=(o=c==null?void 0:c.options)==null?void 0:o.route)!=null?n:c==null?void 0:c.name)!=null?i:e.parentName}/${v}`)}else u=v;return u},Cr=e=>{var t,r,a;let o=[],n={},i={},u,v;for(let c=0;c<e.length;c++){u=e[c];let g=(a=(r=u.route)!=null?r:(t=u.options)==null?void 0:t.route)!=null?a:"";n[g]=u,n[g].children=[],i[u.name]=u,i[u.name].children=[]}for(let c in n)n.hasOwnProperty(c)&&(v=n[c],v.parentName&&i[v.parentName]?i[v.parentName].children.push(v):o.push(v));return o},Qe=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),Pr=F(y("react")),Ia=F(y("react")),Sr=({children:e})=>Ia.default.createElement("div",null,e),ve={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},Ee=Pr.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:Sr,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:ve}),ja=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,undoableTimeout:o,children:n,DashboardPage:i,Title:u,Layout:v=Sr,Header:c,Sider:g,Footer:m,OffLayoutArea:l,LoginPage:s=Wr,catchAll:d,liveMode:f="off",onLiveEvent:E,options:p})=>Pr.default.createElement(Ee.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,Title:u,undoableTimeout:o,Layout:v,Header:c,Sider:g,Footer:m,OffLayoutArea:l,DashboardPage:i,LoginPage:s,catchAll:d,liveMode:f,onLiveEvent:E,options:p}},n),Ka=({options:e,disableTelemetry:t,liveMode:r,mutationMode:a,reactQueryClientConfig:o,reactQueryDevtoolConfig:n,syncWithLocation:i,undoableTimeout:u,warnWhenUnsavedChanges:v}={})=>{var c,g,m,l,s,d,f,E,p,h,C,b,P,S,D,x,T,q,N,U,B,w,L,$;let K={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(g=(c=e==null?void 0:e.mutationMode)!=null?c:a)!=null?g:ve.mutationMode,undoableTimeout:(l=(m=e==null?void 0:e.undoableTimeout)!=null?m:u)!=null?l:ve.undoableTimeout,syncWithLocation:(d=(s=e==null?void 0:e.syncWithLocation)!=null?s:i)!=null?d:ve.syncWithLocation,warnWhenUnsavedChanges:(E=(f=e==null?void 0:e.warnWhenUnsavedChanges)!=null?f:v)!=null?E:ve.warnWhenUnsavedChanges,liveMode:(h=(p=e==null?void 0:e.liveMode)!=null?p:r)!=null?h:ve.liveMode,redirect:{afterCreate:(b=(C=e==null?void 0:e.redirect)==null?void 0:C.afterCreate)!=null?b:ve.redirect.afterCreate,afterClone:(S=(P=e==null?void 0:e.redirect)==null?void 0:P.afterClone)!=null?S:ve.redirect.afterClone,afterEdit:(x=(D=e==null?void 0:e.redirect)==null?void 0:D.afterEdit)!=null?x:ve.redirect.afterEdit}},ee=(q=(T=e==null?void 0:e.disableTelemetry)!=null?T:t)!=null?q:!1,ie={clientConfig:(B=(U=(N=e==null?void 0:e.reactQuery)==null?void 0:N.clientConfig)!=null?U:o)!=null?B:{},devtoolConfig:($=(L=(w=e==null?void 0:e.reactQuery)==null?void 0:w.devtoolConfig)!=null?L:n)!=null?$:{}};return{optionsWithDefaults:K,disableTelemetryWithDefault:ee,reactQueryWithDefaults:ie}},za=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit}},Rt=async(e,t,r)=>{let a=[];for(let[o,n]of e.entries())try{let i=await n();a.push(t(i,o))}catch(i){a.push(r(i,o))}return a},M=(e,t,r)=>{var a;if(t)return t;let o=r==null?void 0:r.find(n=>n.name===e);return(a=o==null?void 0:o.options)!=null&&a.dataProviderName?o.options.dataProviderName:"default"},Ye=async e=>({data:(await Promise.all(e)).map(t=>t.data)}),Ct=({resource:e,config:t,queryOptions:r,successNotification:a,errorNotification:o,metaData:n,liveMode:i,onLiveEvent:u,liveParams:v,dataProviderName:c})=>{let{resources:g}=z(),m=Y(),l=oe(e,M(e,c,g),n),{getList:s}=m(M(e,c,g)),d=V(),{mutate:f}=ue(),E=re(),p=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ge({resource:e,types:["*"],params:{metaData:n,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...v},channel:`resources/${e}`,enabled:p,liveMode:i,onLiveEvent:u}),(0,$a.useQuery)(l.list(t),({queryKey:h,pageParam:C,signal:b})=>{let{hasPagination:P,...S}=t||{};return s({resource:e,...S,hasPagination:P,metaData:{...n,queryContext:{queryKey:h,pageParam:C,signal:b}}})},{...r,onSuccess:h=>{var C;(C=r==null?void 0:r.onSuccess)==null||C.call(r,h);let b=typeof a=="function"?a(h,{metaData:n,config:t},e):a;E(b)},onError:h=>{var C;f(h),(C=r==null?void 0:r.onError)==null||C.call(r,h);let b=typeof o=="function"?o(h,{metaData:n,config:t},e):o;E(b,{key:`${e}-useList-notification`,message:d("common:notifications.error",{statusCode:h.statusCode},`Error (status code: ${h.statusCode})`),description:h.message,type:"error"})}})},_a=y("@tanstack/react-query"),Pt=({resource:e,id:t,queryOptions:r,successNotification:a,errorNotification:o,metaData:n,liveMode:i,onLiveEvent:u,liveParams:v,dataProviderName:c})=>{let{resources:g}=z(),m=Y(),l=oe(e,M(e,c,g),n),{getOne:s}=m(M(e,c,g)),d=V(),{mutate:f}=ue(),E=re();return Ge({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,metaData:n,subscriptionType:"useOne",...v},enabled:r==null?void 0:r.enabled,liveMode:i,onLiveEvent:u}),(0,_a.useQuery)(l.detail(t),({queryKey:p,pageParam:h,signal:C})=>s({resource:e,id:t,metaData:{...n,queryContext:{queryKey:p,pageParam:h,signal:C}}}),{...r,onSuccess:p=>{var h;(h=r==null?void 0:r.onSuccess)==null||h.call(r,p);let C=typeof a=="function"?a(p,{id:t,metaData:n},e):a;E(C)},onError:p=>{var h;f(p),(h=r==null?void 0:r.onError)==null||h.call(r,p);let C=typeof o=="function"?o(p,{id:t,metaData:n},e):o;E(C,{key:`${t}-${e}-getOne-notification`,message:d("notifications.error",{statusCode:p.statusCode},`Error (status code: ${p.statusCode})`),description:p.message,type:"error"})}})},Ya=y("@tanstack/react-query"),Fr=({resource:e,ids:t,queryOptions:r,successNotification:a,errorNotification:o,metaData:n,liveMode:i,onLiveEvent:u,liveParams:v,dataProviderName:c})=>{let{resources:g}=z(),m=Y(),l=oe(e,M(e,c,g),n),{getMany:s,getOne:d}=m(M(e,c,g)),f=V(),{mutate:E}=ue(),p=re(),h=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ge({resource:e,types:["*"],params:{ids:t!=null?t:[],metaData:n,subscriptionType:"useMany",...v},channel:`resources/${e}`,enabled:h,liveMode:i,onLiveEvent:u}),(0,Ya.useQuery)(l.many(t),({queryKey:C,pageParam:b,signal:P})=>s?s({resource:e,ids:t,metaData:{...n,queryContext:{queryKey:C,pageParam:b,signal:P}}}):Ye(t.map(S=>d({resource:e,id:S,metaData:{...n,queryContext:{queryKey:C,pageParam:b,signal:P}}}))),{...r,onSuccess:C=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,C);let P=typeof a=="function"?a(C,t,e):a;p(P)},onError:C=>{var b;E(C),(b=r==null?void 0:r.onError)==null||b.call(r,C);let P=typeof o=="function"?o(C,t,e):o;p(P,{key:`${t[0]}-${e}-getMany-notification`,message:f("notifications.error",{statusCode:C.statusCode},`Error (status code: ${C.statusCode})`),description:C.message,type:"error"})}})},At=y("@tanstack/react-query"),Ke=F(y("react")),lt=F(y("lodash/isEqual")),Dr=Ke.default.createContext({notifications:[],notificationDispatch:()=>!1}),Ga=[],Za=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,lt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,lt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,lt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},Ja=({children:e})=>{let[t,r]=(0,Ke.useReducer)(Za,Ga),a={notifications:t,notificationDispatch:r};return Ke.default.createElement(Dr.Provider,{value:a},e,typeof window<"u"&&t.map(o=>Ke.default.createElement(Br,{key:`${o.id}-${o.resource}-queue`,notification:o})))},Vt=F(y("pluralize")),xr=()=>{let{resources:e}=z(),t=(0,At.useQueryClient)(),r=Y(),{mutationMode:a,undoableTimeout:o}=Re(),n=V(),{mutate:i}=ue(),u=De(),{log:v}=tt(),{notificationDispatch:c}=Ue(),g=re(),m=xe();return(0,At.useMutation)(({id:l,values:s,resource:d,mutationMode:f,undoableTimeout:E,onCancel:p,metaData:h,dataProviderName:C})=>{let b=f!=null?f:a,P=E!=null?E:o;return b!=="undoable"?r(M(d,C,e)).update({resource:d,id:l,variables:s,metaData:h}):new Promise((S,D)=>{let x=()=>{r(M(d,C,e)).update({resource:d,id:l,variables:s,metaData:h}).then(q=>S(q)).catch(q=>D(q))},T=()=>{D({message:"mutationCancelled"})};p&&p(T),c({type:"ADD",payload:{id:l,resource:d,cancelMutation:T,doMutation:x,seconds:P,isSilent:!!p}})})},{onMutate:async({resource:l,id:s,mutationMode:d,values:f,dataProviderName:E})=>{let p=oe(l,M(l,E,e)),h=t.getQueriesData(p.resourceAll),C=d!=null?d:a;return await t.cancelQueries(p.resourceAll,void 0,{silent:!0}),C!=="pessimistic"&&(t.setQueriesData(p.list(),b=>{if(!b)return null;let P=b.data.map(S=>{var D;return((D=S.id)==null?void 0:D.toString())===(s==null?void 0:s.toString())?{id:s,...f}:S});return{...b,data:P}}),t.setQueriesData(p.many(),b=>{if(!b)return null;let P=b.data.map(S=>{var D;return((D=S.id)==null?void 0:D.toString())===(s==null?void 0:s.toString())&&(S={id:s,...f}),S});return{...b,data:P}}),t.setQueriesData(p.detail(s),b=>b?{...b,data:{...b.data,...f}}:null)),{previousQueries:h,queryKey:p}},onSettled:(l,s,{id:d,resource:f,dataProviderName:E,invalidates:p=["list","many","detail"]})=>{m({resource:f,dataProviderName:M(f,E,e),invalidates:p,id:d}),c({type:"REMOVE",payload:{id:d,resource:f}})},onSuccess:(l,{id:s,resource:d,successNotification:f,dataProviderName:E,values:p,metaData:h},C)=>{var b;let P=Vt.default.singular(d),S=typeof f=="function"?f(l,{id:s,values:p},d):f;g(S,{key:`${s}-${d}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${d}.${d}`,P)},`Successfully updated ${P}`),type:"success"}),u==null||u({channel:`resources/${d}`,type:"updated",payload:{ids:(b=l.data)!=null&&b.id?[l.data.id]:void 0},date:new Date});let D;if(C){let U=t.getQueryData(C.queryKey.detail(s));D=Object.keys(p).reduce((B,w)=>{var L;return B[w]=(L=U==null?void 0:U.data)==null?void 0:L[w],B},{})}let{fields:x,operation:T,variables:q,...N}=h||{};v==null||v.mutate({action:"update",resource:d,data:p,previousData:D,meta:{id:s,dataProviderName:M(d,E,e),...N}})},onError:(l,{id:s,resource:d,errorNotification:f,values:E},p)=>{if(p)for(let h of p.previousQueries)t.setQueryData(h[0],h[1]);if(l.message!=="mutationCancelled"){i==null||i(l);let h=Vt.default.singular(d),C=typeof f=="function"?f(l,{id:s,values:E},d):f;g(C,{key:`${s}-${d}-notification`,message:n("notifications.editError",{resource:n(`${d}.${d}`,h),statusCode:l.statusCode},`Error when updating ${h} (status code: ${l.statusCode})`),description:l.message,type:"error"})}}})},Xa=y("@tanstack/react-query"),Ot=F(y("pluralize")),St=()=>{let{mutate:e}=ue(),t=Y(),r=xe(),{resources:a}=z(),o=V(),n=De(),{log:i}=tt(),u=re();return(0,Xa.useMutation)(({resource:v,values:c,metaData:g,dataProviderName:m})=>t(M(v,m,a)).create({resource:v,variables:c,metaData:g}),{onSuccess:(v,{resource:c,successNotification:g,dataProviderName:m,invalidates:l=["list","many"],values:s,metaData:d})=>{var f,E,p;let h=Ot.default.singular(c),C=typeof g=="function"?g(v,s,c):g;u(C,{key:`create-${c}-notification`,message:o("notifications.createSuccess",{resource:o(`${c}.${c}`,h)},`Successfully created ${h}`),description:o("notifications.success","Success"),type:"success"}),r({resource:c,dataProviderName:M(c,m,a),invalidates:l}),n==null||n({channel:`resources/${c}`,type:"created",payload:{ids:(f=v==null?void 0:v.data)!=null&&f.id?[v.data.id]:void 0},date:new Date});let{fields:b,operation:P,variables:S,...D}=d||{};i==null||i.mutate({action:"create",resource:c,data:s,meta:{dataProviderName:M(c,m,a),id:(p=(E=v==null?void 0:v.data)==null?void 0:E.id)!=null?p:void 0,...D}})},onError:(v,{resource:c,errorNotification:g,values:m})=>{e(v);let l=Ot.default.singular(c),s=typeof g=="function"?g(v,m,c):g;u(s,{key:`create-${c}-notification`,description:v.message,message:o("notifications.createError",{resource:o(`${c}.${c}`,l),statusCode:v.statusCode},`There was an error creating ${l} (status code: ${v.statusCode})`),type:"error"})}})},Qt=y("@tanstack/react-query"),Wt=F(y("pluralize")),eo=()=>{let{mutate:e}=ue(),t=Y(),{resources:r}=z(),a=(0,Qt.useQueryClient)(),{mutationMode:o,undoableTimeout:n}=Re(),{notificationDispatch:i}=Ue(),u=V(),v=De(),{log:c}=tt(),g=re(),m=xe();return(0,Qt.useMutation)(({id:l,mutationMode:s,undoableTimeout:d,resource:f,onCancel:E,metaData:p,dataProviderName:h,values:C})=>{let b=s!=null?s:o,P=d!=null?d:n;return b!=="undoable"?t(M(f,h,r)).deleteOne({resource:f,id:l,metaData:p,variables:C}):new Promise((S,D)=>{let x=()=>{t(M(f,h,r)).deleteOne({resource:f,id:l,metaData:p,variables:C}).then(q=>S(q)).catch(q=>D(q))},T=()=>{D({message:"mutationCancelled"})};E&&E(T),i({type:"ADD",payload:{id:l,resource:f,cancelMutation:T,doMutation:x,seconds:P,isSilent:!!E}})})},{onMutate:async({id:l,resource:s,mutationMode:d,dataProviderName:f})=>{let E=oe(s,M(s,f,r)),p=d!=null?d:o;await a.cancelQueries(E.resourceAll,void 0,{silent:!0});let h=a.getQueriesData(E.resourceAll);return p!=="pessimistic"&&(a.setQueriesData(E.list(),C=>C?{data:C.data.filter(b=>{var P;return((P=b.id)==null?void 0:P.toString())!==l.toString()}),total:C.total-1}:null),a.setQueriesData(E.many(),C=>{if(!C)return null;let b=C.data.filter(P=>{var S;return((S=P.id)==null?void 0:S.toString())!==(l==null?void 0:l.toString())});return{...C,data:b}})),{previousQueries:h,queryKey:E}},onSettled:(l,s,{id:d,resource:f,dataProviderName:E,invalidates:p=["list","many"]})=>{m({resource:f,dataProviderName:M(f,E,r),invalidates:p}),i({type:"REMOVE",payload:{id:d,resource:f}})},onSuccess:(l,{id:s,resource:d,successNotification:f,dataProviderName:E,metaData:p},h)=>{let C=Wt.default.singular(d!=null?d:"");a.removeQueries(h==null?void 0:h.queryKey.detail(s));let b=typeof f=="function"?f(l,s,d):f;g(b,{key:`${s}-${d}-notification`,description:u("notifications.success","Success"),message:u("notifications.deleteSuccess",{resource:u(`${d}.${d}`,C)},`Successfully deleted a ${C}`),type:"success"}),v==null||v({channel:`resources/${d}`,type:"deleted",payload:{ids:s?[s]:[]},date:new Date});let{fields:P,operation:S,variables:D,...x}=p||{};c==null||c.mutate({action:"delete",resource:d,meta:{id:s,dataProviderName:M(d,E,r),...x}}),a.removeQueries(h==null?void 0:h.queryKey.detail(s))},onError:(l,{id:s,resource:d,errorNotification:f},E)=>{if(E)for(let p of E.previousQueries)a.setQueryData(p[0],p[1]);if(l.message!=="mutationCancelled"){e(l);let p=Wt.default.singular(d!=null?d:""),h=typeof f=="function"?f(l,s,d):f;g(h,{key:`${s}-${d}-notification`,message:u("notifications.deleteError",{resource:p,statusCode:l.statusCode},`Error (status code: ${l.statusCode})`),description:l.message,type:"error"})}}})},to=y("@tanstack/react-query"),ro=F(y("pluralize")),Tr=()=>{let e=Y(),{resources:t}=z(),r=V(),a=De(),o=re(),n=xe();return(0,to.useMutation)(({resource:i,values:u,metaData:v,dataProviderName:c})=>{let g=e(M(i,c,t));return g.createMany?g.createMany({resource:i,variables:u,metaData:v}):Ye(u.map(m=>g.create({resource:i,variables:m,metaData:v})))},{onSuccess:(i,{resource:u,successNotification:v,dataProviderName:c,invalidates:g=["list","many"],values:m})=>{let l=ro.default.plural(u),s=typeof v=="function"?v(i,m,u):v;o(s,{key:`createMany-${u}-notification`,message:r("notifications.createSuccess",{resource:r(`${u}.${u}`,u)},`Successfully created ${l}`),description:r("notifications.success","Success"),type:"success"}),n({resource:u,dataProviderName:M(u,c,t),invalidates:g});let d=i==null?void 0:i.data.filter(f=>(f==null?void 0:f.id)!==void 0).map(f=>f.id);a==null||a({channel:`resources/${u}`,type:"created",payload:{ids:d},date:new Date})},onError:(i,{resource:u,errorNotification:v,values:c})=>{let g=typeof v=="function"?v(i,c,u):v;o(g,{key:`createMany-${u}-notification`,description:i.message,message:r("notifications.createError",{resource:r(`${u}.${u}`,u),statusCode:i.statusCode},`There was an error creating ${u} (status code: ${i.statusCode}`),type:"error"})}})},Ht=y("@tanstack/react-query"),Bt=F(y("pluralize")),ao=()=>{let{resources:e}=z(),t=(0,Ht.useQueryClient)(),r=Y(),a=V(),{mutationMode:o,undoableTimeout:n}=Re(),{mutate:i}=ue(),{notificationDispatch:u}=Ue(),v=De(),c=re(),g=xe();return(0,Ht.useMutation)(({ids:m,values:l,resource:s,onCancel:d,mutationMode:f,undoableTimeout:E,metaData:p,dataProviderName:h})=>{let C=f!=null?f:o,b=E!=null?E:n,P=r(M(s,h,e)),S=()=>P.updateMany?P.updateMany({resource:s,ids:m,variables:l,metaData:p}):Ye(m.map(D=>P.update({resource:s,id:D,variables:l,metaData:p})));return C!=="undoable"?S():new Promise((D,x)=>{let T=()=>{S().then(N=>D(N)).catch(N=>x(N))},q=()=>{x({message:"mutationCancelled"})};d&&d(q),u({type:"ADD",payload:{id:m,resource:s,cancelMutation:q,doMutation:T,seconds:b,isSilent:!!d}})})},{onMutate:async({resource:m,ids:l,values:s,mutationMode:d,dataProviderName:f,metaData:E})=>{let p=oe(m,M(m,f,e),E),h=d!=null?d:o;await t.cancelQueries(p.resourceAll,void 0,{silent:!0});let C=t.getQueriesData(p.resourceAll);if(h!=="pessimistic"){t.setQueriesData(p.list(),b=>{if(!b)return null;let P=b.data.map(S=>S.id!==void 0&&l.filter(D=>D!==void 0).map(String).includes(S.id.toString())?{...S,...s}:S);return{...b,data:P}}),t.setQueriesData(p.many(),b=>{if(!b)return null;let P=b.data.map(S=>S.id!==void 0&&l.filter(D=>D!==void 0).map(String).includes(S.id.toString())?{...S,...s}:S);return{...b,data:P}});for(let b of l)t.setQueriesData(p.detail(b),P=>{if(!P)return null;let S={...P.data,...s};return{...P,data:S}})}return{previousQueries:C,queryKey:p}},onSettled:(m,l,{ids:s,resource:d,dataProviderName:f})=>{g({resource:d,invalidates:["list","many"],dataProviderName:M(d,f,e)}),s.forEach(E=>g({resource:d,invalidates:["detail"],dataProviderName:M(d,f,e),id:E})),u({type:"REMOVE",payload:{id:s,resource:d}})},onSuccess:(m,{ids:l,resource:s,successNotification:d,values:f})=>{let E=Bt.default.singular(s),p=typeof d=="function"?d(m,{ids:l,values:f},s):d;c(p,{key:`${l}-${s}-notification`,description:a("notifications.success","Successful"),message:a("notifications.editSuccess",{resource:a(`${s}.${s}`,s)},`Successfully updated ${E}`),type:"success"}),v==null||v({channel:`resources/${s}`,type:"updated",payload:{ids:l.map(String)},date:new Date})},onError:(m,{ids:l,resource:s,errorNotification:d,values:f},E)=>{if(E)for(let p of E.previousQueries)t.setQueryData(p[0],p[1]);if(m.message!=="mutationCancelled"){i==null||i(m);let p=Bt.default.singular(s),h=typeof d=="function"?d(m,{ids:l,values:f},s):d;c(h,{key:`${l}-${s}-updateMany-error-notification`,message:a("notifications.editError",{resource:p,statusCode:m.statusCode},`Error when updating ${p} (status code: ${m.statusCode})`),description:m.message,type:"error"})}}})},It=y("@tanstack/react-query"),oo=F(y("pluralize")),no=()=>{let{mutate:e}=ue(),{mutationMode:t,undoableTimeout:r}=Re(),a=Y(),{notificationDispatch:o}=Ue(),n=V(),i=De(),u=re(),v=xe(),{resources:c}=z(),g=(0,It.useQueryClient)();return(0,It.useMutation)(({resource:m,ids:l,mutationMode:s,undoableTimeout:d,onCancel:f,metaData:E,dataProviderName:p,values:h})=>{let C=s!=null?s:t,b=d!=null?d:r,P=a(M(m,p,c)),S=()=>P.deleteMany?P.deleteMany({resource:m,ids:l,metaData:E,variables:h}):Ye(l.map(D=>P.deleteOne({resource:m,id:D,metaData:E,variables:h})));return C!=="undoable"?S():new Promise((D,x)=>{let T=()=>{S().then(N=>D(N)).catch(N=>x(N))},q=()=>{x({message:"mutationCancelled"})};f&&f(q),o({type:"ADD",payload:{id:l,resource:m,cancelMutation:q,doMutation:T,seconds:b,isSilent:!!f}})})},{onMutate:async({ids:m,resource:l,mutationMode:s,dataProviderName:d})=>{let f=oe(l,M(l,d,c)),E=s!=null?s:t;await g.cancelQueries(f.resourceAll,void 0,{silent:!0});let p=g.getQueriesData(f.resourceAll);if(E!=="pessimistic"){g.setQueriesData(f.list(),h=>h?{data:h.data.filter(C=>C.id&&!m.map(String).includes(C.id.toString())),total:h.total-1}:null),g.setQueriesData(f.many(),h=>{if(!h)return null;let C=h.data.filter(b=>b.id?!m.map(String).includes(b.id.toString()):!1);return{...h,data:C}});for(let h of m)g.setQueriesData(f.detail(h),C=>!C||C.data.id==h?null:{...C})}return{previousQueries:p,queryKey:f}},onSettled:(m,l,{resource:s,ids:d,dataProviderName:f,invalidates:E=["list","many"]})=>{v({resource:s,dataProviderName:M(s,f,c),invalidates:E}),o({type:"REMOVE",payload:{id:d,resource:s}})},onSuccess:(m,{ids:l,resource:s,successNotification:d},f)=>{l.forEach(p=>g.removeQueries(f==null?void 0:f.queryKey.detail(p)));let E=typeof d=="function"?d(m,l,s):d;u(E,{key:`${l}-${s}-notification`,description:n("notifications.success","Success"),message:n("notifications.deleteSuccess",{resource:n(`${s}.${s}`,s)},`Successfully deleted ${s}`),type:"success"}),i==null||i({channel:`resources/${s}`,type:"deleted",payload:{ids:l},date:new Date}),l.forEach(p=>g.removeQueries(f==null?void 0:f.queryKey.detail(p)))},onError:(m,{ids:l,resource:s,errorNotification:d},f)=>{if(f)for(let E of f.previousQueries)g.setQueryData(E[0],E[1]);if(m.message!=="mutationCancelled"){e(m);let E=oo.default.singular(s),p=typeof d=="function"?d(m,l,s):d;u(p,{key:`${l}-${s}-notification`,message:n("notifications.deleteError",{resource:E,statusCode:m.statusCode},`Error (status code: ${m.statusCode})`),description:m.message,type:"error"})}}})},lo=e=>{let t=Y(),{getApiUrl:r}=t(e);return r()},io=y("@tanstack/react-query"),so=({url:e,method:t,config:r,queryOptions:a,successNotification:o,errorNotification:n,metaData:i,dataProviderName:u})=>{let v=Y(),{custom:c}=v(u),{mutate:g}=ue(),m=V(),l=re();if(c)return(0,io.useQuery)([u,"custom",t,e,{...r,...i}],({queryKey:s,pageParam:d,signal:f})=>c({url:e,method:t,...r,metaData:{...i,queryContext:{queryKey:s,pageParam:d,signal:f}}}),{...a,onSuccess:s=>{var d;(d=a==null?void 0:a.onSuccess)==null||d.call(a,s);let f=typeof o=="function"?o(s,{...r,...i}):o;l(f)},onError:s=>{var d;g(s),(d=a==null?void 0:a.onError)==null||d.call(a,s);let f=typeof n=="function"?n(s,{...r,...i}):n;l(f,{key:`${t}-notification`,message:m("common:notifications.error",{statusCode:s.statusCode},`Error (status code: ${s.statusCode})`),description:s.message,type:"error"})}});throw Error("Not implemented custom on data provider.")},uo=y("@tanstack/react-query"),co=()=>{let e=re(),t=Y(),r=V();return(0,uo.useMutation)(({url:a,method:o,values:n,metaData:i,dataProviderName:u,config:v})=>{let{custom:c}=t(u);if(c)return c({url:a,method:o,payload:n,metaData:i,headers:{...v==null?void 0:v.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(a,{successNotification:o,config:n,metaData:i})=>{let u=typeof o=="function"?o(a,{...n,...i}):o;e(u)},onError:(a,{errorNotification:o,method:n,config:i,metaData:u})=>{let v=typeof o=="function"?o(a,{...i,...u}):o;e(v,{key:`${n}-notification`,message:r("common:notifications.error",{statusCode:a.statusCode},`Error (status code: ${a.statusCode})`),description:a.message,type:"error"})}})},jt=y("react"),wr=F(y("react")),mo=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),Ft=wr.default.createContext(mo()),fo=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},wr.default.createElement(Ft.Provider,{value:r},e)},Y=()=>{let e=(0,jt.useContext)(Ft);return(0,jt.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},it=y("react"),vo=y("@tanstack/react-query"),qr=F(y("react")),We=qr.default.createContext(void 0),po=({liveProvider:e,children:t})=>qr.default.createElement(We.Provider,{value:e},t),Ge=({resource:e,params:t,channel:r,types:a,enabled:o=!0,liveMode:n,onLiveEvent:i})=>{let u=(0,vo.useQueryClient)(),v=oe(e),c=(0,it.useContext)(We),{liveMode:g,onLiveEvent:m}=(0,it.useContext)(Ee),l=n!=null?n:g;(0,it.useEffect)(()=>{let s;return l&&l!=="off"&&o&&(s=c==null?void 0:c.subscribe({channel:r,params:{resource:e,...t},types:a,callback:d=>{l==="auto"&&u.invalidateQueries(v.resourceAll),i==null||i(d),m==null||m(d)}})),()=>{s&&(c==null||c.unsubscribe(s))}},[o])},go=y("react"),Mr=e=>{let{liveMode:t}=(0,go.useContext)(Ee);return e!=null?e:t},Kt=y("react"),yo=({params:e,channel:t,types:r=["*"],enabled:a=!0,onLiveEvent:o})=>{let n=(0,Kt.useContext)(We);(0,Kt.useEffect)(()=>{let i;return a&&(i=n==null?void 0:n.subscribe({channel:t,params:e,types:r,callback:o})),()=>{i&&(n==null||n.unsubscribe(i))}},[a])},ho=y("react"),De=()=>{let e=(0,ho.useContext)(We);return e==null?void 0:e.publish},bo=y("react"),Nr=F(y("react")),Ze=Nr.default.createContext({resources:[]}),Eo=({resources:e,children:t})=>Nr.default.createElement(Ze.Provider,{value:{resources:e}},t),z=({resourceName:e,resourceNameOrRouteName:t,recordItemId:r}={})=>{let{resources:a}=(0,bo.useContext)(Ze),o=pe(),{useParams:n}=I(),i=n(),u=o(t!=null?t:i.resource),v=e!=null?e:u.name,c=r!=null?r:i.id;return{resources:a,resource:u,resourceName:v,id:c}},zt=y("react"),pe=()=>{let{resources:e}=(0,zt.useContext)(Ze);return(0,zt.useCallback)(t=>{let r=e.find(a=>a.route===t);if(!r){let a=e.find(o=>o.name===t);return a!=null?a:{name:t,route:t}}return r},[e])},Co=y("react"),Ue=()=>{let{notifications:e,notificationDispatch:t}=(0,Co.useContext)(Dr);return{notifications:e,notificationDispatch:t}},Po=y("react"),Lr=F(y("react")),Dt=(0,Lr.createContext)({}),So=({open:e,close:t,children:r})=>Lr.default.createElement(Dt.Provider,{value:{open:e,close:t}},r),Ce=()=>{let{open:e,close:t}=(0,Po.useContext)(Dt);return{open:e,close:t}},Fo=y("react"),re=()=>{let{open:e}=Ce();return(0,Fo.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},_t=y("react"),$r=F(y("react")),ke=$r.default.createContext({}),Do=({children:e,i18nProvider:t})=>$r.default.createElement(ke.Provider,{value:{i18nProvider:t}},e),xo=()=>{let{i18nProvider:e}=(0,_t.useContext)(ke);return(0,_t.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},Yt=y("react"),V=()=>{let{i18nProvider:e}=(0,Yt.useContext)(ke);return(0,Yt.useMemo)(()=>{function t(r,a,o){var n,i;return(i=(n=e==null?void 0:e.translate(r,a,o))!=null?n:o)!=null?i:typeof a=="string"&&typeof o>"u"?a:r}return t},[e])},Gt=y("react"),To=()=>{let{i18nProvider:e}=(0,Gt.useContext)(ke);return(0,Gt.useCallback)(()=>e==null?void 0:e.getLocale(),[])},wo=y("react"),Re=()=>{let{mutationMode:e,undoableTimeout:t}=(0,wo.useContext)(Ee);return{mutationMode:e,undoableTimeout:t}},Zt=y("react"),pt=F(y("react")),Ur=pt.default.createContext({}),qo=({children:e})=>{let[t,r]=(0,pt.useState)(!1);return pt.default.createElement(Ur.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},xt=()=>{let{warnWhenUnsavedChanges:e}=(0,Zt.useContext)(Ee),{warnWhen:t,setWarnWhen:r}=(0,Zt.useContext)(Ur);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}},Mo=y("react"),kr=()=>{let{syncWithLocation:e}=(0,Mo.useContext)(Ee);return{syncWithLocation:e}},No=y("react"),Lo=()=>{let{Title:e}=(0,No.useContext)(Ee);return e},$o=y("react"),Je=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:o,Title:n,hasDashboard:i,mutationMode:u,syncWithLocation:v,undoableTimeout:c,warnWhenUnsavedChanges:g,DashboardPage:m,LoginPage:l,catchAll:s,options:d}=(0,$o.useContext)(Ee);return{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:o,Title:n,hasDashboard:i,mutationMode:u,syncWithLocation:v,undoableTimeout:c,warnWhenUnsavedChanges:g,DashboardPage:m,LoginPage:l,catchAll:s,options:d}},Uo=y("react"),ko=y("export-to-csv-fix-source-map"),Ro=({resourceName:e,sorter:t,filters:r,maxItemCount:a,pageSize:o=20,mapData:n=g=>g,exportOptions:i,metaData:u,dataProviderName:v,onError:c}={})=>{let[g,m]=(0,Uo.useState)(!1),{resources:l}=z(),s=pe(),d=Y(),{useParams:f}=I(),{resource:E}=f(),{name:p}=s(E);e&&(p=e);let h=`${bt(p,"plural")}-${new Date().toLocaleString()}`,{getList:C}=d(M(p,v,l));return{isLoading:g,triggerExport:async()=>{m(!0);let b=[],P=1,S=!0;for(;S;)try{let{data:D,total:x}=await C({resource:p,filters:r,sort:t,pagination:{current:P,pageSize:o},metaData:u});P++,b.push(...D),a&&b.length>=a&&(b=b.slice(0,a),S=!1),x===b.length&&(S=!1)}catch(D){m(!1),S=!1,c==null||c(D);return}new ko.ExportToCsv({filename:h,useKeysAsHeaders:!0,...i}).generateCsv(b.map(n)),m(!1)}}},Jt=F(y("react")),Ao=({resource:e,action:t,id:r,onMutationSuccess:a,onMutationError:o,redirect:n,successNotification:i,errorNotification:u,metaData:v,mutationMode:c,liveMode:g,onLiveEvent:m,liveParams:l,undoableTimeout:s,dataProviderName:d,invalidates:f,queryOptions:E}={})=>{var p;let{options:h}=Je(),{useParams:C}=I(),{resource:b,action:P,id:S}=C(),D=!e||e===b?r!=null?r:S:r,[x,T]=Jt.default.useState(D);Jt.default.useEffect(()=>{D!==x&&T(r)},[r]);let q=e!=null?e:b,N=(p=t!=null?t:P==="show"?"create":P)!=null?p:"create",U=pe()(q),{mutationMode:B}=Re(),w=c!=null?c:B,L=N==="create",$=N==="edit",K=N==="clone",ee=za({redirectFromProps:n,action:N,redirectOptions:h.redirect}),ie=x!==void 0&&($||K),W=Pt({resource:U.name,id:x!=null?x:"",queryOptions:{enabled:ie,...E},liveMode:g,onLiveEvent:m,liveParams:l,metaData:v,dataProviderName:d}),{isFetching:k}=W,O=St(),{mutate:ce,isLoading:Te}=O,ge=xr(),{mutate:Be,isLoading:me}=ge,{setWarnWhen:Ae}=xt(),Ve=Rr();return{...L||K?{formLoading:k||Te,mutationResult:O,onFinish:async te=>{Ae(!1);let ae=fe=>{Ve({redirect:ee,resource:U,id:fe})};return w!=="pessimistic"&&setTimeout(()=>{ae()}),new Promise((fe,we)=>(w!=="pessimistic"&&fe(),ce({values:te,resource:U.name,successNotification:i,errorNotification:u,metaData:v,dataProviderName:d,invalidates:f},{onSuccess:(se,ye,Pe)=>{var he;a&&a(se,te,Pe);let A=(he=se==null?void 0:se.data)==null?void 0:he.id;ae(A),fe(se)},onError:(se,ye,Pe)=>{if(o)return o(se,te,Pe);we()}})))}}:{formLoading:k||me,mutationResult:ge,onFinish:async te=>{Ae(!1);let ae={id:x!=null?x:"",values:te,resource:U.name,mutationMode:w,undoableTimeout:s,successNotification:i,errorNotification:u,metaData:v,dataProviderName:d,invalidates:f},fe=()=>{T(D),Ve({redirect:ee,resource:U,id:x})};return w!=="pessimistic"&&setTimeout(()=>{fe()}),new Promise((we,se)=>(w!=="pessimistic"&&we(),setTimeout(()=>{Be(ae,{onSuccess:(ye,Pe,he)=>{a&&a(ye,te,he),w==="pessimistic"&&fe(),we(ye)},onError:(ye,Pe,he)=>{if(o)return o(ye,te,he);se()}})})))}},queryResult:W,id:x,setId:T,redirect:(te,ae)=>{Ve({redirect:te!==void 0?te:$?"list":"edit",resource:U,id:ae!=null?ae:x})}}},Vo=y("react"),Rr=()=>{let{show:e,edit:t,list:r,create:a}=ne();return(0,Vo.useCallback)(({redirect:o,resource:n,id:i})=>{if(o&&n.route)return n.canShow&&o==="show"&&i?e(n.route,i):n.canEdit&&o==="edit"&&i?t(n.route,i):n.canCreate&&o==="create"?a(n.route):r(n.route,"push")},[])},ne=()=>{let{useHistory:e}=I(),t=e(),r=pe(),a=(c,g="push")=>{g==="push"?t.push(c):t.replace(c)},o=c=>`/${r(c).route}/create`,n=(c,g)=>{let m=r(c),l=encodeURIComponent(g);return`/${m.route}/edit/${l}`},i=(c,g)=>{let m=r(c),l=encodeURIComponent(g);return`/${m.route}/clone/${l}`},u=(c,g)=>{let m=r(c),l=encodeURIComponent(g);return`/${m.route}/show/${l}`},v=c=>`/${r(c).route}`;return{create:(c,g="push")=>{a(o(c),g)},createUrl:o,edit:(c,g,m="push")=>{a(n(c,g),m)},editUrl:n,clone:(c,g,m="push")=>{a(i(c,g),m)},cloneUrl:i,show:(c,g,m="push")=>{a(u(c,g),m)},showUrl:u,list:(c,g="push")=>{a(v(c),g)},listUrl:v,push:(c,...g)=>{t.push(c,...g)},replace:(c,...g)=>{t.replace(c,...g)},goBack:()=>{t.goBack()}}},Xt=F(y("react")),Oo=({resource:e,id:t,successNotification:r,errorNotification:a,metaData:o,liveMode:n,onLiveEvent:i,dataProviderName:u,queryOptions:v}={})=>{let{useParams:c}=I(),{resource:g,id:m}=c(),l=!e||e===g?t!=null?t:m:t,[s,d]=(0,Xt.useState)(l);Xt.default.useEffect(()=>{l!==s&&d(l)},[l]);let f=pe()(e!=null?e:g);return{queryResult:Pt({resource:f.name,id:s!=null?s:"",queryOptions:{enabled:s!==void 0,...v},successNotification:r,errorNotification:a,metaData:o,liveMode:n,onLiveEvent:i,dataProviderName:u}),showId:s,setShowId:d}},Ie=y("react"),Qo=y("papaparse"),Wo=F(y("lodash/chunk")),Ho=({resourceName:e,mapData:t=v=>v,paparseOptions:r,batchSize:a=Number.MAX_SAFE_INTEGER,onFinish:o,metaData:n,onProgress:i,dataProviderName:u}={})=>{let[v,c]=(0,Ie.useState)(0),[g,m]=(0,Ie.useState)(0),[l,s]=(0,Ie.useState)(!1),d=pe(),{useParams:f}=I(),{resource:E}=f(),{name:p}=d(e!=null?e:E),h=Tr(),C=St(),b;a===1?b=C:b=h;let P=()=>{m(0),c(0),s(!1)},S=x=>{let T={succeeded:x.filter(q=>q.type==="success"),errored:x.filter(q=>q.type==="error")};o==null||o(T),s(!1)};(0,Ie.useEffect)(()=>{i==null||i({totalAmount:g,processedAmount:v})},[g,v]);let D=({file:x})=>(P(),new Promise(T=>{s(!0),(0,Qo.parse)(x,{complete:async({data:q})=>{let N=gr(q,t);if(m(N.length),a===1){let U=N.map(w=>async()=>({response:await C.mutateAsync({resource:p,values:w,successNotification:!1,errorNotification:!1,dataProviderName:u,metaData:n}),value:w})),B=await Rt(U,({response:w,value:L})=>(c($=>$+1),{response:[w.data],type:"success",request:[L]}),(w,L)=>({response:[w],type:"error",request:[N[L]]}));T(B)}else{let U=(0,Wo.default)(N,a),B=U.map(L=>async()=>({response:await h.mutateAsync({resource:p,values:L,successNotification:!1,errorNotification:!1,dataProviderName:u,metaData:n}),value:L,currentBatchLength:L.length})),w=await Rt(B,({response:L,currentBatchLength:$,value:K})=>(c(ee=>ee+$),{response:L.data,type:"success",request:K}),(L,$)=>({response:[L],type:"error",request:U[$]}));T(w)}},...r})}).then(T=>(S(T),T)));return{inputProps:{type:"file",accept:".csv",onChange:x=>{x.target.files&&x.target.files.length>0&&D({file:x.target.files[0]})}},mutationResult:b,isLoading:l,handleChange:D}},st=y("react"),Bo=({defaultVisible:e=!1}={})=>{let[t,r]=(0,st.useState)(e),a=(0,st.useCallback)(()=>r(!0),[t]),o=(0,st.useCallback)(()=>r(!1),[t]);return{visible:t,show:a,close:o}},Io=y("react"),Ar=F(y("react")),jo={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Tt=Ar.default.createContext(jo),Ko=({children:e,useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:n,routes:i})=>Ar.default.createElement(Tt.Provider,{value:{useHistory:t,useLocation:r,useParams:a,Prompt:o,Link:n,routes:i}},e),I=()=>{let{useHistory:e,useLocation:t,useParams:r,Prompt:a,Link:o,routes:n}=(0,Io.useContext)(Tt);return{useHistory:e,useLocation:t,useParams:r,Prompt:a,Link:o,routes:n}},zo=y("react"),_o=y("@tanstack/react-query"),Vr=F(y("react")),Xe=Vr.default.createContext({}),Yo=({can:e,children:t})=>Vr.default.createElement(Xe.Provider,{value:{can:e}},t),Or=({action:e,resource:t,params:r,queryOptions:a})=>{let{can:o}=(0,zo.useContext)(Xe),{resource:n,...i}=r!=null?r:{},{icon:u,list:v,edit:c,create:g,show:m,children:l,...s}=n!=null?n:{},d=(0,_o.useQuery)(["useCan",{action:e,resource:t,params:{...i,resource:s},enabled:a==null?void 0:a.enabled}],()=>{var f;return(f=o==null?void 0:o({action:e,resource:t,params:r}))!=null?f:Promise.resolve({can:!0})},{enabled:typeof o<"u",...a,retry:!1});return typeof o>"u"?{data:{can:!0}}:d},Go=y("react"),Zo=()=>{let{can:e}=(0,Go.useContext)(Xe);return{can:e}},qe=y("react"),Jo=F(y("lodash/uniqBy")),Xo=F(y("lodash/debounce")),je=F(y("lodash/get")),en=e=>{var t,r;let[a,o]=(0,qe.useState)([]),[n,i]=(0,qe.useState)([]),[u,v]=(0,qe.useState)([]),{resource:c,sort:g,filters:m=[],optionLabel:l="title",optionValue:s="id",debounce:d=300,successNotification:f,errorNotification:E,defaultValueQueryOptions:p,queryOptions:h,fetchSize:C,pagination:b,hasPagination:P,liveMode:S,defaultValue:D=[],onLiveEvent:x,onSearch:T,liveParams:q,metaData:N,dataProviderName:U}=e,B=Array.isArray(D)?D:[D],w=(0,qe.useCallback)(W=>{v(W.data.map(k=>({label:(0,je.default)(k,l),value:(0,je.default)(k,s)})))},[l,s]),L=p!=null?p:h,$=Fr({resource:c,ids:B,queryOptions:{...L,enabled:B.length>0&&((t=p==null?void 0:p.enabled)!=null?t:!0),onSuccess:W=>{var k;w(W),(k=L==null?void 0:L.onSuccess)==null||k.call(L,W)}},metaData:N,liveMode:"off",dataProviderName:U}),K=(0,qe.useCallback)(W=>{i(W.data.map(k=>({label:(0,je.default)(k,l),value:(0,je.default)(k,s)})))},[l,s]),ee=Ct({resource:c,config:{sort:g,filters:m.concat(a),pagination:{current:b==null?void 0:b.current,pageSize:(r=b==null?void 0:b.pageSize)!=null?r:C},hasPagination:P},queryOptions:{...h,onSuccess:W=>{var k;K(W),(k=h==null?void 0:h.onSuccess)==null||k.call(h,W)}},successNotification:f,errorNotification:E,metaData:N,liveMode:S,liveParams:q,onLiveEvent:x,dataProviderName:U}),ie=W=>{if(T){o(T(W));return}if(W)o([{field:l,operator:"contains",value:W}]);else{o([]);return}};return{queryResult:ee,defaultValueQueryResult:$,options:(0,qe.useMemo)(()=>(0,Jo.default)([...n,...u],"value"),[n,u]),onSearch:(0,Xo.default)(ie,d)}},Fe=y("react"),er=F(y("qs")),tr=F(y("lodash/differenceWith")),rr=F(y("lodash/isEqual")),tn=[],rn=[];function an({initialCurrent:e=1,initialPageSize:t=10,hasPagination:r=!0,initialSorter:a,permanentSorter:o=rn,defaultSetFilterBehavior:n="merge",initialFilter:i,permanentFilter:u=tn,syncWithLocation:v,resource:c,successNotification:g,errorNotification:m,queryOptions:l,liveMode:s,onLiveEvent:d,liveParams:f,metaData:E,dataProviderName:p}={}){var h;let{syncWithLocation:C}=kr(),b=v!=null?v:C,{useLocation:P,useParams:S}=I(),{search:D,pathname:x}=P(),T=Mr(s),{parsedCurrent:q,parsedPageSize:N,parsedSorter:U,parsedFilters:B}=ht(D),w=q||e,L=N||t,$=U.length?U:a,K=B.length?B:i,{resource:ee}=S(),{replace:ie}=ne(),W=pe()(c!=null?c:ee),[k,O]=(0,Fe.useState)(vt(o,$!=null?$:[])),[ce,Te]=(0,Fe.useState)(ft(u,K!=null?K:[])),[ge,Be]=(0,Fe.useState)(w),[me,Ae]=(0,Fe.useState)(L),Ve=({pagination:{current:A,pageSize:G},sorter:Nt,filters:Lt})=>{let ot=er.default.parse(D==null?void 0:D.substring(1)),zr=ct({pagination:{pageSize:G,current:A},sorter:Nt,filters:Lt,...ot});return`${x}?${zr}`};(0,Fe.useEffect)(()=>{D===""&&(Be(w),Ae(L),O(vt(o,$!=null?$:[])),Te(ft(u,K!=null?K:[])))},[D]);let te=()=>{let{sorter:A,filters:G,pageSize:Nt,current:Lt,...ot}=er.default.parse(D,{ignoreQueryPrefix:!0});return ot};(0,Fe.useEffect)(()=>{if(b){let A=te(),G=ct({...r?{pagination:{pageSize:me,current:ge}}:{},sorter:(0,tr.default)(k,o,rr.default),filters:(0,tr.default)(ce,u,rr.default),...A});return ie(`${x}?${G}`,void 0,{shallow:!0})}},[b,ge,me,k,ce]);let ae=Ct({resource:W.name,config:{hasPagination:r,pagination:{current:ge,pageSize:me},filters:Oe(u,ce),sort:mt(o,k)},queryOptions:l,successNotification:g,errorNotification:m,metaData:E,liveMode:T,liveParams:f,onLiveEvent:d,dataProviderName:p}),fe=A=>{Te(G=>Oe(u,A,G))},we=A=>{Te(Oe(u,A))},se=A=>{Te(G=>Oe(u,A(G)))},ye=(A,G=n)=>{typeof A=="function"?se(A):G==="replace"?we(A):fe(A)},Pe=A=>{O(()=>mt(o,A))},he=(0,Fe.useMemo)(()=>{var A,G;return r?{current:ge,setCurrent:Be,pageSize:me,setPageSize:Ae,pageCount:me?Math.ceil(((G=(A=ae.data)==null?void 0:A.total)!=null?G:0)/me):1}:{current:void 0,setCurrent:void 0,pageSize:void 0,setPageSize:void 0,pageCount:void 0}},[r,ge,me,(h=ae.data)==null?void 0:h.total]);return{tableQueryResult:ae,sorter:k,setSorter:Pe,filters:ce,setFilters:ye,...he,createLinkForSyncWithLocation:Ve}}var ar=y("react"),ut=y("@tanstack/react-query"),Qr=F(y("react")),et=Qr.default.createContext({}),on=({create:e,get:t,update:r,children:a})=>Qr.default.createElement(et.Provider,{value:{create:e,get:t,update:r}},a),tt=()=>{let e=(0,ut.useQueryClient)(),t=(0,ar.useContext)(et),{resources:r}=(0,ar.useContext)(Ze),{data:a,refetch:o,isLoading:n}=dr({queryOptions:{enabled:!!t}}),i=(0,ut.useMutation)(async v=>{var c,g,m;let l=r.find(f=>f.name===v.resource),s=(g=(c=l==null?void 0:l.options)==null?void 0:c.auditLog)==null?void 0:g.permissions;if(s&&!Ha(s,v.action))return;let d;return n&&(d=await o()),await((m=t.create)==null?void 0:m.call(t,{...v,author:a!=null?a:d==null?void 0:d.data}))}),u=(0,ut.useMutation)(async v=>{var c;return await((c=t.update)==null?void 0:c.call(t,v))},{onSuccess:v=>{if(v!=null&&v.resource){let c=oe(v==null?void 0:v.resource);e.invalidateQueries(c.logList())}}});return{log:i,rename:u}},nn=y("react"),ln=y("@tanstack/react-query"),sn=({resource:e,action:t,meta:r,author:a,metaData:o,queryOptions:n})=>{let{get:i}=(0,nn.useContext)(et),u=oe(e,void 0,o);return(0,ln.useQuery)(u.logList(r),()=>{var v;return(v=i==null?void 0:i({resource:e,action:t,author:a,meta:r,metaData:o}))!=null?v:Promise.resolve([])},{enabled:typeof i<"u",...n,retry:!1})},un=y("react"),dn=y("@tanstack/react-query"),xe=()=>{let{resources:e}=z(),t=(0,dn.useQueryClient)();return(0,un.useCallback)(({resource:r,dataProviderName:a,invalidates:o,id:n})=>{if(o===!1)return;let i=oe(r,M(r,a,e));o.forEach(u=>{switch(u){case"all":t.invalidateQueries(i.all);break;case"list":t.invalidateQueries(i.list());break;case"many":t.invalidateQueries(i.many());break;case"resourceAll":t.invalidateQueries(i.resourceAll);break;case"detail":t.invalidateQueries(i.detail(n||""));break;default:break}})},[])},cn=y("react"),mn=F(y("warn-once")),fn=()=>{var e;let{useParams:t}=I(),{i18nProvider:r}=(0,cn.useContext)(ke),a=V(),{resources:o,resource:n}=z(),{action:i}=t(),u=[];if(!(n!=null&&n.name))return{breadcrumbs:u};let v=c=>{var g;let m=o.find(l=>l.name===c);m&&(m.parentName&&v(m.parentName),u.push({label:(g=m.label)!=null?g:a(`${m.name}.${m.name}`,Qe(m.name)),href:m.list?`/${m.route}`:void 0,icon:m.icon}))};if(n.parentName&&v(n.parentName),u.push({label:(e=n.label)!=null?e:a(`${n.name}.${n.name}`,Qe(n.name)),href:n.list?`/${n.route}`:void 0,icon:n.icon}),i){let c=`actions.${i}`,g=a(c);typeof r<"u"&&g===c?((0,mn.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${i}" action. Please add "actions.${i}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),u.push({label:a(`buttons.${i}`,Qe(i))})):u.push({label:a(c,Qe(i))})}return{breadcrumbs:u}},Me=F(y("react")),vn=()=>{let{resources:e}=z(),t=V(),{useLocation:r,useParams:a}=I(),o=r(),n=a(),{hasDashboard:i}=Je(),u=Me.default.useMemo(()=>{let l=e.find(d=>(o==null?void 0:o.pathname)===`/${d.route}`);l||(l=e.find(d=>(n==null?void 0:n.resource)===d.route));let s;return l!=null&&l.route?s=`/${l==null?void 0:l.route}`:o.pathname==="/"?s="/":s=o==null?void 0:o.pathname,s},[e,o,n]),v=Me.default.useMemo(()=>e.map(l=>{var s,d;let f=`/${l.route}`;return{...l,icon:l.icon,route:f,key:(s=l.key)!=null?s:f,label:(d=l.label)!=null?d:t(`${l.name}.${l.name}`,bt(l.name,"plural"))}}),[e,i,t]),c=Me.default.useMemo(()=>Cr(v),[v]),g=Me.default.useCallback((l,s,d=!1)=>{let f=s.find(E=>d?E.name===l:E.route===l);if(f){let E=[];return d&&f.route&&E.unshift(f.route),f.parentName&&E.unshift(...g(f.parentName,s,!0)),E}return[]},[]),m=Me.default.useMemo(()=>g(u,v),[u,v]);return Me.default.useMemo(()=>{let l=s=>s.reduce((d,f)=>{var E,p;return f.children.length>0&&((E=f.options)==null?void 0:E.hide)!==!0?[...d,{...f,children:l(f.children)}]:typeof f.list<"u"&&((p=f.options)==null?void 0:p.hide)!==!0?[...d,f]:d},[]);return{defaultOpenKeys:m,selectedKey:u,menuItems:l(c)}},[m,u,c])},pn=()=>{let[e,t]=(0,Se.useState)(),{push:r}=ne(),a=V(),o=["edit","create","show"],{useParams:n}=I(),i=n(),u=pe();return(0,Se.useEffect)(()=>{if(i.resource){let v=u(i.resource);i.action&&o.includes(i.action)&&!v[i.action]&&t(a("pages.error.info",{action:i.action,resource:i.resource},`You may have forgotten to add the "${i.action}" component to "${i.resource}" resource.`))}},[i]),Se.default.createElement(Se.default.Fragment,null,Se.default.createElement("h1",null,a("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&Se.default.createElement("p",null,e),Se.default.createElement("button",{onClick:()=>r("/")},a("pages.error.backHome",void 0,"Back Home")))},j=F(y("react")),Wr=()=>{let[e,t]=(0,j.useState)(""),[r,a]=(0,j.useState)(""),o=V(),{mutate:n}=gt();return j.default.createElement(j.default.Fragment,null,j.default.createElement("h1",null,o("pages.login.title","Sign in your account")),j.default.createElement("form",{onSubmit:i=>{i.preventDefault(),n({username:e,password:r})}},j.default.createElement("table",null,j.default.createElement("tbody",null,j.default.createElement("tr",null,j.default.createElement("td",null,o("pages.login.username",void 0,"username"),":"),j.default.createElement("td",null,j.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:i=>t(i.target.value)}))),j.default.createElement("tr",null,j.default.createElement("td",null,o("pages.login.password",void 0,"password"),":"),j.default.createElement("td",null,j.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:i=>a(i.target.value)}))))),j.default.createElement("br",null),j.default.createElement("input",{type:"submit",value:"login"})))},Ne=F(y("react")),R=F(y("react")),gn=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:a,contentProps:o,wrapperProps:n,renderContent:i,formProps:u})=>{let{Link:v}=I(),[c,g]=(0,R.useState)(""),[m,l]=(0,R.useState)(""),[s,d]=(0,R.useState)(!1),f=V(),{mutate:E}=gt(),p=(b,P)=>b?typeof b=="string"?R.default.createElement(v,{to:b},P):b:null,h=()=>e?e.map(b=>{var P;return R.default.createElement("div",{key:b.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},R.default.createElement("button",{onClick:()=>E({providerName:b.name}),style:{display:"flex",alignItems:"center"}},b==null?void 0:b.icon,(P=b.label)!=null?P:R.default.createElement("label",null,b.label)))}):null,C=R.default.createElement("div",{...o},R.default.createElement("h1",{style:{textAlign:"center"}},f("pages.login.title","Sign in to your account")),h(),R.default.createElement("hr",null),R.default.createElement("form",{onSubmit:b=>{b.preventDefault(),E({email:c,password:m,remember:s})},...u},R.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},R.default.createElement("label",null,f("pages.login.fields.email","Email")),R.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:c,onChange:b=>g(b.target.value)}),R.default.createElement("label",null,f("pages.login.fields.password","Password")),R.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:m,onChange:b=>l(b.target.value)}),a!=null?a:R.default.createElement(R.default.Fragment,null,R.default.createElement("label",null,f("pages.login.buttons.rememberMe","Remember me"),R.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:s,value:s.toString(),onChange:()=>{d(!s)}}))),R.default.createElement("br",null),r!=null?r:p("/forgot-password",f("pages.login.buttons.forgotPassword","Forgot password?")),R.default.createElement("input",{type:"submit",value:f("pages.login.signin","Sign in")}),t!=null?t:R.default.createElement("span",null,f("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",p("/register",f("pages.login.register","Sign up"))))));return R.default.createElement("div",{...n},i?i(C):C)},H=F(y("react")),yn=({providers:e,loginLink:t,wrapperProps:r,contentProps:a,renderContent:o,formProps:n})=>{let{Link:i}=I(),[u,v]=(0,H.useState)(""),[c,g]=(0,H.useState)(""),m=V(),{mutate:l,isLoading:s}=mr(),d=(p,h)=>p?typeof p=="string"?H.default.createElement(i,{to:p},h):p:null,f=()=>e?e.map(p=>{var h;return H.default.createElement("div",{key:p.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},H.default.createElement("button",{onClick:()=>l({providerName:p.name}),style:{display:"flex",alignItems:"center"}},p==null?void 0:p.icon,(h=p.label)!=null?h:H.default.createElement("label",null,p.label)))}):null,E=H.default.createElement("div",{...a},H.default.createElement("h1",{style:{textAlign:"center"}},m("pages.register.title","Sign up for your account")),f(),H.default.createElement("hr",null),H.default.createElement("form",{onSubmit:p=>{p.preventDefault(),l({email:u,password:c})},...n},H.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},H.default.createElement("label",null,m("pages.register.fields.email","Email")),H.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:u,onChange:p=>v(p.target.value)}),H.default.createElement("label",null,m("pages.register.fields.password","Password")),H.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:c,onChange:p=>g(p.target.value)}),H.default.createElement("input",{type:"submit",value:m("pages.register.buttons.submit","Sign up"),disabled:s}),t!=null?t:H.default.createElement(H.default.Fragment,null,H.default.createElement("span",null,m("pages.login.buttons.haveAccount","Have an account?")," ",d("login",m("pages.login.signin","Sign in")))))));return H.default.createElement("div",{...r},o?o(E):E)},Z=F(y("react")),hn=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:a,formProps:o})=>{let n=V(),{Link:i}=I(),[u,v]=(0,Z.useState)(""),{mutate:c,isLoading:g}=fr(),m=(s,d)=>s?typeof s=="string"?Z.default.createElement(i,{to:s},d):s:null,l=Z.default.createElement("div",{...r},Z.default.createElement("h1",{style:{textAlign:"center"}},n("pages.forgotPassword.title","Forgot your password?")),Z.default.createElement("hr",null),Z.default.createElement("form",{onSubmit:s=>{s.preventDefault(),c({email:u})},...o},Z.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Z.default.createElement("label",null,n("pages.forgotPassword.fields.email","Email")),Z.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:u,onChange:s=>v(s.target.value)}),Z.default.createElement("input",{type:"submit",disabled:g,value:n("pages.forgotPassword.buttons.submit","Send reset instructions")}),Z.default.createElement("br",null),e!=null?e:Z.default.createElement("span",null,n("pages.register.buttons.haveAccount","Have an account? ")," ",m("/login",n("pages.login.signin","Sign in"))))));return Z.default.createElement("div",{...t},a?a(l):l)},J=F(y("react")),bn=({wrapperProps:e,contentProps:t,renderContent:r,formProps:a})=>{let o=V(),{mutate:n,isLoading:i}=vr(),[u,v]=(0,J.useState)(""),[c,g]=(0,J.useState)(""),m=J.default.createElement("div",{...t},J.default.createElement("h1",{style:{textAlign:"center"}},o("pages.updatePassword.title","Update Password")),J.default.createElement("hr",null),J.default.createElement("form",{onSubmit:l=>{l.preventDefault(),n({password:u,confirmPassword:c})},...a},J.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},J.default.createElement("label",null,o("pages.updatePassword.fields.password","New Password")),J.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:u,onChange:l=>v(l.target.value)}),J.default.createElement("label",null,o("pages.updatePassword.fields.confirmPassword","Confirm New Password")),J.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:c,onChange:l=>g(l.target.value)}),J.default.createElement("input",{type:"submit",disabled:i,value:o("pages.updatePassword.buttons.submit","Update")}))));return J.default.createElement("div",{...e},r?r(m):m)},En=e=>{let{type:t}=e;return Ne.default.createElement(Ne.default.Fragment,null,(()=>{switch(t){case"register":return Ne.default.createElement(yn,{...e});case"forgotPassword":return Ne.default.createElement(hn,{...e});case"updatePassword":return Ne.default.createElement(bn,{...e});default:return Ne.default.createElement(gn,{...e})}})())},_=F(y("react")),Hr=()=>_.default.createElement(_.default.Fragment,null,_.default.createElement("h1",null,"Welcome on board"),_.default.createElement("p",null,"Your configuration is completed."),_.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",_.default.createElement("code",null,"`resources`")," property of ",_.default.createElement("code",null,"`<Refine>`")),_.default.createElement("div",{style:{display:"flex",gap:8}},_.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},_.default.createElement("button",null,"Documentation")),_.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},_.default.createElement("button",null,"Examples")),_.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},_.default.createElement("button",null,"Community")))),Q=F(y("react")),dt=y("@tanstack/react-query"),Cn=y("@tanstack/react-query-devtools"),Pn=y("react"),be=y("react"),Sn="3.90.6",Fn=()=>{let e=(0,be.useContext)(X),t=(0,be.useContext)(et),r=(0,be.useContext)(We),a=(0,be.useContext)(Tt),o=(0,be.useContext)(Ft),{i18nProvider:n}=(0,be.useContext)(ke),i=(0,be.useContext)(Dt),u=(0,be.useContext)(Xe),{resources:v}=z(),c=e.isProvided,g=!!t.create||!!t.get||!!t.update,m=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),l=!!a.useHistory||!!a.Link||!!a.Prompt||!!a.useLocation||!!a.useParams,s=!!o,d=!!(n!=null&&n.changeLocale)||!!(n!=null&&n.getLocale)||!!(n!=null&&n.translate),f=!!i.close||!!i.open,E=!!u.can;return{providers:{auth:c,auditLog:g,live:m,router:l,data:s,i18n:d,notification:f,accessControl:E},version:Sn,resourceCount:v.length}},Dn=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},xn=()=>{let e=Fn();return(0,Pn.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${Dn(e)}`},[]),null},Tn=y("react"),wn=y("react"),qn=F(y("lodash/isEqual")),Mn=e=>{let t=(0,wn.useRef)(e);return(0,qn.default)(t.current,e)||(t.current=e),t.current},or=(e,t)=>{let r=Mn(t);return(0,Tn.useMemo)(e,r)},Nn=({authProvider:e,dataProvider:t,routerProvider:r,notificationProvider:a,accessControlProvider:o,auditLogProvider:n,resources:i,DashboardPage:u,ReadyPage:v,LoginPage:c,catchAll:g,children:m,liveProvider:l,i18nProvider:s,mutationMode:d,syncWithLocation:f,warnWhenUnsavedChanges:E,undoableTimeout:p,Title:h,Layout:C,Sider:b,Header:P,Footer:S,OffLayoutArea:D,reactQueryClientConfig:x,reactQueryDevtoolConfig:T,liveMode:q,onLiveEvent:N,disableTelemetry:U,options:B})=>{let{optionsWithDefaults:w,disableTelemetryWithDefault:L,reactQueryWithDefaults:$}=Ka({options:B,disableTelemetry:U,liveMode:q,mutationMode:d,reactQueryClientConfig:x,reactQueryDevtoolConfig:T,syncWithLocation:f,warnWhenUnsavedChanges:E,undoableTimeout:p}),K=or(()=>{var k;return $.clientConfig instanceof dt.QueryClient?$.clientConfig:new dt.QueryClient({...$.clientConfig,defaultOptions:{...$.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(k=$.clientConfig.defaultOptions)==null?void 0:k.queries}}})},[$.clientConfig]),ee=Q.default.useMemo(()=>typeof a=="function"?a:()=>a!=null?a:{},[a])(),ie=or(()=>{let k=[];return i==null||i.forEach(O=>{var ce;k.push({key:O.key,name:O.name,label:(ce=O.options)==null?void 0:ce.label,icon:O.icon,route:Et(O,i),canCreate:!!O.create,canEdit:!!O.edit,canShow:!!O.show,canDelete:O.canDelete,create:O.create,show:O.show,list:O.list,edit:O.edit,options:O.options,parentName:O.parentName})}),k},[i]);if(ie.length===0)return v?Q.default.createElement(v,null):Q.default.createElement(Hr,null);let{RouterComponent:W=Q.default.Fragment}=r;return Q.default.createElement(dt.QueryClientProvider,{client:K},Q.default.createElement(So,{...ee},Q.default.createElement(da,{...e!=null?e:{},isProvided:Boolean(e)},Q.default.createElement(fo,{...t},Q.default.createElement(po,{liveProvider:l},Q.default.createElement(Ko,{...r},Q.default.createElement(Eo,{resources:ie},Q.default.createElement(Do,{i18nProvider:s},Q.default.createElement(Yo,{...o!=null?o:{}},Q.default.createElement(on,{...n!=null?n:{}},Q.default.createElement(Ja,null,Q.default.createElement(ja,{mutationMode:w.mutationMode,warnWhenUnsavedChanges:w.warnWhenUnsavedChanges,syncWithLocation:w.syncWithLocation,Title:h,undoableTimeout:w.undoableTimeout,catchAll:g,DashboardPage:u,LoginPage:c,Layout:C,Sider:b,Footer:S,Header:P,OffLayoutArea:D,hasDashboard:!!u,liveMode:w.liveMode,onLiveEvent:N,options:w},Q.default.createElement(qo,null,Q.default.createElement(W,null,m,!L&&Q.default.createElement(xn,null),Q.default.createElement(Ir,null)))))))))))))),$.devtoolConfig===!1?null:Q.default.createElement(Cn.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...$.devtoolConfig}))},nr=y("react"),Br=({notification:e})=>{let t=V(),{notificationDispatch:r}=Ue(),{open:a}=Ce(),[o,n]=(0,nr.useState)(),i=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||a==null||a({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:nt(e.seconds)},`You have ${nt(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:nt(e.seconds)}),e.seconds>0)){o&&clearTimeout(o);let u=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);n(u)}};return(0,nr.useEffect)(()=>{i()},[e]),null},ze=F(y("react")),Ln=({children:e,Layout:t,Sider:r,Header:a,Title:o,Footer:n,OffLayoutArea:i})=>{let{Layout:u,Footer:v,Header:c,Sider:g,Title:m,OffLayoutArea:l}=Je(),s=t!=null?t:u;return ze.default.createElement(s,{Sider:r!=null?r:g,Header:a!=null?a:c,Footer:n!=null?n:v,Title:o!=null?o:m,OffLayoutArea:i!=null?i:l},e,ze.default.createElement($n,null))},$n=()=>{let{Prompt:e}=I(),t=V(),{warnWhen:r,setWarnWhen:a}=xt(),o=n=>(n.preventDefault(),n.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),n.returnValue);return(0,ze.useEffect)(()=>(r&&window.addEventListener("beforeunload",o),window.removeEventListener("beforeunload",o)),[r]),ze.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:a})},Le=F(y("react")),Un=({children:e,fallback:t,loading:r})=>{let{isSuccess:a,isLoading:o,isError:n}=pr(),{replace:i}=ne(),{useLocation:u}=I(),{pathname:v,search:c}=u();if(o)return Le.default.createElement(Le.default.Fragment,null,r)||null;if(n){if(!t){let g=`${v}${c}`;return v.includes("/login")||i(`/login?to=${encodeURIComponent(g)}`),null}return Le.default.createElement(Le.default.Fragment,null,t)}return a?Le.default.createElement(Le.default.Fragment,null,e):null},lr=y("react"),Ir=()=>{let{useLocation:e}=I(),{checkAuth:t}=(0,lr.useContext)(X),r=e();return(0,lr.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},$e=F(y("react")),kn=({resource:e,action:t,params:r,fallback:a,children:o,...n})=>{let{data:i}=Or({resource:e,action:t,params:r});return i!=null&&i.can?$e.default.isValidElement(o)?$e.default.cloneElement(o,n):$e.default.createElement($e.default.Fragment,null,o):(i==null?void 0:i.can)===!1?$e.default.createElement($e.default.Fragment,null,a!=null?a:null):null}});var qt=y("react"),Kr=y("react-hook-form"),rt=Ut(wt()),He=({refineCoreProps:e,warnWhenUnsavedChanges:t,...r}={})=>{let{warnWhenUnsavedChanges:a,setWarnWhen:o}=(0,rt.useWarnAboutChange)(),n=t!=null?t:a,i=(0,rt.useForm)({...e}),{queryResult:u,onFinish:v,formLoading:c}=i,g=(0,Kr.useForm)({...r}),{watch:m,reset:l,getValues:s,handleSubmit:d}=g;(0,qt.useEffect)(()=>{var h;if(typeof(u==null?void 0:u.data)<"u"){let C={},b=Object.keys(s());Object.entries(((h=u==null?void 0:u.data)==null?void 0:h.data)||{}).forEach(([P,S])=>{b.includes(P)&&(C[P]=S)}),l(C)}},[u==null?void 0:u.data]),(0,qt.useEffect)(()=>{let h=m((C,{type:b})=>{b==="change"&&f(C)});return()=>h.unsubscribe()},[m]);let f=h=>(n&&o(!0),h),E=(h,C)=>async b=>(o(!1),await d(h,C)(b));return{...g,handleSubmit:E,refineCore:i,saveButtonProps:{disabled:c,onClick:h=>{E(v,()=>!1)(h)}}}};var at=y("react");var Rn=({stepsProps:e,...t}={})=>{let{defaultStep:r=0,isBackValidate:a=!1}=e!=null?e:{},[o,n]=(0,at.useState)(r),i=He({...t}),{trigger:u,getValues:v,reset:c,formState:{dirtyFields:g},refineCore:{queryResult:m}}=i;(0,at.useEffect)(()=>{var d;if(m!=null&&m.data){let f={},E=Object.keys(v());Object.entries((d=m==null?void 0:m.data)==null?void 0:d.data).forEach(([p,h])=>{E.includes(p)&&(g[p]?f[p]=v(p):f[p]=h)}),c(f,{keepDirty:!0,keepValues:!0})}},[m==null?void 0:m.data,o]);let l=d=>{let f=d;d<0&&(f=0),n(f)};return{...i,steps:{currentStep:o,gotoStep:async d=>{if(d===o)return;if(d<o&&!a){l(d);return}await u()&&l(d)}}}};var Mt=y("react"),de=Ut(wt());var An=({modalProps:e,refineCoreProps:t,...r}={})=>{let a=(0,de.useTranslate)(),{resource:o,action:n}=t!=null?t:{},{defaultVisible:i=!1,autoSubmitClose:u=!0,autoResetForm:v=!0}=e!=null?e:{},c=He({refineCoreProps:t,...r}),{reset:g,refineCore:{onFinish:m,setId:l},saveButtonProps:s,handleSubmit:d}=c,{visible:f,show:E,close:p}=(0,de.useModal)({defaultVisible:i}),h=async T=>{await m(T),u&&p(),v&&g()},{resourceName:C}=(0,de.useResource)({resourceNameOrRouteName:o}),{warnWhen:b,setWarnWhen:P}=(0,de.useWarnAboutChange)(),S=(0,Mt.useCallback)(()=>{if(b)if(window.confirm(a("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes.")))P(!1);else return;l==null||l(void 0),p()},[b]),D=(0,Mt.useCallback)(T=>{l==null||l(T),E()},[]),x=a(`${C}.titles.${n}`,void 0,`${(0,de.userFriendlyResourceName)(`${n} ${C}`,"singular")}`);return{modal:{submit:h,close:S,show:D,visible:f,title:x},...c,saveButtonProps:{...s,onClick:T=>d(h)(T)}}};var le=y("react-hook-form");})();
//# sourceMappingURL=index.js.map