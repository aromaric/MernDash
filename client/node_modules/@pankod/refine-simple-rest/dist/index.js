var j=Object.create;var y=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,A=Object.prototype.hasOwnProperty;var z=(r,t)=>{for(var e in t)y(r,e,{get:t[e],enumerable:!0})},S=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of E(t))!A.call(r,a)&&a!==e&&y(r,a,{get:()=>t[a],enumerable:!(o=I(t,a))||o.enumerable});return r};var D=(r,t,e)=>(e=r!=null?j(M(r)):{},S(t||!r||!r.__esModule?y(e,"default",{value:r,enumerable:!0}):e,r)),H=r=>S(y({},"__esModule",{value:!0}),r);var R={};z(R,{axiosInstance:()=>x,default:()=>Q,generateFilter:()=>$,generateSort:()=>g,mapOperator:()=>l,stringify:()=>q.stringify});module.exports=H(R);var q=require("query-string");var d=require("query-string");var l=r=>{switch(r){case"ne":case"gte":case"lte":return`_${r}`;case"contains":return"_like";case"eq":default:return""}};var g=r=>{if(r&&r.length>0){let t=[],e=[];return r.map(o=>{t.push(o.field),e.push(o.order)}),{_sort:t,_order:e}}};var $=r=>{let t={};return r&&r.map(e=>{if(e.operator==="or"||e.operator==="and")throw new Error(`[@pankod/refine-simple-rest]: \`operator: ${e.operator}\` is not supported. You can create custom data provider. https://refine.dev/docs/api-reference/core/providers/data-provider/#creating-a-data-provider`);if("field"in e){let{field:o,operator:a,value:s}=e;if(o==="q"){t[o]=s;return}let n=l(a);t[`${o}${n}`]=s}}),t};var F=D(require("axios")),x=F.default.create();x.interceptors.response.use(r=>r,r=>{var e,o,a;let t={...r,message:(o=(e=r.response)==null?void 0:e.data)==null?void 0:o.message,statusCode:(a=r.response)==null?void 0:a.status};return Promise.reject(t)});var k=(r,t=x)=>({getList:async({resource:e,hasPagination:o=!0,pagination:a={current:1,pageSize:10},filters:s,sort:n})=>{let _=`${r}/${e}`,{current:m=1,pageSize:c=10}=a!=null?a:{},u=$(s),f=o?{_start:(m-1)*c,_end:m*c}:{},i=g(n);if(i){let{_sort:P,_order:b}=i;f._sort=P.join(","),f._order=b.join(",")}let{data:w,headers:v}=await t.get(`${_}?${(0,d.stringify)(f)}&${(0,d.stringify)(u)}`),O=+v["x-total-count"];return{data:w,total:O}},getMany:async({resource:e,ids:o})=>{let{data:a}=await t.get(`${r}/${e}?${(0,d.stringify)({id:o})}`);return{data:a}},create:async({resource:e,variables:o})=>{let a=`${r}/${e}`,{data:s}=await t.post(a,o);return{data:s}},update:async({resource:e,id:o,variables:a})=>{let s=`${r}/${e}/${o}`,{data:n}=await t.patch(s,a);return{data:n}},getOne:async({resource:e,id:o})=>{let a=`${r}/${e}/${o}`,{data:s}=await t.get(a);return{data:s}},deleteOne:async({resource:e,id:o,variables:a})=>{let s=`${r}/${e}/${o}`,{data:n}=await t.delete(s,{data:a});return{data:n}},getApiUrl:()=>r,custom:async({url:e,method:o,filters:a,sort:s,payload:n,query:_,headers:m})=>{let c=`${e}?`;if(s){let i=g(s);if(i){let{_sort:w,_order:v}=i,O={_sort:w.join(","),_order:v.join(",")};c=`${c}&${(0,d.stringify)(O)}`}}if(a){let i=$(a);c=`${c}&${(0,d.stringify)(i)}`}_&&(c=`${c}&${(0,d.stringify)(_)}`),m&&(t.defaults.headers={...t.defaults.headers,...m});let u;switch(o){case"put":case"post":case"patch":u=await t[o](e,n);break;case"delete":u=await t.delete(e,{data:n});break;default:u=await t.get(c);break}let{data:f}=u;return Promise.resolve({data:f})}});var Q=k;
//# sourceMappingURL=index.js.map