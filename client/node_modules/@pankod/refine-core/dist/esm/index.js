export*from"@tanstack/react-query";import Ze,{useEffect as la,useState as da}from"react";import{useContext as Xr}from"react";import qt from"react";import{useQueryClient as Jr}from"@tanstack/react-query";var H=qt.createContext({}),Yt=({children:e,isProvided:t,...r})=>{let{replace:o}=q(),s=Jr(),a=()=>{s.invalidateQueries(["useAuthenticated"]),s.invalidateQueries(["getUserIdentity"]),s.invalidateQueries(["usePermissions"])},n=async l=>{var y;try{let R=await((y=r.login)==null?void 0:y.call(r,l));return a(),Promise.resolve(R)}catch(R){return Promise.reject(R)}},m=async l=>{var y;try{let R=await((y=r.register)==null?void 0:y.call(r,l));return a(),Promise.resolve(R)}catch(R){return Promise.reject(R)}},g=async l=>{var y;try{let R=await((y=r.logout)==null?void 0:y.call(r,l));return a(),Promise.resolve(R)}catch(R){return Promise.reject(R)}},u=async l=>{var y;try{return await((y=r.checkAuth)==null?void 0:y.call(r,l)),Promise.resolve()}catch(R){return R!=null&&R.redirectPath&&o(R.redirectPath),Promise.reject(R)}};return qt.createElement(H.Provider,{value:{...r,login:n,logout:g,checkAuth:u,register:m,isProvided:t}},e)};import{useQuery as eo}from"@tanstack/react-query";var to=e=>{let{getPermissions:t}=Xr(H);return eo(["usePermissions"],t!=null?t:()=>Promise.resolve(void 0),{enabled:!!t,...e})};import ro from"react";import{useQuery as oo}from"@tanstack/react-query";var Tt=({queryOptions:e}={})=>{let{getUserIdentity:t}=ro.useContext(H);return oo(["getUserIdentity"],t!=null?t:()=>Promise.resolve({}),{enabled:!!t,retry:!1,...e})};import so from"react";import{useMutation as ao}from"@tanstack/react-query";var Ct=({mutationOptions:e}={})=>{let{push:t}=q(),{logout:r}=so.useContext(H),{open:o}=te();return ao(["useLogout"],r,{onSuccess:(a,n)=>{var g;let m=(g=n==null?void 0:n.redirectPath)!=null?g:a;if(m!==!1){if(m){t(m);return}t("/login")}},onError:a=>{o==null||o({key:"useLogout-error",type:"error",message:(a==null?void 0:a.name)||"Logout Error",description:(a==null?void 0:a.message)||"Something went wrong during logout"})},...e})};import no from"react";import{useMutation as io}from"@tanstack/react-query";import uo from"qs";var $e=({mutationOptions:e}={})=>{let{replace:t}=q(),{login:r}=no.useContext(H),{useLocation:o}=w(),{search:s}=o(),{close:a,open:n}=te(),{to:m}=uo.parse(s,{ignoreQueryPrefix:!0});return io(["useLogin"],r,{onSuccess:u=>{if(m)return t(m);u!==!1&&t(typeof u=="string"?u:"/"),a==null||a("login-error")},onError:u=>{n==null||n({message:(u==null?void 0:u.name)||"Login Error",description:(u==null?void 0:u.message)||"Invalid credentials",key:"login-error",type:"error"})},...e})};import co from"react";import{useMutation as po}from"@tanstack/react-query";var gt=({mutationOptions:e}={})=>{let{replace:t}=q(),{register:r}=co.useContext(H),{close:o,open:s}=te();return po(["useRegister"],r,{onSuccess:n=>{n!==!1&&t(n||"/"),o==null||o("register-error")},onError:n=>{s==null||s({message:(n==null?void 0:n.name)||"Register Error",description:(n==null?void 0:n.message)||"Error while registering",key:"register-error",type:"error"})},...e})};import lo from"react";import{useMutation as mo}from"@tanstack/react-query";var xt=({mutationOptions:e}={})=>{let{replace:t}=q(),{forgotPassword:r}=lo.useContext(H),{close:o,open:s}=te();return mo(["useForgotPassword"],r,{onSuccess:n=>{n!==!1&&n&&t(n),o==null||o("forgot-password-error")},onError:n=>{s==null||s({message:(n==null?void 0:n.name)||"Forgot Password Error",description:(n==null?void 0:n.message)||"Error while resetting password",key:"forgot-password-error",type:"error"})},...e})};import fo from"react";import{useMutation as yo}from"@tanstack/react-query";import To from"qs";var Rt=({mutationOptions:e}={})=>{let{replace:t}=q(),{updatePassword:r}=fo.useContext(H),{close:o,open:s}=te(),{useLocation:a}=w(),{search:n}=a(),m=To.parse(n,{ignoreQueryPrefix:!0});return yo(["useUpdatePassword"],async u=>r==null?void 0:r({...m,...u}),{onSuccess:u=>{u!==!1&&u&&t(u),o==null||o("update-password-error")},onError:u=>{s==null||s({message:(u==null?void 0:u.name)||"Update Password Error",description:(u==null?void 0:u.message)||"Error while updating password",key:"update-password-error",type:"error"})},...e})};import{useContext as Co}from"react";import{useQuery as go}from"@tanstack/react-query";var Pt=e=>{let{checkAuth:t}=Co(H);return go(["useAuthenticated",e],async()=>{var o;return(o=await(t==null?void 0:t(e)))!=null?o:{}},{retry:!1})};import xo from"react";import{useMutation as Ro}from"@tanstack/react-query";var W=()=>{let{checkError:e}=xo.useContext(H),{mutate:t}=Ct();return Ro(["useCheckError"],e,{onError:o=>{t({redirectPath:o})}})};import{useContext as Po}from"react";var bo=()=>{let{isProvided:e}=Po(H);return e||!1};import{useQuery as wo}from"@tanstack/react-query";var Oe=e=>e/1e3;import Do from"lodash/zip";import vo from"lodash/fromPairs";var rt=(e,t=r=>r)=>{let[r,...o]=e;return o.map(s=>vo(Do(r,s))).map((s,a,n)=>t.call(void 0,s,a,n))};import tr from"pluralize";import bt from"qs";import Zt from"lodash/unionWith";import Jt from"lodash/differenceWith";import ho from"warn-once";var ot=e=>{let{current:t,pageSize:r,sorter:o,filters:s}=bt.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:o!=null?o:[],parsedFilters:s!=null?s:[]}},Eo=e=>{let t=bt.stringify(e);return ot(`/${t}`)},st=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:o,filters:s,...a}=e;return bt.stringify({...a,...r||{},sorter:o,filters:s},t)},Xt=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,er=(e,t)=>e.field==t.field,we=(e,t,r=[])=>(t.filter(s=>(s.operator==="or"||s.operator==="and")&&!s.key).length>1&&ho(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),Zt(e,t,r,Xt).filter(s=>s.value!==void 0&&s.value!==null&&(s.operator!=="or"||s.operator==="or"&&s.value.length!==0)&&(s.operator!=="and"||s.operator==="and"&&s.value.length!==0))),at=(e,t)=>Zt(e,t,er).filter(r=>r.order!==void 0&&r.order!==null),nt=(e,t)=>[...Jt(t,e,Xt),...e],it=(e,t)=>[...Jt(t,e,er),...e],Mo=(e,t)=>{if(!t)return;let r=t.find(o=>o.field===e);if(r)return r.order},Uo=(e,t,r="eq")=>{let o=t==null?void 0:t.find(s=>{if(s.operator!=="or"&&s.operator!=="and"&&"field"in s){let{operator:a,field:n}=s;return n===e&&a===r}});if(o)return o.value||[]};var So=e=>new Promise((t,r)=>{let o=new FileReader,s=()=>{o.result&&(o.removeEventListener("load",s,!1),t(o.result))};o.addEventListener("load",s,!1),o.readAsDataURL(e.originFileObj),o.onerror=a=>(o.removeEventListener("load",s,!1),r(a))});var Qe=(e="",t)=>{let r=Pe(e);return t==="singular"?tr.singular(r):tr.plural(r)};var rr=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e;var F=(e,t,r)=>{let o=t||"default",s={all:[o],resourceAll:[o,e||""],list:a=>[...s.resourceAll,"list",{...a,...r}],many:a=>[...s.resourceAll,"getMany",a&&a.map(String),{...r}].filter(n=>n!==void 0),detail:a=>[...s.resourceAll,"detail",a==null?void 0:a.toString(),{...r}],logList:a=>["logList",e,a,r].filter(n=>n!==void 0)};return s};var Dt=(e,t)=>!e||!t?!1:!!e.find(r=>r===t);var Io=e=>t=>e.parentName?t.name===e.parentName:!1,We=(e,t)=>{var s,a,n,m,g;let r,o=(a=(s=e.options)==null?void 0:s.route)!=null?a:e.name;if(e.parentName){let u=t.find(Io(e));u!=null&&u.parentName?r=`${We(u,t)}/${o}`:e.parentName&&(r=`${(g=(m=(n=u==null?void 0:u.options)==null?void 0:n.route)!=null?m:u==null?void 0:u.name)!=null?g:e.parentName}/${o}`)}else r=o;return r};var ut=e=>{var n,m,g;let t=[],r={},o={},s,a;for(let u=0;u<e.length;u++){s=e[u];let l=(g=(m=s.route)!=null?m:(n=s.options)==null?void 0:n.route)!=null?g:"";r[l]=s,r[l].children=[],o[s.name]=s,o[s.name].children=[]}for(let u in r)r.hasOwnProperty(u)&&(a=r[u],a.parentName&&o[a.parentName]?o[a.parentName].children.push(a):t.push(a));return t};var Pe=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e);import or from"react";import Lo from"react";var vt=({children:e})=>Lo.createElement("div",null,e);var Ce={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},ee=or.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:vt,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:Ce}),sr=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,undoableTimeout:s,children:a,DashboardPage:n,Title:m,Layout:g=vt,Header:u,Sider:l,Footer:y,OffLayoutArea:R,LoginPage:f=ht,catchAll:d,liveMode:p="off",onLiveEvent:c,options:i})=>or.createElement(ee.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,Title:m,undoableTimeout:s,Layout:g,Header:u,Sider:l,Footer:y,OffLayoutArea:R,DashboardPage:n,LoginPage:f,catchAll:d,liveMode:p,onLiveEvent:c,options:i}},a);var Et=({options:e,disableTelemetry:t,liveMode:r,mutationMode:o,reactQueryClientConfig:s,reactQueryDevtoolConfig:a,syncWithLocation:n,undoableTimeout:m,warnWhenUnsavedChanges:g}={})=>{var R,f,d,p,c,i,C,T,x,P,b,v,D,h,S,V,Q,L,U,A,I,Z,oe,ce;let u={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(f=(R=e==null?void 0:e.mutationMode)!=null?R:o)!=null?f:Ce.mutationMode,undoableTimeout:(p=(d=e==null?void 0:e.undoableTimeout)!=null?d:m)!=null?p:Ce.undoableTimeout,syncWithLocation:(i=(c=e==null?void 0:e.syncWithLocation)!=null?c:n)!=null?i:Ce.syncWithLocation,warnWhenUnsavedChanges:(T=(C=e==null?void 0:e.warnWhenUnsavedChanges)!=null?C:g)!=null?T:Ce.warnWhenUnsavedChanges,liveMode:(P=(x=e==null?void 0:e.liveMode)!=null?x:r)!=null?P:Ce.liveMode,redirect:{afterCreate:(v=(b=e==null?void 0:e.redirect)==null?void 0:b.afterCreate)!=null?v:Ce.redirect.afterCreate,afterClone:(h=(D=e==null?void 0:e.redirect)==null?void 0:D.afterClone)!=null?h:Ce.redirect.afterClone,afterEdit:(V=(S=e==null?void 0:e.redirect)==null?void 0:S.afterEdit)!=null?V:Ce.redirect.afterEdit}},l=(L=(Q=e==null?void 0:e.disableTelemetry)!=null?Q:t)!=null?L:!1,y={clientConfig:(I=(A=(U=e==null?void 0:e.reactQuery)==null?void 0:U.clientConfig)!=null?A:s)!=null?I:{},devtoolConfig:(ce=(oe=(Z=e==null?void 0:e.reactQuery)==null?void 0:Z.devtoolConfig)!=null?oe:a)!=null?ce:{}};return{optionsWithDefaults:u,disableTelemetryWithDefault:l,reactQueryWithDefaults:y}};var Mt=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit}};var ct=async(e,t,r)=>{let o=[];for(let[s,a]of e.entries())try{let n=await a();o.push(t(n,s))}catch(n){o.push(r(n,s))}return o};var E=(e,t,r)=>{var s;if(t)return t;let o=r==null?void 0:r.find(a=>a.name===e);return(s=o==null?void 0:o.options)!=null&&s.dataProviderName?o.options.dataProviderName:"default"};var xe=async e=>({data:(await Promise.all(e)).map(t=>t.data)});var pt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let o=(t==null?void 0:t.current)||1,s=(t==null?void 0:t.pageSize)||10,a=Math.ceil((e.total||0)/s);return o<a?Number(o)+1:void 0},lt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let o=(t==null?void 0:t.current)||1;return o===1?void 0:o-1};var Ke=({resource:e,config:t,queryOptions:r,successNotification:o,errorNotification:s,metaData:a,liveMode:n,onLiveEvent:m,liveParams:g,dataProviderName:u})=>{let{resources:l}=B(),y=k(),R=F(e,E(e,u,l),a),{getList:f}=y(E(e,u,l)),d=M(),{mutate:p}=W(),c=$(),i=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return be({resource:e,types:["*"],params:{metaData:a,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...g},channel:`resources/${e}`,enabled:i,liveMode:n,onLiveEvent:m}),wo(R.list(t),({queryKey:T,pageParam:x,signal:P})=>{let{hasPagination:b,...v}=t||{};return f({resource:e,...v,hasPagination:b,metaData:{...a,queryContext:{queryKey:T,pageParam:x,signal:P}}})},{...r,onSuccess:T=>{var P;(P=r==null?void 0:r.onSuccess)==null||P.call(r,T);let x=typeof o=="function"?o(T,{metaData:a,config:t},e):o;c(x)},onError:T=>{var P;p(T),(P=r==null?void 0:r.onError)==null||P.call(r,T);let x=typeof s=="function"?s(T,{metaData:a,config:t},e):s;c(x,{key:`${e}-useList-notification`,message:d("notifications.error",{statusCode:T.statusCode},`Error (status code: ${T.statusCode})`),description:T.message,type:"error"})}})};import{useQuery as Qo}from"@tanstack/react-query";var Ge=({resource:e,id:t,queryOptions:r,successNotification:o,errorNotification:s,metaData:a,liveMode:n,onLiveEvent:m,liveParams:g,dataProviderName:u})=>{let{resources:l}=B(),y=k(),R=F(e,E(e,u,l),a),{getOne:f}=y(E(e,u,l)),d=M(),{mutate:p}=W(),c=$();return be({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,metaData:a,subscriptionType:"useOne",...g},enabled:r==null?void 0:r.enabled,liveMode:n,onLiveEvent:m}),Qo(R.detail(t),({queryKey:C,pageParam:T,signal:x})=>f({resource:e,id:t,metaData:{...a,queryContext:{queryKey:C,pageParam:T,signal:x}}}),{...r,onSuccess:C=>{var x;(x=r==null?void 0:r.onSuccess)==null||x.call(r,C);let T=typeof o=="function"?o(C,{id:t,metaData:a},e):o;c(T)},onError:C=>{var x;p(C),(x=r==null?void 0:r.onError)==null||x.call(r,C);let T=typeof s=="function"?s(C,{id:t,metaData:a},e):s;c(T,{key:`${t}-${e}-getOne-notification`,message:d("notifications.error",{statusCode:C.statusCode},`Error (status code: ${C.statusCode})`),description:C.message,type:"error"})}})};import{useQuery as Ao}from"@tanstack/react-query";var Ut=({resource:e,ids:t,queryOptions:r,successNotification:o,errorNotification:s,metaData:a,liveMode:n,onLiveEvent:m,liveParams:g,dataProviderName:u})=>{let{resources:l}=B(),y=k(),R=F(e,E(e,u,l),a),{getMany:f,getOne:d}=y(E(e,u,l)),p=M(),{mutate:c}=W(),i=$(),C=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return be({resource:e,types:["*"],params:{ids:t!=null?t:[],metaData:a,subscriptionType:"useMany",...g},channel:`resources/${e}`,enabled:C,liveMode:n,onLiveEvent:m}),Ao(R.many(t),({queryKey:x,pageParam:P,signal:b})=>f?f({resource:e,ids:t,metaData:{...a,queryContext:{queryKey:x,pageParam:P,signal:b}}}):xe(t.map(v=>d({resource:e,id:v,metaData:{...a,queryContext:{queryKey:x,pageParam:P,signal:b}}}))),{...r,onSuccess:x=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,x);let P=typeof o=="function"?o(x,t,e):o;i(P)},onError:x=>{var b;c(x),(b=r==null?void 0:r.onError)==null||b.call(r,x);let P=typeof s=="function"?s(x,t,e):s;i(P,{key:`${t[0]}-${e}-getMany-notification`,message:p("notifications.error",{statusCode:x.statusCode},`Error (status code: ${x.statusCode})`),description:x.message,type:"error"})}})};import{useMutation as ko,useQueryClient as Ho}from"@tanstack/react-query";import It,{useReducer as Vo}from"react";import St from"lodash-es/isEqual";var dt=It.createContext({notifications:[],notificationDispatch:()=>!1}),Bo=[],No=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(o=>!(St(o.id,t.payload.id)&&o.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(o=>!(St(o.id,t.payload.id)&&o.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(o=>St(o.id,t.payload.id)&&o.resource==t.payload.resource?{...o,seconds:t.payload.seconds-1e3}:o);default:return e}},Lt=({children:e})=>{let[t,r]=Vo(No,Bo),o={notifications:t,notificationDispatch:r};return It.createElement(dt.Provider,{value:o},e,typeof window<"u"&&t.map(s=>It.createElement(ar,{key:`${s.id}-${s.resource}-queue`,notification:s})))};import nr from"pluralize";var wt=({mutationOptions:e}={})=>{let{resources:t}=B(),r=Ho(),o=k(),{mutationMode:s,undoableTimeout:a}=le(),n=M(),{mutate:m}=W(),g=ne(),{log:u}=Ve(),{notificationDispatch:l}=ge(),y=$(),R=ie();return ko(({id:d,values:p,resource:c,mutationMode:i,undoableTimeout:C,onCancel:T,metaData:x,dataProviderName:P})=>{let b=i!=null?i:s,v=C!=null?C:a;return b!=="undoable"?o(E(c,P,t)).update({resource:c,id:d,variables:p,metaData:x}):new Promise((h,S)=>{let V=()=>{o(E(c,P,t)).update({resource:c,id:d,variables:p,metaData:x}).then(L=>h(L)).catch(L=>S(L))},Q=()=>{S({message:"mutationCancelled"})};T&&T(Q),l({type:"ADD",payload:{id:d,resource:c,cancelMutation:Q,doMutation:V,seconds:v,isSilent:!!T}})})},{onMutate:async({resource:d,id:p,mutationMode:c,values:i,dataProviderName:C})=>{let T=F(d,E(d,C,t)),x=r.getQueriesData(T.resourceAll),P=c!=null?c:s;return await r.cancelQueries(T.resourceAll,void 0,{silent:!0}),P!=="pessimistic"&&(r.setQueriesData(T.list(),b=>{if(!b)return null;let v=b.data.map(D=>{var h;return((h=D.id)==null?void 0:h.toString())===(p==null?void 0:p.toString())?{id:p,...i}:D});return{...b,data:v}}),r.setQueriesData(T.many(),b=>{if(!b)return null;let v=b.data.map(D=>{var h;return((h=D.id)==null?void 0:h.toString())===(p==null?void 0:p.toString())&&(D={id:p,...i}),D});return{...b,data:v}}),r.setQueriesData(T.detail(p),b=>b?{...b,data:{...b.data,...i}}:null)),{previousQueries:x,queryKey:T}},onSettled:(d,p,{id:c,resource:i,dataProviderName:C,invalidates:T=["list","many","detail"]})=>{R({resource:i,dataProviderName:E(i,C,t),invalidates:T,id:c}),l({type:"REMOVE",payload:{id:c,resource:i}})},onSuccess:(d,{id:p,resource:c,successNotification:i,dataProviderName:C,values:T,metaData:x},P)=>{var L;let b=nr.singular(c),v=typeof i=="function"?i(d,{id:p,values:T},c):i;y(v,{key:`${p}-${c}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${c}.${c}`,b)},`Successfully updated ${b}`),type:"success"}),g==null||g({channel:`resources/${c}`,type:"updated",payload:{ids:(L=d.data)!=null&&L.id?[d.data.id]:void 0},date:new Date});let D;if(P){let U=r.getQueryData(P.queryKey.detail(p));D=Object.keys(T).reduce((A,I)=>{var Z;return A[I]=(Z=U==null?void 0:U.data)==null?void 0:Z[I],A},{})}let{fields:h,operation:S,variables:V,...Q}=x||{};u==null||u.mutate({action:"update",resource:c,data:T,previousData:D,meta:{id:p,dataProviderName:E(c,C,t),...Q}})},onError:(d,{id:p,resource:c,errorNotification:i,values:C},T)=>{if(T)for(let x of T.previousQueries)r.setQueryData(x[0],x[1]);if(d.message!=="mutationCancelled"){m==null||m(d);let x=nr.singular(c),P=typeof i=="function"?i(d,{id:p,values:C},c):i;y(P,{key:`${p}-${c}-notification`,message:n("notifications.editError",{resource:n(`${c}.${c}`,x),statusCode:d.statusCode},`Error when updating ${x} (status code: ${d.statusCode})`),description:d.message,type:"error"})}},...e})};import{useMutation as Fo}from"@tanstack/react-query";import ir from"pluralize";var ze=({mutationOptions:e}={})=>{let{mutate:t}=W(),r=k(),o=ie(),{resources:s}=B(),a=M(),n=ne(),{log:m}=Ve(),g=$();return Fo(({resource:l,values:y,metaData:R,dataProviderName:f})=>r(E(l,f,s)).create({resource:l,variables:y,metaData:R}),{onSuccess:(l,{resource:y,successNotification:R,dataProviderName:f,invalidates:d=["list","many"],values:p,metaData:c})=>{var v,D,h;let i=ir.singular(y),C=typeof R=="function"?R(l,p,y):R;g(C,{key:`create-${y}-notification`,message:a("notifications.createSuccess",{resource:a(`${y}.${y}`,i)},`Successfully created ${i}`),description:a("notifications.success","Success"),type:"success"}),o({resource:y,dataProviderName:E(y,f,s),invalidates:d}),n==null||n({channel:`resources/${y}`,type:"created",payload:{ids:(v=l==null?void 0:l.data)!=null&&v.id?[l.data.id]:void 0},date:new Date});let{fields:T,operation:x,variables:P,...b}=c||{};m==null||m.mutate({action:"create",resource:y,data:p,meta:{dataProviderName:E(y,f,s),id:(h=(D=l==null?void 0:l.data)==null?void 0:D.id)!=null?h:void 0,...b}})},onError:(l,{resource:y,errorNotification:R,values:f})=>{t(l);let d=ir.singular(y),p=typeof R=="function"?R(l,f,y):R;g(p,{key:`create-${y}-notification`,description:l.message,message:a("notifications.createError",{resource:a(`${y}.${y}`,d),statusCode:l.statusCode},`There was an error creating ${d} (status code: ${l.statusCode})`),type:"error"})},...e})};import{useQueryClient as $o,useMutation as Oo}from"@tanstack/react-query";import ur from"pluralize";var Wo=({mutationOptions:e}={})=>{let{mutate:t}=W(),r=k(),{resources:o}=B(),s=$o(),{mutationMode:a,undoableTimeout:n}=le(),{notificationDispatch:m}=ge(),g=M(),u=ne(),{log:l}=Ve(),y=$(),R=ie();return Oo(({id:d,mutationMode:p,undoableTimeout:c,resource:i,onCancel:C,metaData:T,dataProviderName:x,values:P})=>{let b=p!=null?p:a,v=c!=null?c:n;return b!=="undoable"?r(E(i,x,o)).deleteOne({resource:i,id:d,metaData:T,variables:P}):new Promise((h,S)=>{let V=()=>{r(E(i,x,o)).deleteOne({resource:i,id:d,metaData:T,variables:P}).then(L=>h(L)).catch(L=>S(L))},Q=()=>{S({message:"mutationCancelled"})};C&&C(Q),m({type:"ADD",payload:{id:d,resource:i,cancelMutation:Q,doMutation:V,seconds:v,isSilent:!!C}})})},{onMutate:async({id:d,resource:p,mutationMode:c,dataProviderName:i})=>{let C=F(p,E(p,i,o)),T=c!=null?c:a;await s.cancelQueries(C.resourceAll,void 0,{silent:!0});let x=s.getQueriesData(C.resourceAll);return T!=="pessimistic"&&(s.setQueriesData(C.list(),P=>P?{data:P.data.filter(v=>{var D;return((D=v.id)==null?void 0:D.toString())!==d.toString()}),total:P.total-1}:null),s.setQueriesData(C.many(),P=>{if(!P)return null;let b=P.data.filter(v=>{var D;return((D=v.id)==null?void 0:D.toString())!==(d==null?void 0:d.toString())});return{...P,data:b}})),{previousQueries:x,queryKey:C}},onSettled:(d,p,{id:c,resource:i,dataProviderName:C,invalidates:T=["list","many"]})=>{R({resource:i,dataProviderName:E(i,C,o),invalidates:T}),m({type:"REMOVE",payload:{id:c,resource:i}})},onSuccess:(d,{id:p,resource:c,successNotification:i,dataProviderName:C,metaData:T},x)=>{let P=ur.singular(c!=null?c:"");s.removeQueries(x==null?void 0:x.queryKey.detail(p));let b=typeof i=="function"?i(d,p,c):i;y(b,{key:`${p}-${c}-notification`,description:g("notifications.success","Success"),message:g("notifications.deleteSuccess",{resource:g(`${c}.${c}`,P)},`Successfully deleted a ${P}`),type:"success"}),u==null||u({channel:`resources/${c}`,type:"deleted",payload:{ids:p?[p]:[]},date:new Date});let{fields:v,operation:D,variables:h,...S}=T||{};l==null||l.mutate({action:"delete",resource:c,meta:{id:p,dataProviderName:E(c,C,o),...S}}),s.removeQueries(x==null?void 0:x.queryKey.detail(p))},onError:(d,{id:p,resource:c,errorNotification:i},C)=>{if(C)for(let T of C.previousQueries)s.setQueryData(T[0],T[1]);if(d.message!=="mutationCancelled"){t(d);let T=ur.singular(c!=null?c:""),x=typeof i=="function"?i(d,p,c):i;y(x,{key:`${p}-${c}-notification`,message:g("notifications.deleteError",{resource:T,statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}},...e})};import{useMutation as Ko}from"@tanstack/react-query";import Go from"pluralize";var Qt=({mutationOptions:e}={})=>{let t=k(),{resources:r}=B(),o=M(),s=ne(),a=$(),n=ie();return Ko(({resource:g,values:u,metaData:l,dataProviderName:y})=>{let R=t(E(g,y,r));return R.createMany?R.createMany({resource:g,variables:u,metaData:l}):xe(u.map(f=>R.create({resource:g,variables:f,metaData:l})))},{onSuccess:(g,{resource:u,successNotification:l,dataProviderName:y,invalidates:R=["list","many"],values:f})=>{let d=Go.plural(u),p=typeof l=="function"?l(g,f,u):l;a(p,{key:`createMany-${u}-notification`,message:o("notifications.createSuccess",{resource:o(`${u}.${u}`,u)},`Successfully created ${d}`),description:o("notifications.success","Success"),type:"success"}),n({resource:u,dataProviderName:E(u,y,r),invalidates:R});let c=g==null?void 0:g.data.filter(i=>(i==null?void 0:i.id)!==void 0).map(i=>i.id);s==null||s({channel:`resources/${u}`,type:"created",payload:{ids:c},date:new Date})},onError:(g,{resource:u,errorNotification:l,values:y})=>{let R=typeof l=="function"?l(g,y,u):l;a(R,{key:`createMany-${u}-notification`,description:g.message,message:o("notifications.createError",{resource:o(`${u}.${u}`,u),statusCode:g.statusCode},`There was an error creating ${u} (status code: ${g.statusCode}`),type:"error"})},...e})};import{useMutation as zo,useQueryClient as _o}from"@tanstack/react-query";import cr from"pluralize";var jo=({mutationOptions:e}={})=>{let{resources:t}=B(),r=_o(),o=k(),s=M(),{mutationMode:a,undoableTimeout:n}=le(),{mutate:m}=W(),{notificationDispatch:g}=ge(),u=ne(),l=$(),y=ie();return zo(({ids:f,values:d,resource:p,onCancel:c,mutationMode:i,undoableTimeout:C,metaData:T,dataProviderName:x})=>{let P=i!=null?i:a,b=C!=null?C:n,v=o(E(p,x,t)),D=()=>v.updateMany?v.updateMany({resource:p,ids:f,variables:d,metaData:T}):xe(f.map(S=>v.update({resource:p,id:S,variables:d,metaData:T})));return P!=="undoable"?D():new Promise((S,V)=>{let Q=()=>{D().then(U=>S(U)).catch(U=>V(U))},L=()=>{V({message:"mutationCancelled"})};c&&c(L),g({type:"ADD",payload:{id:f,resource:p,cancelMutation:L,doMutation:Q,seconds:b,isSilent:!!c}})})},{onMutate:async({resource:f,ids:d,values:p,mutationMode:c,dataProviderName:i,metaData:C})=>{let T=F(f,E(f,i,t),C),x=c!=null?c:a;await r.cancelQueries(T.resourceAll,void 0,{silent:!0});let P=r.getQueriesData(T.resourceAll);if(x!=="pessimistic"){r.setQueriesData(T.list(),b=>{if(!b)return null;let v=b.data.map(D=>D.id!==void 0&&d.filter(h=>h!==void 0).map(String).includes(D.id.toString())?{...D,...p}:D);return{...b,data:v}}),r.setQueriesData(T.many(),b=>{if(!b)return null;let v=b.data.map(D=>D.id!==void 0&&d.filter(h=>h!==void 0).map(String).includes(D.id.toString())?{...D,...p}:D);return{...b,data:v}});for(let b of d)r.setQueriesData(T.detail(b),v=>{if(!v)return null;let D={...v.data,...p};return{...v,data:D}})}return{previousQueries:P,queryKey:T}},onSettled:(f,d,{ids:p,resource:c,dataProviderName:i})=>{y({resource:c,invalidates:["list","many"],dataProviderName:E(c,i,t)}),p.forEach(C=>y({resource:c,invalidates:["detail"],dataProviderName:E(c,i,t),id:C})),g({type:"REMOVE",payload:{id:p,resource:c}})},onSuccess:(f,{ids:d,resource:p,successNotification:c,values:i})=>{let C=cr.singular(p),T=typeof c=="function"?c(f,{ids:d,values:i},p):c;l(T,{key:`${d}-${p}-notification`,description:s("notifications.success","Successful"),message:s("notifications.editSuccess",{resource:s(`${p}.${p}`,p)},`Successfully updated ${C}`),type:"success"}),u==null||u({channel:`resources/${p}`,type:"updated",payload:{ids:d.map(String)},date:new Date})},onError:(f,{ids:d,resource:p,errorNotification:c,values:i},C)=>{if(C)for(let T of C.previousQueries)r.setQueryData(T[0],T[1]);if(f.message!=="mutationCancelled"){m==null||m(f);let T=cr.singular(p),x=typeof c=="function"?c(f,{ids:d,values:i},p):c;l(x,{key:`${d}-${p}-updateMany-error-notification`,message:s("notifications.editError",{resource:T,statusCode:f.statusCode},`Error when updating ${T} (status code: ${f.statusCode})`),description:f.message,type:"error"})}},...e})};import{useQueryClient as qo,useMutation as Yo}from"@tanstack/react-query";import Zo from"pluralize";var Jo=({mutationOptions:e}={})=>{let{mutate:t}=W(),{mutationMode:r,undoableTimeout:o}=le(),s=k(),{notificationDispatch:a}=ge(),n=M(),m=ne(),g=$(),u=ie(),{resources:l}=B(),y=qo();return Yo(({resource:f,ids:d,mutationMode:p,undoableTimeout:c,onCancel:i,metaData:C,dataProviderName:T,values:x})=>{let P=p!=null?p:r,b=c!=null?c:o,v=s(E(f,T,l)),D=()=>v.deleteMany?v.deleteMany({resource:f,ids:d,metaData:C,variables:x}):xe(d.map(S=>v.deleteOne({resource:f,id:S,metaData:C,variables:x})));return P!=="undoable"?D():new Promise((S,V)=>{let Q=()=>{D().then(U=>S(U)).catch(U=>V(U))},L=()=>{V({message:"mutationCancelled"})};i&&i(L),a({type:"ADD",payload:{id:d,resource:f,cancelMutation:L,doMutation:Q,seconds:b,isSilent:!!i}})})},{onMutate:async({ids:f,resource:d,mutationMode:p,dataProviderName:c})=>{let i=F(d,E(d,c,l)),C=p!=null?p:r;await y.cancelQueries(i.resourceAll,void 0,{silent:!0});let T=y.getQueriesData(i.resourceAll);if(C!=="pessimistic"){y.setQueriesData(i.list(),x=>x?{data:x.data.filter(b=>b.id&&!f.map(String).includes(b.id.toString())),total:x.total-1}:null),y.setQueriesData(i.many(),x=>{if(!x)return null;let P=x.data.filter(b=>b.id?!f.map(String).includes(b.id.toString()):!1);return{...x,data:P}});for(let x of f)y.setQueriesData(i.detail(x),P=>!P||P.data.id==x?null:{...P})}return{previousQueries:T,queryKey:i}},onSettled:(f,d,{resource:p,ids:c,dataProviderName:i,invalidates:C=["list","many"]})=>{u({resource:p,dataProviderName:E(p,i,l),invalidates:C}),a({type:"REMOVE",payload:{id:c,resource:p}})},onSuccess:(f,{ids:d,resource:p,successNotification:c},i)=>{d.forEach(T=>y.removeQueries(i==null?void 0:i.queryKey.detail(T)));let C=typeof c=="function"?c(f,d,p):c;g(C,{key:`${d}-${p}-notification`,description:n("notifications.success","Success"),message:n("notifications.deleteSuccess",{resource:n(`${p}.${p}`,p)},`Successfully deleted ${p}`),type:"success"}),m==null||m({channel:`resources/${p}`,type:"deleted",payload:{ids:d},date:new Date}),d.forEach(T=>y.removeQueries(i==null?void 0:i.queryKey.detail(T)))},onError:(f,{ids:d,resource:p,errorNotification:c},i)=>{if(i)for(let C of i.previousQueries)y.setQueryData(C[0],C[1]);if(f.message!=="mutationCancelled"){t(f);let C=Zo.singular(p),T=typeof c=="function"?c(f,d,p):c;g(T,{key:`${d}-${p}-notification`,message:n("notifications.deleteError",{resource:C,statusCode:f.statusCode},`Error (status code: ${f.statusCode})`),description:f.message,type:"error"})}},...e})};var Xo=e=>{let t=k(),{getApiUrl:r}=t(e);return r()};import{useQuery as es}from"@tanstack/react-query";var ts=({url:e,method:t,config:r,queryOptions:o,successNotification:s,errorNotification:a,metaData:n,dataProviderName:m})=>{let g=k(),{custom:u}=g(m),{mutate:l}=W(),y=M(),R=$();if(u)return es([m,"custom",t,e,{...r,...n}],({queryKey:d,pageParam:p,signal:c})=>u({url:e,method:t,...r,metaData:{...n,queryContext:{queryKey:d,pageParam:p,signal:c}}}),{...o,onSuccess:d=>{var c;(c=o==null?void 0:o.onSuccess)==null||c.call(o,d);let p=typeof s=="function"?s(d,{...r,...n}):s;R(p)},onError:d=>{var c;l(d),(c=o==null?void 0:o.onError)==null||c.call(o,d);let p=typeof a=="function"?a(d,{...r,...n}):a;R(p,{key:`${t}-notification`,message:y("notifications.error",{statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}});throw Error("Not implemented custom on data provider.")};import{useMutation as rs}from"@tanstack/react-query";var os=({mutationOptions:e}={})=>{let{mutate:t}=W(),r=$(),o=k(),s=M();return rs(({url:n,method:m,values:g,metaData:u,dataProviderName:l,config:y})=>{let{custom:R}=o(l);if(R)return R({url:n,method:m,payload:g,metaData:u,headers:{...y==null?void 0:y.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(n,{successNotification:m,config:g,metaData:u})=>{let l=typeof m=="function"?m(n,{...g,...u}):m;r(l)},onError:(n,{errorNotification:m,method:g,config:u,metaData:l})=>{t(n);let y=typeof m=="function"?m(n,{...u,...l}):m;r(y,{key:`${g}-notification`,message:s("notifications.error",{statusCode:n.statusCode},`Error (status code: ${n.statusCode})`),description:n.message,type:"error"})},...e})};import{useCallback as as,useContext as ns}from"react";import pr from"react";var ss=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),_e=pr.createContext(ss()),lr=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},pr.createElement(_e.Provider,{value:r},e)};var k=()=>{let e=ns(_e);return as(r=>{if(r){if(!e[r])throw new Error(`"${r}" Data provider not found`);return e[r]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])};import{useInfiniteQuery as is}from"@tanstack/react-query";var us=({resource:e,config:t,queryOptions:r,successNotification:o,errorNotification:s,metaData:a,liveMode:n,onLiveEvent:m,liveParams:g,dataProviderName:u})=>{let{resources:l}=B(),y=k(),R=F(e,E(e,u,l),a),{getList:f}=y(E(e,u,l)),d=M(),{mutate:p}=W(),c=$(),i=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return be({resource:e,types:["*"],params:{metaData:a,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...g},channel:`resources/${e}`,enabled:i,liveMode:n,onLiveEvent:m}),is(R.list(t),({queryKey:T,pageParam:x,signal:P})=>{let{hasPagination:b,...v}=t||{},D={...t==null?void 0:t.pagination,current:x};return f({resource:e,...v,pagination:D,hasPagination:b,metaData:{...a,queryContext:{queryKey:T,pageParam:x,signal:P}}}).then(({data:h,total:S,...V})=>({data:h,total:S,pagination:D,...V}))},{getNextPageParam:T=>pt(T),getPreviousPageParam:T=>lt(T),...r,onSuccess:T=>{var P;(P=r==null?void 0:r.onSuccess)==null||P.call(r,T);let x=typeof o=="function"?o(T,{metaData:a,config:t},e):o;c(x)},onError:T=>{var P;p(T),(P=r==null?void 0:r.onError)==null||P.call(r,T);let x=typeof s=="function"?s(T,{metaData:a,config:t},e):s;c(x,{key:`${e}-useInfiniteList-notification`,message:d("notifications.error",{statusCode:T.statusCode},`Error (status code: ${T.statusCode})`),description:T.message,type:"error"})}})};import{useContext as fr,useEffect as cs}from"react";import{useQueryClient as ps}from"@tanstack/react-query";import dr from"react";var Re=dr.createContext(void 0),mr=({liveProvider:e,children:t})=>dr.createElement(Re.Provider,{value:e},t);var be=({resource:e,params:t,channel:r,types:o,enabled:s=!0,liveMode:a,onLiveEvent:n})=>{let m=ps(),g=F(e),u=fr(Re),{liveMode:l,onLiveEvent:y}=fr(ee),R=a!=null?a:l;cs(()=>{let f;return R&&R!=="off"&&s&&(f=u==null?void 0:u.subscribe({channel:r,params:{resource:e,...t},types:o,callback:d=>{R==="auto"&&m.invalidateQueries(g.resourceAll),n==null||n(d),y==null||y(d)}})),()=>{f&&(u==null||u.unsubscribe(f))}},[s])};import{useContext as ls}from"react";var yr=e=>{let{liveMode:t}=ls(ee);return e!=null?e:t};import{useContext as ds,useEffect as ms}from"react";var hp=({params:e,channel:t,types:r=["*"],enabled:o=!0,onLiveEvent:s})=>{let a=ds(Re);ms(()=>{let n;return o&&(n=a==null?void 0:a.subscribe({channel:t,params:e,types:r,callback:s})),()=>{n&&(a==null||a.unsubscribe(n))}},[o])};import{useContext as fs}from"react";var ne=()=>{let e=fs(Re);return e==null?void 0:e.publish};import{useContext as ys}from"react";import Tr from"react";var Ue=Tr.createContext({resources:[]}),Cr=({resources:e,children:t})=>Tr.createElement(Ue.Provider,{value:{resources:e}},t);var B=({resourceName:e,resourceNameOrRouteName:t,recordItemId:r}={})=>{let{resources:o}=ys(Ue),s=J(),{useParams:a}=w(),n=a(),m=s(t!=null?t:n.resource),g=e!=null?e:m.name,u=r!=null?r:n.id;return{resources:o,resource:m,resourceName:g,id:u,action:n.action}};import{useContext as Ts,useCallback as Cs}from"react";var J=()=>{let{resources:e}=Ts(Ue);return Cs(r=>{let o=e.find(s=>s.route===r);if(!o){let s=e.find(a=>a.name===r);return s!=null?s:{name:r,route:r}}return o},[e])};import{useContext as gs}from"react";var ge=()=>{let{notifications:e,notificationDispatch:t}=gs(dt);return{notifications:e,notificationDispatch:t}};import{useContext as Ps}from"react";import xs,{createContext as Rs}from"react";var je=Rs({}),gr=({open:e,close:t,children:r})=>xs.createElement(je.Provider,{value:{open:e,close:t}},r);var te=()=>{let{open:e,close:t}=Ps(je);return{open:e,close:t}};import{useCallback as bs}from"react";var $=()=>{let{open:e}=te();return bs((r,o)=>{r!==!1&&(r?e==null||e(r):o&&(e==null||e(o)))},[])};import{useCallback as Ds,useContext as vs}from"react";import xr from"react";var de=xr.createContext({}),Rr=({children:e,i18nProvider:t})=>xr.createElement(de.Provider,{value:{i18nProvider:t}},e);var hs=()=>{let{i18nProvider:e}=vs(de);return Ds(t=>e==null?void 0:e.changeLocale(t),[])};import{useContext as Es,useMemo as Ms}from"react";var M=()=>{let{i18nProvider:e}=Es(de);return Ms(()=>{function r(o,s,a){var n,m;return(m=(n=e==null?void 0:e.translate(o,s,a))!=null?n:a)!=null?m:typeof s=="string"&&typeof a>"u"?s:o}return r},[e])};import{useContext as Us,useCallback as Ss}from"react";var Is=()=>{let{i18nProvider:e}=Us(de);return Ss(()=>e==null?void 0:e.getLocale(),[])};import{useContext as Ls}from"react";var le=()=>{let{mutationMode:e,undoableTimeout:t}=Ls(ee);return{mutationMode:e,undoableTimeout:t}};import{useContext as Dr}from"react";import Pr,{useState as ws}from"react";var At=Pr.createContext({}),br=({children:e})=>{let[t,r]=ws(!1);return Pr.createElement(At.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)};var qe=()=>{let{warnWhenUnsavedChanges:e}=Dr(ee),{warnWhen:t,setWarnWhen:r}=Dr(At);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}};import{useContext as Qs}from"react";var Vt=()=>{let{syncWithLocation:e}=Qs(ee);return{syncWithLocation:e}};import{useContext as As}from"react";var Vs=()=>{let{Title:e}=As(ee);return e};import{useContext as Bs}from"react";var Se=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:s,Title:a,hasDashboard:n,mutationMode:m,syncWithLocation:g,undoableTimeout:u,warnWhenUnsavedChanges:l,DashboardPage:y,LoginPage:R,catchAll:f,options:d}=Bs(ee);return{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:s,Title:a,hasDashboard:n,mutationMode:m,syncWithLocation:g,undoableTimeout:u,warnWhenUnsavedChanges:l,DashboardPage:y,LoginPage:R,catchAll:f,options:d}};import{useState as Ns}from"react";import{ExportToCsv as ks}from"export-to-csv-fix-source-map";var ad=({resourceName:e,sorter:t,filters:r,maxItemCount:o,pageSize:s=20,mapData:a=l=>l,exportOptions:n,metaData:m,dataProviderName:g,onError:u}={})=>{let[l,y]=Ns(!1),{resources:R}=B(),f=J(),d=k(),{useParams:p}=w(),{resource:c}=p(),{name:i}=f(c);e&&(i=e);let C=`${Qe(i,"plural")}-${new Date().toLocaleString()}`,{getList:T}=d(E(i,g,R));return{isLoading:l,triggerExport:async()=>{y(!0);let P=[],b=1,v=!0;for(;v;)try{let{data:h,total:S}=await T({resource:i,filters:r,sort:t,pagination:{current:b,pageSize:s},metaData:m});b++,P.push(...h),o&&P.length>=o&&(P=P.slice(0,o),v=!1),S===P.length&&(v=!1)}catch(h){y(!1),v=!1,u==null||u(h);return}new ks({filename:C,useKeysAsHeaders:!0,...n}).generateCsv(P.map(a)),y(!1)}}};import vr from"react";var dd=({resource:e,action:t,id:r,onMutationSuccess:o,onMutationError:s,redirect:a,successNotification:n,errorNotification:m,metaData:g,mutationMode:u,liveMode:l,onLiveEvent:y,liveParams:R,undoableTimeout:f,dataProviderName:d,invalidates:p,queryOptions:c,createMutationOptions:i,updateMutationOptions:C}={})=>{var tt;let{options:T}=Se(),{useParams:x}=w(),{resource:P,action:b,id:v}=x(),D=!e||e===P?r!=null?r:v:r,[h,S]=vr.useState(D);vr.useEffect(()=>{D!==h&&S(r)},[r]);let V=e!=null?e:P,Q=(tt=t!=null?t:b==="show"?"create":b)!=null?tt:"create",U=J()(V),{mutationMode:A}=le(),I=u!=null?u:A,Z=Q==="create",oe=Q==="edit",ce=Q==="clone",K=Mt({redirectFromProps:a,action:Q,redirectOptions:T.redirect}),j=h!==void 0&&(oe||ce),pe=Ge({resource:U.name,id:h!=null?h:"",queryOptions:{enabled:j,...c},liveMode:l,onLiveEvent:y,liveParams:R,metaData:g,dataProviderName:d}),{isFetching:O}=pe,fe=ze({mutationOptions:i}),{mutate:ve,isLoading:Je}=fe,ye=wt({mutationOptions:C}),{mutate:Xe,isLoading:yt}=ye,{setWarnWhen:et}=qe(),he=hr();return{...Z||ce?{formLoading:O||Je,mutationResult:fe,onFinish:async se=>{et(!1);let N=G=>{he({redirect:K,resource:U,id:G})};return I!=="pessimistic"&&setTimeout(()=>{N()}),new Promise((G,Ee)=>(I!=="pessimistic"&&G(),ve({values:se,resource:U.name,successNotification:n,errorNotification:m,metaData:g,dataProviderName:d,invalidates:p},{onSuccess:(ae,Te,Me)=>{var jt;o&&o(ae,se,Me);let Fe=(jt=ae==null?void 0:ae.data)==null?void 0:jt.id;N(Fe),G(ae)},onError:(ae,Te,Me)=>{if(s)return s(ae,se,Me);Ee()}})))}}:{formLoading:O||yt,mutationResult:ye,onFinish:async se=>{et(!1);let N={id:h!=null?h:"",values:se,resource:U.name,mutationMode:I,undoableTimeout:f,successNotification:n,errorNotification:m,metaData:g,dataProviderName:d,invalidates:p},G=()=>{S(D),he({redirect:K,resource:U,id:h})};return I!=="pessimistic"&&setTimeout(()=>{G()}),new Promise((Ee,ae)=>(I!=="pessimistic"&&Ee(),setTimeout(()=>{Xe(N,{onSuccess:(Te,Me,Fe)=>{o&&o(Te,se,Fe),I==="pessimistic"&&G(),Ee(Te)},onError:(Te,Me,Fe)=>{if(s)return s(Te,se,Fe);ae()}})})))}},queryResult:pe,id:h,setId:S,redirect:(se,N)=>{he({redirect:se!==void 0?se:oe?"list":"edit",resource:U,id:N!=null?N:h})}}};import{useCallback as Hs}from"react";var hr=()=>{let{show:e,edit:t,list:r,create:o}=q();return Hs(({redirect:a,resource:n,id:m})=>{if(a&&n.route)return n.canShow&&a==="show"&&m?e(n.route,m):n.canEdit&&a==="edit"&&m?t(n.route,m):n.canCreate&&a==="create"?o(n.route):r(n.route,"push")},[])};var q=()=>{let{useHistory:e}=w(),t=e(),r=J(),o=(i,C="push")=>{C==="push"?t.push(i):t.replace(i)},s=i=>`/${r(i).route}/create`,a=(i,C)=>{let T=r(i),x=encodeURIComponent(C);return`/${T.route}/edit/${x}`},n=(i,C)=>{let T=r(i),x=encodeURIComponent(C);return`/${T.route}/clone/${x}`},m=(i,C)=>{let T=r(i),x=encodeURIComponent(C);return`/${T.route}/show/${x}`},g=i=>`/${r(i).route}`;return{create:(i,C="push")=>{o(s(i),C)},createUrl:s,edit:(i,C,T="push")=>{o(a(i,C),T)},editUrl:a,clone:(i,C,T="push")=>{o(n(i,C),T)},cloneUrl:n,show:(i,C,T="push")=>{o(m(i,C),T)},showUrl:m,list:(i,C="push")=>{o(g(i),C)},listUrl:g,push:(i,...C)=>{t.push(i,...C)},replace:(i,...C)=>{t.replace(i,...C)},goBack:()=>{t.goBack()}}};import Fs,{useState as $s}from"react";var Dd=({resource:e,id:t,successNotification:r,errorNotification:o,metaData:s,liveMode:a,onLiveEvent:n,dataProviderName:m,queryOptions:g}={})=>{let{useParams:u}=w(),{resource:l,id:y}=u(),R=!e||e===l?t!=null?t:y:t,[f,d]=$s(R);Fs.useEffect(()=>{R!==f&&d(R)},[R]);let c=J()(e!=null?e:l);return{queryResult:Ge({resource:c.name,id:f!=null?f:"",queryOptions:{enabled:f!==void 0,...g},successNotification:r,errorNotification:o,metaData:s,liveMode:a,onLiveEvent:n,dataProviderName:m}),showId:f,setShowId:d}};import{useEffect as Os,useState as Bt}from"react";import{parse as Ws}from"papaparse";import Ks from"lodash-es/chunk";var Qd=({resourceName:e,mapData:t=g=>g,paparseOptions:r,batchSize:o=Number.MAX_SAFE_INTEGER,onFinish:s,metaData:a,onProgress:n,dataProviderName:m}={})=>{let[g,u]=Bt(0),[l,y]=Bt(0),[R,f]=Bt(!1),d=J(),{useParams:p}=w(),{resource:c}=p(),{name:i}=d(e!=null?e:c),C=Qt(),T=ze(),x;o===1?x=T:x=C;let P=()=>{y(0),u(0),f(!1)},b=D=>{let h={succeeded:D.filter(S=>S.type==="success"),errored:D.filter(S=>S.type==="error")};s==null||s(h),f(!1)};Os(()=>{n==null||n({totalAmount:l,processedAmount:g})},[l,g]);let v=({file:D})=>(P(),new Promise(h=>{f(!0),Ws(D,{complete:async({data:S})=>{let V=rt(S,t);if(y(V.length),o===1){let Q=V.map(U=>async()=>({response:await T.mutateAsync({resource:i,values:U,successNotification:!1,errorNotification:!1,dataProviderName:m,metaData:a}),value:U})),L=await ct(Q,({response:U,value:A})=>(u(I=>I+1),{response:[U.data],type:"success",request:[A]}),(U,A)=>({response:[U],type:"error",request:[V[A]]}));h(L)}else{let Q=Ks(V,o),L=Q.map(A=>async()=>({response:await C.mutateAsync({resource:i,values:A,successNotification:!1,errorNotification:!1,dataProviderName:m,metaData:a}),value:A,currentBatchLength:A.length})),U=await ct(L,({response:A,currentBatchLength:I,value:Z})=>(u(oe=>oe+I),{response:A.data,type:"success",request:Z}),(A,I)=>({response:[A],type:"error",request:Q[I]}));h(U)}},...r})}).then(h=>(b(h),h)));return{inputProps:{type:"file",accept:".csv",onChange:D=>{D.target.files&&D.target.files.length>0&&v({file:D.target.files[0]})}},mutationResult:x,isLoading:R,handleChange:v}};import{useCallback as Er,useState as Gs}from"react";var Bd=({defaultVisible:e=!1}={})=>{let[t,r]=Gs(e),o=Er(()=>r(!0),[t]),s=Er(()=>r(!1),[t]);return{visible:t,show:o,close:s}};import{useContext as _s}from"react";import Mr from"react";var zs={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Ye=Mr.createContext(zs),Ur=({children:e,useHistory:t,useLocation:r,useParams:o,Prompt:s,Link:a,routes:n})=>Mr.createElement(Ye.Provider,{value:{useHistory:t,useLocation:r,useParams:o,Prompt:s,Link:a,routes:n}},e);var w=()=>{let{useHistory:e,useLocation:t,useParams:r,Prompt:o,Link:s,routes:a}=_s(Ye);return{useHistory:e,useLocation:t,useParams:r,Prompt:o,Link:s,routes:a}};import{useContext as js}from"react";import{useQuery as qs}from"@tanstack/react-query";import Sr from"react";var Ie=Sr.createContext({}),Ir=({can:e,children:t})=>Sr.createElement(Ie.Provider,{value:{can:e}},t);var Lr=({action:e,resource:t,params:r,queryOptions:o})=>{let{can:s}=js(Ie),{resource:a,...n}=r!=null?r:{},{icon:m,list:g,edit:u,create:l,show:y,children:R,...f}=a!=null?a:{},d=qs(["useCan",{action:e,resource:t,params:{...n,resource:f},enabled:o==null?void 0:o.enabled}],()=>{var p;return(p=s==null?void 0:s({action:e,resource:t,params:r}))!=null?p:Promise.resolve({can:!0})},{enabled:typeof s<"u",...o,retry:!1});return typeof s>"u"?{data:{can:!0}}:d};import{useContext as Ys}from"react";var om=()=>{let{can:e}=Ys(Ie);return{can:e}};import{useCallback as wr,useMemo as Zs,useState as Nt}from"react";import Js from"lodash/uniqBy";import Xs from"lodash/debounce";import mt from"lodash/get";var mm=e=>{var oe,ce;let[t,r]=Nt([]),[o,s]=Nt([]),[a,n]=Nt([]),{resource:m,sort:g,filters:u=[],optionLabel:l="title",optionValue:y="id",debounce:R=300,successNotification:f,errorNotification:d,defaultValueQueryOptions:p,queryOptions:c,fetchSize:i,pagination:C,hasPagination:T,liveMode:x,defaultValue:P=[],onLiveEvent:b,onSearch:v,liveParams:D,metaData:h,dataProviderName:S}=e,V=Array.isArray(P)?P:[P],Q=wr(K=>{n(K.data.map(j=>({label:mt(j,l),value:mt(j,y)})))},[l,y]),L=p!=null?p:c,U=Ut({resource:m,ids:V,queryOptions:{...L,enabled:V.length>0&&((oe=p==null?void 0:p.enabled)!=null?oe:!0),onSuccess:K=>{var j;Q(K),(j=L==null?void 0:L.onSuccess)==null||j.call(L,K)}},metaData:h,liveMode:"off",dataProviderName:S}),A=wr(K=>{s(K.data.map(j=>({label:mt(j,l),value:mt(j,y)})))},[l,y]),I=Ke({resource:m,config:{sort:g,filters:u.concat(t),pagination:{current:C==null?void 0:C.current,pageSize:(ce=C==null?void 0:C.pageSize)!=null?ce:i},hasPagination:T},queryOptions:{...c,onSuccess:K=>{var j;A(K),(j=c==null?void 0:c.onSuccess)==null||j.call(c,K)}},successNotification:f,errorNotification:d,metaData:h,liveMode:x,liveParams:D,onLiveEvent:b,dataProviderName:S}),Z=K=>{if(v){r(v(K));return}if(K)r([{field:l,operator:"contains",value:K}]);else{r([]);return}};return{queryResult:I,defaultValueQueryResult:U,options:Zs(()=>Js([...o,...a],"value"),[o,a]),onSearch:Xs(Z,R)}};import{useMemo as ea,useState as ft,useEffect as Qr}from"react";import Ar from"qs";import Vr from"lodash/differenceWith";import Br from"lodash/isEqual";var ta=[],ra=[];function bm({initialCurrent:e=1,initialPageSize:t=10,hasPagination:r=!0,initialSorter:o,permanentSorter:s=ra,defaultSetFilterBehavior:a="merge",initialFilter:n,permanentFilter:m=ta,syncWithLocation:g,resource:u,successNotification:l,errorNotification:y,queryOptions:R,liveMode:f,onLiveEvent:d,liveParams:p,metaData:c,dataProviderName:i}={}){var se;let{syncWithLocation:C}=Vt(),T=g!=null?g:C,{useLocation:x,useParams:P}=w(),{search:b,pathname:v}=x(),D=yr(f),{parsedCurrent:h,parsedPageSize:S,parsedSorter:V,parsedFilters:Q}=ot(b),L=h||e,U=S||t,A=V.length?V:o,I=Q.length?Q:n,{resource:Z}=P(),{replace:oe}=q(),K=J()(u!=null?u:Z),[j,pe]=ft(it(s,A!=null?A:[])),[O,fe]=ft(nt(m,I!=null?I:[])),[ve,Je]=ft(L),[ye,Xe]=ft(U),yt=({pagination:{current:N,pageSize:G},sorter:Ee,filters:ae})=>{let Te=Ar.parse(b==null?void 0:b.substring(1)),Me=st({pagination:{pageSize:G,current:N},sorter:Ee,filters:ae,...Te});return`${v}?${Me}`};Qr(()=>{b===""&&(Je(L),Xe(U),pe(it(s,A!=null?A:[])),fe(nt(m,I!=null?I:[])))},[b]);let et=()=>{let{sorter:N,filters:G,pageSize:Ee,current:ae,...Te}=Ar.parse(b,{ignoreQueryPrefix:!0});return Te};Qr(()=>{if(T){let N=et(),G=st({...r?{pagination:{pageSize:ye,current:ve}}:{},sorter:Vr(j,s,Br),filters:Vr(O,m,Br),...N});return oe(`${v}?${G}`,void 0,{shallow:!0})}},[T,ve,ye,j,O]);let he=Ke({resource:K.name,config:{hasPagination:r,pagination:{current:ve,pageSize:ye},filters:we(m,O),sort:at(s,j)},queryOptions:R,successNotification:l,errorNotification:y,metaData:c,liveMode:D,liveParams:p,onLiveEvent:d,dataProviderName:i}),Wt=N=>{fe(G=>we(m,N,G))},Kt=N=>{fe(we(m,N))},Gt=N=>{fe(G=>we(m,N(G)))},zt=(N,G=a)=>{typeof N=="function"?Gt(N):G==="replace"?Kt(N):Wt(N)},_t=N=>{pe(()=>at(s,N))},tt=ea(()=>{var N,G;return r?{current:ve,setCurrent:Je,pageSize:ye,setPageSize:Xe,pageCount:ye?Math.ceil(((G=(N=he.data)==null?void 0:N.total)!=null?G:0)/ye):1}:{current:void 0,setCurrent:void 0,pageSize:void 0,setPageSize:void 0,pageCount:void 0}},[r,ve,ye,(se=he.data)==null?void 0:se.total]);return{tableQueryResult:he,sorter:j,setSorter:_t,filters:O,setFilters:zt,...tt,createLinkForSyncWithLocation:yt}}import{useContext as Hr}from"react";import{useMutation as Fr,useQueryClient as oa}from"@tanstack/react-query";import Nr from"react";var Le=Nr.createContext({}),kr=({create:e,get:t,update:r,children:o})=>Nr.createElement(Le.Provider,{value:{create:e,get:t,update:r}},o);var Ve=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=oa(),o=Hr(Le),{resources:s}=Hr(Ue),{data:a,refetch:n,isLoading:m}=Tt({queryOptions:{enabled:!!o}}),g=Fr(async l=>{var d,p,c;let y=s.find(i=>i.name===l.resource),R=(p=(d=y==null?void 0:y.options)==null?void 0:d.auditLog)==null?void 0:p.permissions;if(R&&!Dt(R,l.action))return;let f;return m&&(f=await n()),await((c=o.create)==null?void 0:c.call(o,{...l,author:a!=null?a:f==null?void 0:f.data}))},e),u=Fr(async l=>{var y;return await((y=o.update)==null?void 0:y.call(o,l))},{onSuccess:l=>{if(l!=null&&l.resource){let y=F(l==null?void 0:l.resource);r.invalidateQueries(y.logList())}},...t});return{log:g,rename:u}};import{useContext as sa}from"react";import{useQuery as aa}from"@tanstack/react-query";var $m=({resource:e,action:t,meta:r,author:o,metaData:s,queryOptions:a})=>{let{get:n}=sa(Le),m=F(e,void 0,s);return aa(m.logList(r),()=>{var u;return(u=n==null?void 0:n({resource:e,action:t,author:o,meta:r,metaData:s}))!=null?u:Promise.resolve([])},{enabled:typeof n<"u",...a,retry:!1})};import{useCallback as na}from"react";import{useQueryClient as ia}from"@tanstack/react-query";var ie=()=>{let{resources:e}=B(),t=ia();return na(({resource:o,dataProviderName:s,invalidates:a,id:n})=>{if(a===!1)return;let m=F(o,E(o,s,e));a.forEach(g=>{switch(g){case"all":t.invalidateQueries(m.all);break;case"list":t.invalidateQueries(m.list());break;case"many":t.invalidateQueries(m.many());break;case"resourceAll":t.invalidateQueries(m.resourceAll);break;case"detail":t.invalidateQueries(m.detail(n||""));break;default:break}})},[])};import{useContext as ua}from"react";import ca from"warn-once";var of=()=>{var g;let{useParams:e}=w(),{i18nProvider:t}=ua(de),r=M(),{resources:o,resource:s}=B(),{action:a}=e(),n=[];if(!(s!=null&&s.name))return{breadcrumbs:n};let m=u=>{var y;let l=o.find(R=>R.name===u);l&&(l.parentName&&m(l.parentName),n.push({label:(y=l.label)!=null?y:r(`${l.name}.${l.name}`,Pe(l.name)),href:l.list?`/${l.route}`:void 0,icon:l.icon}))};if(s.parentName&&m(s.parentName),n.push({label:(g=s.label)!=null?g:r(`${s.name}.${s.name}`,Pe(s.name)),href:s.list?`/${s.route}`:void 0,icon:s.icon}),a){let u=`actions.${a}`,l=r(u);typeof t<"u"&&l===u?(ca(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${a}" action. Please add "actions.${a}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),n.push({label:r(`buttons.${a}`,Pe(a))})):n.push({label:r(u,Pe(a))})}return{breadcrumbs:n}};import Be from"react";var pa=()=>{let{resources:e}=B(),t=M(),{useLocation:r,useParams:o}=w(),s=r(),a=o(),{hasDashboard:n}=Se(),m=Be.useMemo(()=>{let f=e.find(p=>(s==null?void 0:s.pathname)===`/${p.route}`);f||(f=e.find(p=>(a==null?void 0:a.resource)===p.route));let d;return f!=null&&f.route?d=`/${f==null?void 0:f.route}`:s.pathname==="/"?d="/":d=s==null?void 0:s.pathname,d},[e,s,a]),g=Be.useMemo(()=>e.map(f=>{var p,c;let d=`/${f.route}`;return{...f,icon:f.icon,route:d,key:(p=f.key)!=null?p:d,label:(c=f.label)!=null?c:t(`${f.name}.${f.name}`,Qe(f.name,"plural"))}}),[e,n,t]),u=Be.useMemo(()=>ut(g),[g]),l=Be.useCallback((f,d,p=!1)=>{let c=d.find(i=>p?i.name===f:i.route===f);if(c){let i=[];return p&&c.route&&i.unshift(c.route),c.parentName&&i.unshift(...l(c.parentName,d,!0)),i}return[]},[]),y=Be.useMemo(()=>l(m,g),[m,g]);return Be.useMemo(()=>{let f=d=>d.reduce((p,c)=>{var i,C;return c.children.length>0&&((i=c.options)==null?void 0:i.hide)!==!0?[...p,{...c,children:f(c.children)}]:typeof c.list<"u"&&((C=c.options)==null?void 0:C.hide)!==!0?[...p,c]:p},[]);return{defaultOpenKeys:y,selectedKey:m,menuItems:f(u)}},[y,m,u])};var ma=()=>{let[e,t]=da(),{push:r}=q(),o=M(),s=["edit","create","show"],{useParams:a}=w(),n=a(),m=J();return la(()=>{if(n.resource){let g=m(n.resource);n.action&&s.includes(n.action)&&!g[n.action]&&t(o("pages.error.info",{action:n.action,resource:n.resource},`You may have forgotten to add the "${n.action}" component to "${n.resource}" resource.`))}},[n]),Ze.createElement(Ze.Fragment,null,Ze.createElement("h1",null,o("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&Ze.createElement("p",null,e),Ze.createElement("button",{onClick:()=>r("/")},o("pages.error.backHome",void 0,"Back Home")))};import X,{useState as $r}from"react";var ht=()=>{let[e,t]=$r(""),[r,o]=$r(""),s=M(),{mutate:a}=$e();return X.createElement(X.Fragment,null,X.createElement("h1",null,s("pages.login.title","Sign in your account")),X.createElement("form",{onSubmit:n=>{n.preventDefault(),a({username:e,password:r})}},X.createElement("table",null,X.createElement("tbody",null,X.createElement("tr",null,X.createElement("td",null,s("pages.login.username",void 0,"username"),":"),X.createElement("td",null,X.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:n=>t(n.target.value)}))),X.createElement("tr",null,X.createElement("td",null,s("pages.login.password",void 0,"password"),":"),X.createElement("td",null,X.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:n=>o(n.target.value)}))))),X.createElement("br",null),X.createElement("input",{type:"submit",value:"login"})))};import Ne from"react";import z,{useState as kt}from"react";var Or=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:o,contentProps:s,wrapperProps:a,renderContent:n,formProps:m})=>{let{Link:g}=w(),[u,l]=kt(""),[y,R]=kt(""),[f,d]=kt(!1),p=M(),{mutate:c}=$e(),i=(x,P)=>x?typeof x=="string"?z.createElement(g,{to:x},P):x:null,C=()=>e?e.map(x=>{var P;return z.createElement("div",{key:x.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},z.createElement("button",{onClick:()=>c({providerName:x.name}),style:{display:"flex",alignItems:"center"}},x==null?void 0:x.icon,(P=x.label)!=null?P:z.createElement("label",null,x.label)))}):null,T=z.createElement("div",{...s},z.createElement("h1",{style:{textAlign:"center"}},p("pages.login.title","Sign in to your account")),C(),z.createElement("hr",null),z.createElement("form",{onSubmit:x=>{x.preventDefault(),c({email:u,password:y,remember:f})},...m},z.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},z.createElement("label",null,p("pages.login.fields.email","Email")),z.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:u,onChange:x=>l(x.target.value)}),z.createElement("label",null,p("pages.login.fields.password","Password")),z.createElement("input",{type:"password",name:"password",required:!0,size:20,value:y,onChange:x=>R(x.target.value)}),o!=null?o:z.createElement(z.Fragment,null,z.createElement("label",null,p("pages.login.buttons.rememberMe","Remember me"),z.createElement("input",{name:"remember",type:"checkbox",size:20,checked:f,value:f.toString(),onChange:()=>{d(!f)}}))),z.createElement("br",null),r!=null?r:i("/forgot-password",p("pages.login.buttons.forgotPassword","Forgot password?")),z.createElement("input",{type:"submit",value:p("pages.login.signin","Sign in")}),t!=null?t:z.createElement("span",null,p("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",i("/register",p("pages.login.register","Sign up"))))));return z.createElement("div",{...a},n?n(T):T)};import Y,{useState as Wr}from"react";var Kr=({providers:e,loginLink:t,wrapperProps:r,contentProps:o,renderContent:s,formProps:a})=>{let{Link:n}=w(),[m,g]=Wr(""),[u,l]=Wr(""),y=M(),{mutate:R,isLoading:f}=gt(),d=(i,C)=>i?typeof i=="string"?Y.createElement(n,{to:i},C):i:null,p=()=>e?e.map(i=>{var C;return Y.createElement("div",{key:i.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},Y.createElement("button",{onClick:()=>R({providerName:i.name}),style:{display:"flex",alignItems:"center"}},i==null?void 0:i.icon,(C=i.label)!=null?C:Y.createElement("label",null,i.label)))}):null,c=Y.createElement("div",{...o},Y.createElement("h1",{style:{textAlign:"center"}},y("pages.register.title","Sign up for your account")),p(),Y.createElement("hr",null),Y.createElement("form",{onSubmit:i=>{i.preventDefault(),R({email:m,password:u})},...a},Y.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Y.createElement("label",null,y("pages.register.fields.email","Email")),Y.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:i=>g(i.target.value)}),Y.createElement("label",null,y("pages.register.fields.password","Password")),Y.createElement("input",{name:"password",type:"password",required:!0,size:20,value:u,onChange:i=>l(i.target.value)}),Y.createElement("input",{type:"submit",value:y("pages.register.buttons.submit","Sign up"),disabled:f}),t!=null?t:Y.createElement(Y.Fragment,null,Y.createElement("span",null,y("pages.login.buttons.haveAccount","Have an account?")," ",d("login",y("pages.login.signin","Sign in")))))));return Y.createElement("div",{...r},s?s(c):c)};import ue,{useState as fa}from"react";var Gr=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:o,formProps:s})=>{let a=M(),{Link:n}=w(),[m,g]=fa(""),{mutate:u,isLoading:l}=xt(),y=(f,d)=>f?typeof f=="string"?ue.createElement(n,{to:f},d):f:null,R=ue.createElement("div",{...r},ue.createElement("h1",{style:{textAlign:"center"}},a("pages.forgotPassword.title","Forgot your password?")),ue.createElement("hr",null),ue.createElement("form",{onSubmit:f=>{f.preventDefault(),u({email:m})},...s},ue.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ue.createElement("label",null,a("pages.forgotPassword.fields.email","Email")),ue.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:f=>g(f.target.value)}),ue.createElement("input",{type:"submit",disabled:l,value:a("pages.forgotPassword.buttons.submit","Send reset instructions")}),ue.createElement("br",null),e!=null?e:ue.createElement("span",null,a("pages.register.buttons.haveAccount","Have an account? ")," ",y("/login",a("pages.login.signin","Sign in"))))));return ue.createElement("div",{...t},o?o(R):R)};import me,{useState as zr}from"react";var _r=({wrapperProps:e,contentProps:t,renderContent:r,formProps:o})=>{let s=M(),{mutate:a,isLoading:n}=Rt(),[m,g]=zr(""),[u,l]=zr(""),y=me.createElement("div",{...t},me.createElement("h1",{style:{textAlign:"center"}},s("pages.updatePassword.title","Update Password")),me.createElement("hr",null),me.createElement("form",{onSubmit:R=>{R.preventDefault(),a({password:m,confirmPassword:u})},...o},me.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},me.createElement("label",null,s("pages.updatePassword.fields.password","New Password")),me.createElement("input",{name:"password",type:"password",required:!0,size:20,value:m,onChange:R=>g(R.target.value)}),me.createElement("label",null,s("pages.updatePassword.fields.confirmPassword","Confirm New Password")),me.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:u,onChange:R=>l(R.target.value)}),me.createElement("input",{type:"submit",disabled:n,value:s("pages.updatePassword.buttons.submit","Update")}))));return me.createElement("div",{...e},r?r(y):y)};var ya=e=>{let{type:t}=e;return Ne.createElement(Ne.Fragment,null,(()=>{switch(t){case"register":return Ne.createElement(Kr,{...e});case"forgotPassword":return Ne.createElement(Gr,{...e});case"updatePassword":return Ne.createElement(_r,{...e});default:return Ne.createElement(Or,{...e})}})())};import re from"react";var Ht=()=>re.createElement(re.Fragment,null,re.createElement("h1",null,"Welcome on board"),re.createElement("p",null,"Your configuration is completed."),re.createElement("p",null,"Now you can get started by adding your resources to the"," ",re.createElement("code",null,"`resources`")," property of ",re.createElement("code",null,"`<Refine>`")),re.createElement("div",{style:{display:"flex",gap:8}},re.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},re.createElement("button",null,"Documentation")),re.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},re.createElement("button",null,"Examples")),re.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},re.createElement("button",null,"Community"))));import _ from"react";import{QueryClientProvider as ba,QueryClient as Zr}from"@tanstack/react-query";import{ReactQueryDevtools as Da}from"@tanstack/react-query-devtools";import{useEffect as Ca}from"react";import{useContext as De}from"react";var Ta="3.99.4",jr=()=>{let e=De(H),t=De(Le),r=De(Re),o=De(Ye),s=De(_e),{i18nProvider:a}=De(de),n=De(je),m=De(Ie),{resources:g}=B(),u=e.isProvided,l=!!t.create||!!t.get||!!t.update,y=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),R=!!o.useHistory||!!o.Link||!!o.Prompt||!!o.useLocation||!!o.useParams,f=!!s,d=!!(a!=null&&a.changeLocale)||!!(a!=null&&a.getLocale)||!!(a!=null&&a.translate),p=!!n.close||!!n.open,c=!!m.can;return{providers:{auth:u,auditLog:l,live:y,router:R,data:f,i18n:d,notification:p,accessControl:c},version:Ta,resourceCount:g.length}};var ga=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},qr=()=>{let e=jr();return Ca(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${ga(e)}`},[]),null};import{useMemo as Pa}from"react";import{useRef as xa}from"react";import Ra from"lodash-es/isEqual";var Yr=e=>{let t=xa(e);return Ra(t.current,e)||(t.current=e),t.current};var Ft=(e,t)=>{let r=Yr(t);return Pa(e,r)};var va=({authProvider:e,dataProvider:t,routerProvider:r,notificationProvider:o,accessControlProvider:s,auditLogProvider:a,resources:n,DashboardPage:m,ReadyPage:g,LoginPage:u,catchAll:l,children:y,liveProvider:R,i18nProvider:f,mutationMode:d,syncWithLocation:p,warnWhenUnsavedChanges:c,undoableTimeout:i,Title:C,Layout:T,Sider:x,Header:P,Footer:b,OffLayoutArea:v,reactQueryClientConfig:D,reactQueryDevtoolConfig:h,liveMode:S,onLiveEvent:V,disableTelemetry:Q,options:L})=>{let{optionsWithDefaults:U,disableTelemetryWithDefault:A,reactQueryWithDefaults:I}=Et({options:L,disableTelemetry:Q,liveMode:S,mutationMode:d,reactQueryClientConfig:D,reactQueryDevtoolConfig:h,syncWithLocation:p,warnWhenUnsavedChanges:c,undoableTimeout:i}),Z=Ft(()=>{var pe;return I.clientConfig instanceof Zr?I.clientConfig:new Zr({...I.clientConfig,defaultOptions:{...I.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(pe=I.clientConfig.defaultOptions)==null?void 0:pe.queries}}})},[I.clientConfig]),ce=_.useMemo(()=>typeof o=="function"?o:()=>o!=null?o:{},[o])(),K=Ft(()=>{let pe=[];return n==null||n.forEach(O=>{var fe;pe.push({key:O.key,name:O.name,label:(fe=O.options)==null?void 0:fe.label,icon:O.icon,route:We(O,n),canCreate:!!O.create,canEdit:!!O.edit,canShow:!!O.show,canDelete:O.canDelete,create:O.create,show:O.show,list:O.list,edit:O.edit,options:O.options,parentName:O.parentName})}),pe},[n]);if(K.length===0)return g?_.createElement(g,null):_.createElement(Ht,null);let{RouterComponent:j=_.Fragment}=r;return _.createElement(ba,{client:Z},_.createElement(gr,{...ce},_.createElement(Yt,{...e!=null?e:{},isProvided:Boolean(e)},_.createElement(lr,{...t},_.createElement(mr,{liveProvider:R},_.createElement(Ur,{...r},_.createElement(Cr,{resources:K},_.createElement(Rr,{i18nProvider:f},_.createElement(Ir,{...s!=null?s:{}},_.createElement(kr,{...a!=null?a:{}},_.createElement(Lt,null,_.createElement(sr,{mutationMode:U.mutationMode,warnWhenUnsavedChanges:U.warnWhenUnsavedChanges,syncWithLocation:U.syncWithLocation,Title:C,undoableTimeout:U.undoableTimeout,catchAll:l,DashboardPage:m,LoginPage:u,Layout:T,Sider:x,Footer:b,Header:P,OffLayoutArea:v,hasDashboard:!!m,liveMode:U.liveMode,onLiveEvent:V,options:U},_.createElement(br,null,_.createElement(j,null,y,!A&&_.createElement(qr,null),_.createElement($t,null)))))))))))))),I.devtoolConfig===!1?null:_.createElement(Da,{initialIsOpen:!1,position:"bottom-right",...I.devtoolConfig}))};import{useEffect as ha,useState as Ea}from"react";var ar=({notification:e})=>{let t=M(),{notificationDispatch:r}=ge(),{open:o}=te(),[s,a]=Ea(),n=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||o==null||o({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:Oe(e.seconds)},`You have ${Oe(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:Oe(e.seconds)}),e.seconds>0)){s&&clearTimeout(s);let m=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);a(m)}};return ha(()=>{n()},[e]),null};import Ot,{useEffect as Ma}from"react";var Ua=({children:e,Layout:t,Sider:r,Header:o,Title:s,Footer:a,OffLayoutArea:n})=>{let{Layout:m,Footer:g,Header:u,Sider:l,Title:y,OffLayoutArea:R}=Se(),f=t!=null?t:m;return Ot.createElement(f,{Sider:r!=null?r:l,Header:o!=null?o:u,Footer:a!=null?a:g,Title:s!=null?s:y,OffLayoutArea:n!=null?n:R},e,Ot.createElement(Sa,null))},Sa=()=>{let{Prompt:e}=w(),t=M(),{warnWhen:r,setWarnWhen:o}=qe(),s=a=>(a.preventDefault(),a.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),a.returnValue);return Ma(()=>(r&&window.addEventListener("beforeunload",s),window.removeEventListener("beforeunload",s)),[r]),Ot.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:o})};import ke from"react";var Ia=({children:e,fallback:t,loading:r})=>{let{isSuccess:o,isLoading:s,isError:a}=Pt(),{replace:n}=q(),{useLocation:m}=w(),{pathname:g,search:u}=m();if(s)return ke.createElement(ke.Fragment,null,r)||null;if(a){if(!t){let l=`${g}${u}`;return g.includes("/login")||n(`/login?to=${encodeURIComponent(l)}`),null}return ke.createElement(ke.Fragment,null,t)}return o?ke.createElement(ke.Fragment,null,e):null};import{useContext as La,useEffect as wa}from"react";var $t=()=>{let{useLocation:e}=w(),{checkAuth:t}=La(H),r=e();return wa(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null};import He from"react";var Qa=({resource:e,action:t,params:r,fallback:o,children:s,...a})=>{let{data:n}=Lr({resource:e,action:t,params:r});return n!=null&&n.can?He.isValidElement(s)?He.cloneElement(s,a):He.createElement(He.Fragment,null,s):(n==null?void 0:n.can)===!1?He.createElement(He.Fragment,null,o!=null?o:null):null};export{ya as AuthPage,Ia as Authenticated,Qa as CanAccess,ma as ErrorComponent,Ua as LayoutWrapper,ht as LoginPage,Ht as ReadyPage,va as Refine,$t as RouteChangeHandler,ar as UndoableQueue,ut as createTreeView,So as file2Base64,Uo as getDefaultFilter,Mo as getDefaultSortOrder,pt as getNextPageParam,lt as getPreviousPageParam,rr as handleUseParams,rt as importCSVMapper,ot as parseTableParams,Eo as parseTableParamsFromQuery,We as routeGenerator,nt as setInitialFilters,it as setInitialSorters,st as stringifyTableParams,we as unionFilters,at as unionSorters,Xo as useApiUrl,Pt as useAuthenticated,of as useBreadcrumb,Lr as useCan,om as useCanWithoutCache,ge as useCancelNotification,W as useCheckError,ze as useCreate,Qt as useCreateMany,ts as useCustom,os as useCustomMutation,k as useDataProvider,Wo as useDelete,Jo as useDeleteMany,ad as useExport,xt as useForgotPassword,dd as useForm,Tt as useGetIdentity,Is as useGetLocale,$ as useHandleNotification,Qd as useImport,us as useInfiniteList,ie as useInvalidate,bo as useIsExistAuthentication,Ke as useList,yr as useLiveMode,Ve as useLog,$m as useLogList,$e as useLogin,Ct as useLogout,Ut as useMany,pa as useMenu,Bd as useModal,le as useMutationMode,q as useNavigation,te as useNotification,Ge as useOne,to as usePermissions,ne as usePublish,hr as useRedirectionAfterSubmission,Se as useRefineContext,gt as useRegister,B as useResource,be as useResourceSubscription,J as useResourceWithRoute,w as useRouterContext,mm as useSelect,hs as useSetLocale,Dd as useShow,hp as useSubscription,Vt as useSyncWithLocation,bm as useTable,Vs as useTitle,M as useTranslate,wt as useUpdate,jo as useUpdateMany,Rt as useUpdatePassword,qe as useWarnAboutChange,Qe as userFriendlyResourceName};
//# sourceMappingURL=index.js.map