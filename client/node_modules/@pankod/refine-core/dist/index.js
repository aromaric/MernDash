var Za=Object.create;var Mt=Object.defineProperty;var Ja=Object.getOwnPropertyDescriptor;var Xa=Object.getOwnPropertyNames;var en=Object.getPrototypeOf,tn=Object.prototype.hasOwnProperty;var rn=(e,t)=>{for(var r in t)Mt(e,r,{get:t[r],enumerable:!0})},Et=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Xa(t))!tn.call(e,a)&&a!==r&&Mt(e,a,{get:()=>t[a],enumerable:!(o=Ja(t,a))||o.enumerable});return e},Te=(e,t,r)=>(Et(e,t,"default"),r&&Et(r,t,"default")),E=(e,t,r)=>(r=e!=null?Za(en(e)):{},Et(t||!e||!e.__esModule?Mt(r,"default",{value:e,enumerable:!0}):r,e)),on=e=>Et(Mt({},"__esModule",{value:!0}),e);var me={};rn(me,{AuthPage:()=>Va,Authenticated:()=>ja,CanAccess:()=>Ya,ErrorComponent:()=>Qa,LayoutWrapper:()=>qa,LoginPage:()=>Bt,ReadyPage:()=>tr,Refine:()=>_a,RouteChangeHandler:()=>rr,UndoableQueue:()=>gr,createTreeView:()=>ct,file2Base64:()=>Eo,getDefaultFilter:()=>ho,getDefaultSortOrder:()=>bo,getNextPageParam:()=>dt,getPreviousPageParam:()=>lt,handleUseParams:()=>cr,importCSVMapper:()=>at,parseTableParams:()=>nt,parseTableParamsFromQuery:()=>Po,routeGenerator:()=>_e,setInitialFilters:()=>ut,setInitialSorters:()=>pt,stringifyTableParams:()=>st,unionFilters:()=>Ne,unionSorters:()=>it,useApiUrl:()=>Fo,useAuthenticated:()=>Qt,useBreadcrumb:()=>Dn,useCan:()=>Qr,useCanWithoutCache:()=>Tn,useCancelNotification:()=>ge,useCheckError:()=>G,useCreate:()=>Je,useCreateMany:()=>Ot,useCustom:()=>Ko,useCustomMutation:()=>Oo,useDataProvider:()=>F,useDelete:()=>Qo,useDeleteMany:()=>Vo,useExport:()=>cn,useForgotPassword:()=>St,useForm:()=>dn,useGetIdentity:()=>Lt,useGetLocale:()=>na,useHandleNotification:()=>$,useImport:()=>mn,useInfiniteList:()=>zo,useInvalidate:()=>ce,useIsExistAuthentication:()=>go,useList:()=>qe,useLiveMode:()=>br,useLog:()=>Ve,useLogList:()=>Pn,useLogin:()=>ze,useLogout:()=>It,useMany:()=>kt,useMenu:()=>wa,useModal:()=>fn,useMutationMode:()=>le,useNavigation:()=>Z,useNotification:()=>re,useOne:()=>je,usePermissions:()=>Yr,usePublish:()=>pe,useRedirectionAfterSubmission:()=>Ur,useRefineContext:()=>Se,useRegister:()=>Ut,useResource:()=>k,useResourceSubscription:()=>Ee,useResourceWithRoute:()=>ee,useRouterContext:()=>Q,useSelect:()=>gn,useSetLocale:()=>aa,useShow:()=>ln,useSubscription:()=>pn,useSyncWithLocation:()=>Xt,useTable:()=>xn,useTitle:()=>ca,useTranslate:()=>L,useUpdate:()=>Kt,useUpdateMany:()=>No,useUpdatePassword:()=>wt,useWarnAboutChange:()=>Xe,userFriendlyResourceName:()=>ke});module.exports=on(me);Te(me,require("@tanstack/react-query"),module.exports);var be=E(require("react"));var qr=require("react");var sr=E(require("react")),zr=require("@tanstack/react-query");var W=sr.default.createContext({}),_r=({children:e,isProvided:t,...r})=>{let{replace:o}=Z(),a=(0,zr.useQueryClient)(),n=()=>{a.invalidateQueries(["useAuthenticated"]),a.invalidateQueries(["getUserIdentity"]),a.invalidateQueries(["usePermissions"])},s=async l=>{var T;try{let P=await((T=r.login)==null?void 0:T.call(r,l));return n(),Promise.resolve(P)}catch(P){return Promise.reject(P)}},f=async l=>{var T;try{let P=await((T=r.register)==null?void 0:T.call(r,l));return n(),Promise.resolve(P)}catch(P){return Promise.reject(P)}},R=async l=>{var T;try{let P=await((T=r.logout)==null?void 0:T.call(r,l));return n(),Promise.resolve(P)}catch(P){return Promise.reject(P)}},u=async l=>{var T;try{return await((T=r.checkAuth)==null?void 0:T.call(r,l)),Promise.resolve()}catch(P){return P!=null&&P.redirectPath&&o(P.redirectPath),Promise.reject(P)}};return sr.default.createElement(W.Provider,{value:{...r,login:s,logout:R,checkAuth:u,register:f,isProvided:t}},e)};var jr=require("@tanstack/react-query"),Yr=e=>{let{getPermissions:t}=(0,qr.useContext)(W);return(0,jr.useQuery)(["usePermissions"],t!=null?t:()=>Promise.resolve(void 0),{enabled:!!t,...e})};var Zr=E(require("react")),Jr=require("@tanstack/react-query");var Lt=({queryOptions:e}={})=>{let{getUserIdentity:t}=Zr.default.useContext(W);return(0,Jr.useQuery)(["getUserIdentity"],t!=null?t:()=>Promise.resolve({}),{enabled:!!t,retry:!1,...e})};var Xr=E(require("react")),eo=require("@tanstack/react-query");var It=({mutationOptions:e}={})=>{let{push:t}=Z(),{logout:r}=Xr.default.useContext(W),{open:o}=re();return(0,eo.useMutation)(["useLogout"],r,{onSuccess:(n,s)=>{var R;let f=(R=s==null?void 0:s.redirectPath)!=null?R:n;if(f!==!1){if(f){t(f);return}t("/login")}},onError:n=>{o==null||o({key:"useLogout-error",type:"error",message:(n==null?void 0:n.name)||"Logout Error",description:(n==null?void 0:n.message)||"Something went wrong during logout"})},...e})};var to=E(require("react")),ro=require("@tanstack/react-query"),oo=E(require("qs"));var ze=({mutationOptions:e}={})=>{let{replace:t}=Z(),{login:r}=to.default.useContext(W),{useLocation:o}=Q(),{search:a}=o(),{close:n,open:s}=re(),{to:f}=oo.default.parse(a,{ignoreQueryPrefix:!0});return(0,ro.useMutation)(["useLogin"],r,{onSuccess:u=>{if(f)return t(f);u!==!1&&t(typeof u=="string"?u:"/"),n==null||n("login-error")},onError:u=>{s==null||s({message:(u==null?void 0:u.name)||"Login Error",description:(u==null?void 0:u.message)||"Invalid credentials",key:"login-error",type:"error"})},...e})};var ao=E(require("react")),no=require("@tanstack/react-query");var Ut=({mutationOptions:e}={})=>{let{replace:t}=Z(),{register:r}=ao.default.useContext(W),{close:o,open:a}=re();return(0,no.useMutation)(["useRegister"],r,{onSuccess:s=>{s!==!1&&t(s||"/"),o==null||o("register-error")},onError:s=>{a==null||a({message:(s==null?void 0:s.name)||"Register Error",description:(s==null?void 0:s.message)||"Error while registering",key:"register-error",type:"error"})},...e})};var so=E(require("react")),io=require("@tanstack/react-query");var St=({mutationOptions:e}={})=>{let{replace:t}=Z(),{forgotPassword:r}=so.default.useContext(W),{close:o,open:a}=re();return(0,io.useMutation)(["useForgotPassword"],r,{onSuccess:s=>{s!==!1&&s&&t(s),o==null||o("forgot-password-error")},onError:s=>{a==null||a({message:(s==null?void 0:s.name)||"Forgot Password Error",description:(s==null?void 0:s.message)||"Error while resetting password",key:"forgot-password-error",type:"error"})},...e})};var uo=E(require("react")),po=require("@tanstack/react-query"),co=E(require("qs"));var wt=({mutationOptions:e}={})=>{let{replace:t}=Z(),{updatePassword:r}=uo.default.useContext(W),{close:o,open:a}=re(),{useLocation:n}=Q(),{search:s}=n(),f=co.default.parse(s,{ignoreQueryPrefix:!0});return(0,po.useMutation)(["useUpdatePassword"],async u=>r==null?void 0:r({...f,...u}),{onSuccess:u=>{u!==!1&&u&&t(u),o==null||o("update-password-error")},onError:u=>{a==null||a({message:(u==null?void 0:u.name)||"Update Password Error",description:(u==null?void 0:u.message)||"Error while updating password",key:"update-password-error",type:"error"})},...e})};var lo=require("react"),mo=require("@tanstack/react-query");var Qt=e=>{let{checkAuth:t}=(0,lo.useContext)(W);return(0,mo.useQuery)(["useAuthenticated",e],async()=>{var o;return(o=await(t==null?void 0:t(e)))!=null?o:{}},{retry:!1})};var fo=E(require("react")),yo=require("@tanstack/react-query");var G=()=>{let{checkError:e}=fo.default.useContext(W),{mutate:t}=It();return(0,yo.useMutation)(["useCheckError"],e,{onError:o=>{t({redirectPath:o})}})};var To=require("react");var go=()=>{let{isProvided:e}=(0,To.useContext)(W);return e||!1};var Io=require("@tanstack/react-query");var ot=e=>e/1e3;var Co=E(require("lodash/zip")),Ro=E(require("lodash/fromPairs")),at=(e,t=r=>r)=>{let[r,...o]=e;return o.map(a=>(0,Ro.default)((0,Co.default)(r,a))).map((a,n,s)=>t.call(void 0,a,n,s))};var pr=E(require("pluralize"));var At=E(require("qs")),ir=E(require("lodash/unionWith")),ur=E(require("lodash/differenceWith")),xo=E(require("warn-once")),nt=e=>{let{current:t,pageSize:r,sorter:o,filters:a}=At.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:o!=null?o:[],parsedFilters:a!=null?a:[]}},Po=e=>{let t=At.default.stringify(e);return nt(`/${t}`)},st=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:o,filters:a,...n}=e;return At.default.stringify({...n,...r||{},sorter:o,filters:a},t)},Do=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,vo=(e,t)=>e.field==t.field,Ne=(e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,xo.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,ir.default)(e,t,r,Do).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),it=(e,t)=>(0,ir.default)(e,t,vo).filter(r=>r.order!==void 0&&r.order!==null),ut=(e,t)=>[...(0,ur.default)(t,e,Do),...e],pt=(e,t)=>[...(0,ur.default)(t,e,vo),...e],bo=(e,t)=>{if(!t)return;let r=t.find(o=>o.field===e);if(r)return r.order},ho=(e,t,r="eq")=>{let o=t==null?void 0:t.find(a=>{if(a.operator!=="or"&&a.operator!=="and"&&"field"in a){let{operator:n,field:s}=a;return s===e&&n===r}});if(o)return o.value||[]};var Eo=e=>new Promise((t,r)=>{let o=new FileReader,a=()=>{o.result&&(o.removeEventListener("load",a,!1),t(o.result))};o.addEventListener("load",a,!1),o.readAsDataURL(e.originFileObj),o.onerror=n=>(o.removeEventListener("load",a,!1),r(n))});var ke=(e="",t)=>{let r=Ue(e);return t==="singular"?pr.default.singular(r):pr.default.plural(r)};var cr=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e;var O=(e,t,r)=>{let o=t||"default",a={all:[o],resourceAll:[o,e||""],list:n=>[...a.resourceAll,"list",{...n,...r}],many:n=>[...a.resourceAll,"getMany",n&&n.map(String),{...r}].filter(s=>s!==void 0),detail:n=>[...a.resourceAll,"detail",n==null?void 0:n.toString(),{...r}],logList:n=>["logList",e,n,r].filter(s=>s!==void 0)};return a};var dr=(e,t)=>!e||!t?!1:!!e.find(r=>r===t);var an=e=>t=>e.parentName?t.name===e.parentName:!1,_e=(e,t)=>{var a,n,s,f,R;let r,o=(n=(a=e.options)==null?void 0:a.route)!=null?n:e.name;if(e.parentName){let u=t.find(an(e));u!=null&&u.parentName?r=`${_e(u,t)}/${o}`:e.parentName&&(r=`${(R=(f=(s=u==null?void 0:u.options)==null?void 0:s.route)!=null?f:u==null?void 0:u.name)!=null?R:e.parentName}/${o}`)}else r=o;return r};var ct=e=>{var s,f,R;let t=[],r={},o={},a,n;for(let u=0;u<e.length;u++){a=e[u];let l=(R=(f=a.route)!=null?f:(s=a.options)==null?void 0:s.route)!=null?R:"";r[l]=a,r[l].children=[],o[a.name]=a,o[a.name].children=[]}for(let u in r)r.hasOwnProperty(u)&&(n=r[u],n.parentName&&o[n.parentName]?o[n.parentName].children.push(n):t.push(n));return t};var Ue=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e);var mr=E(require("react"));var Mo=E(require("react")),lr=({children:e})=>Mo.default.createElement("div",null,e);var De={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},oe=mr.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:lr,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:De}),Lo=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,undoableTimeout:a,children:n,DashboardPage:s,Title:f,Layout:R=lr,Header:u,Sider:l,Footer:T,OffLayoutArea:P,LoginPage:y=Bt,catchAll:m,liveMode:c="off",onLiveEvent:p,options:i})=>mr.default.createElement(oe.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,Title:f,undoableTimeout:a,Layout:R,Header:u,Sider:l,Footer:T,OffLayoutArea:P,DashboardPage:s,LoginPage:y,catchAll:m,liveMode:c,onLiveEvent:p,options:i}},n);var fr=({options:e,disableTelemetry:t,liveMode:r,mutationMode:o,reactQueryClientConfig:a,reactQueryDevtoolConfig:n,syncWithLocation:s,undoableTimeout:f,warnWhenUnsavedChanges:R}={})=>{var P,y,m,c,p,i,C,g,x,D,v,h,b,M,S,V,B,A,U,N,w,te,ie,fe;let u={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(y=(P=e==null?void 0:e.mutationMode)!=null?P:o)!=null?y:De.mutationMode,undoableTimeout:(c=(m=e==null?void 0:e.undoableTimeout)!=null?m:f)!=null?c:De.undoableTimeout,syncWithLocation:(i=(p=e==null?void 0:e.syncWithLocation)!=null?p:s)!=null?i:De.syncWithLocation,warnWhenUnsavedChanges:(g=(C=e==null?void 0:e.warnWhenUnsavedChanges)!=null?C:R)!=null?g:De.warnWhenUnsavedChanges,liveMode:(D=(x=e==null?void 0:e.liveMode)!=null?x:r)!=null?D:De.liveMode,redirect:{afterCreate:(h=(v=e==null?void 0:e.redirect)==null?void 0:v.afterCreate)!=null?h:De.redirect.afterCreate,afterClone:(M=(b=e==null?void 0:e.redirect)==null?void 0:b.afterClone)!=null?M:De.redirect.afterClone,afterEdit:(V=(S=e==null?void 0:e.redirect)==null?void 0:S.afterEdit)!=null?V:De.redirect.afterEdit}},l=(A=(B=e==null?void 0:e.disableTelemetry)!=null?B:t)!=null?A:!1,T={clientConfig:(w=(N=(U=e==null?void 0:e.reactQuery)==null?void 0:U.clientConfig)!=null?N:a)!=null?w:{},devtoolConfig:(fe=(ie=(te=e==null?void 0:e.reactQuery)==null?void 0:te.devtoolConfig)!=null?ie:n)!=null?fe:{}};return{optionsWithDefaults:u,disableTelemetryWithDefault:l,reactQueryWithDefaults:T}};var yr=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit}};var Nt=async(e,t,r)=>{let o=[];for(let[a,n]of e.entries())try{let s=await n();o.push(t(s,a))}catch(s){o.push(r(s,a))}return o};var I=(e,t,r)=>{var a;if(t)return t;let o=r==null?void 0:r.find(n=>n.name===e);return(a=o==null?void 0:o.options)!=null&&a.dataProviderName?o.options.dataProviderName:"default"};var he=async e=>({data:(await Promise.all(e)).map(t=>t.data)});var dt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let o=(t==null?void 0:t.current)||1,a=(t==null?void 0:t.pageSize)||10,n=Math.ceil((e.total||0)/a);return o<n?Number(o)+1:void 0},lt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let o=(t==null?void 0:t.current)||1;return o===1?void 0:o-1};var qe=({resource:e,config:t,queryOptions:r,successNotification:o,errorNotification:a,metaData:n,liveMode:s,onLiveEvent:f,liveParams:R,dataProviderName:u})=>{let{resources:l}=k(),T=F(),P=O(e,I(e,u,l),n),{getList:y}=T(I(e,u,l)),m=L(),{mutate:c}=G(),p=$(),i=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ee({resource:e,types:["*"],params:{metaData:n,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...R},channel:`resources/${e}`,enabled:i,liveMode:s,onLiveEvent:f}),(0,Io.useQuery)(P.list(t),({queryKey:g,pageParam:x,signal:D})=>{let{hasPagination:v,...h}=t||{};return y({resource:e,...h,hasPagination:v,metaData:{...n,queryContext:{queryKey:g,pageParam:x,signal:D}}})},{...r,onSuccess:g=>{var D;(D=r==null?void 0:r.onSuccess)==null||D.call(r,g);let x=typeof o=="function"?o(g,{metaData:n,config:t},e):o;p(x)},onError:g=>{var D;c(g),(D=r==null?void 0:r.onError)==null||D.call(r,g);let x=typeof a=="function"?a(g,{metaData:n,config:t},e):a;p(x,{key:`${e}-useList-notification`,message:m("notifications.error",{statusCode:g.statusCode},`Error (status code: ${g.statusCode})`),description:g.message,type:"error"})}})};var Uo=require("@tanstack/react-query");var je=({resource:e,id:t,queryOptions:r,successNotification:o,errorNotification:a,metaData:n,liveMode:s,onLiveEvent:f,liveParams:R,dataProviderName:u})=>{let{resources:l}=k(),T=F(),P=O(e,I(e,u,l),n),{getOne:y}=T(I(e,u,l)),m=L(),{mutate:c}=G(),p=$();return Ee({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,metaData:n,subscriptionType:"useOne",...R},enabled:r==null?void 0:r.enabled,liveMode:s,onLiveEvent:f}),(0,Uo.useQuery)(P.detail(t),({queryKey:C,pageParam:g,signal:x})=>y({resource:e,id:t,metaData:{...n,queryContext:{queryKey:C,pageParam:g,signal:x}}}),{...r,onSuccess:C=>{var x;(x=r==null?void 0:r.onSuccess)==null||x.call(r,C);let g=typeof o=="function"?o(C,{id:t,metaData:n},e):o;p(g)},onError:C=>{var x;c(C),(x=r==null?void 0:r.onError)==null||x.call(r,C);let g=typeof a=="function"?a(C,{id:t,metaData:n},e):a;p(g,{key:`${t}-${e}-getOne-notification`,message:m("notifications.error",{statusCode:C.statusCode},`Error (status code: ${C.statusCode})`),description:C.message,type:"error"})}})};var So=require("@tanstack/react-query");var kt=({resource:e,ids:t,queryOptions:r,successNotification:o,errorNotification:a,metaData:n,liveMode:s,onLiveEvent:f,liveParams:R,dataProviderName:u})=>{let{resources:l}=k(),T=F(),P=O(e,I(e,u,l),n),{getMany:y,getOne:m}=T(I(e,u,l)),c=L(),{mutate:p}=G(),i=$(),C=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ee({resource:e,types:["*"],params:{ids:t!=null?t:[],metaData:n,subscriptionType:"useMany",...R},channel:`resources/${e}`,enabled:C,liveMode:s,onLiveEvent:f}),(0,So.useQuery)(P.many(t),({queryKey:x,pageParam:D,signal:v})=>y?y({resource:e,ids:t,metaData:{...n,queryContext:{queryKey:x,pageParam:D,signal:v}}}):he(t.map(h=>m({resource:e,id:h,metaData:{...n,queryContext:{queryKey:x,pageParam:D,signal:v}}}))),{...r,onSuccess:x=>{var v;(v=r==null?void 0:r.onSuccess)==null||v.call(r,x);let D=typeof o=="function"?o(x,t,e):o;i(D)},onError:x=>{var v;p(x),(v=r==null?void 0:r.onError)==null||v.call(r,x);let D=typeof a=="function"?a(x,t,e):a;i(D,{key:`${t[0]}-${e}-getMany-notification`,message:c("notifications.error",{statusCode:x.statusCode},`Error (status code: ${x.statusCode})`),description:x.message,type:"error"})}})};var Ht=require("@tanstack/react-query");var Ye=E(require("react")),Vt=E(require("lodash/isEqual"));var Ft=Ye.default.createContext({notifications:[],notificationDispatch:()=>!1}),nn=[],sn=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(o=>!((0,Vt.default)(o.id,t.payload.id)&&o.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(o=>!((0,Vt.default)(o.id,t.payload.id)&&o.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(o=>(0,Vt.default)(o.id,t.payload.id)&&o.resource==t.payload.resource?{...o,seconds:t.payload.seconds-1e3}:o);default:return e}},Tr=({children:e})=>{let[t,r]=(0,Ye.useReducer)(sn,nn),o={notifications:t,notificationDispatch:r};return Ye.default.createElement(Ft.Provider,{value:o},e,typeof window<"u"&&t.map(a=>Ye.default.createElement(gr,{key:`${a.id}-${a.resource}-queue`,notification:a})))};var Cr=E(require("pluralize"));var Kt=({mutationOptions:e}={})=>{let{resources:t}=k(),r=(0,Ht.useQueryClient)(),o=F(),{mutationMode:a,undoableTimeout:n}=le(),s=L(),{mutate:f}=G(),R=pe(),{log:u}=Ve(),{notificationDispatch:l}=ge(),T=$(),P=ce();return(0,Ht.useMutation)(({id:m,values:c,resource:p,mutationMode:i,undoableTimeout:C,onCancel:g,metaData:x,dataProviderName:D})=>{let v=i!=null?i:a,h=C!=null?C:n;return v!=="undoable"?o(I(p,D,t)).update({resource:p,id:m,variables:c,metaData:x}):new Promise((M,S)=>{let V=()=>{o(I(p,D,t)).update({resource:p,id:m,variables:c,metaData:x}).then(A=>M(A)).catch(A=>S(A))},B=()=>{S({message:"mutationCancelled"})};g&&g(B),l({type:"ADD",payload:{id:m,resource:p,cancelMutation:B,doMutation:V,seconds:h,isSilent:!!g}})})},{onMutate:async({resource:m,id:c,mutationMode:p,values:i,dataProviderName:C})=>{let g=O(m,I(m,C,t)),x=r.getQueriesData(g.resourceAll),D=p!=null?p:a;return await r.cancelQueries(g.resourceAll,void 0,{silent:!0}),D!=="pessimistic"&&(r.setQueriesData(g.list(),v=>{if(!v)return null;let h=v.data.map(b=>{var M;return((M=b.id)==null?void 0:M.toString())===(c==null?void 0:c.toString())?{id:c,...i}:b});return{...v,data:h}}),r.setQueriesData(g.many(),v=>{if(!v)return null;let h=v.data.map(b=>{var M;return((M=b.id)==null?void 0:M.toString())===(c==null?void 0:c.toString())&&(b={id:c,...i}),b});return{...v,data:h}}),r.setQueriesData(g.detail(c),v=>v?{...v,data:{...v.data,...i}}:null)),{previousQueries:x,queryKey:g}},onSettled:(m,c,{id:p,resource:i,dataProviderName:C,invalidates:g=["list","many","detail"]})=>{P({resource:i,dataProviderName:I(i,C,t),invalidates:g,id:p}),l({type:"REMOVE",payload:{id:p,resource:i}})},onSuccess:(m,{id:c,resource:p,successNotification:i,dataProviderName:C,values:g,metaData:x},D)=>{var A;let v=Cr.default.singular(p),h=typeof i=="function"?i(m,{id:c,values:g},p):i;T(h,{key:`${c}-${p}-notification`,description:s("notifications.success","Successful"),message:s("notifications.editSuccess",{resource:s(`${p}.${p}`,v)},`Successfully updated ${v}`),type:"success"}),R==null||R({channel:`resources/${p}`,type:"updated",payload:{ids:(A=m.data)!=null&&A.id?[m.data.id]:void 0},date:new Date});let b;if(D){let U=r.getQueryData(D.queryKey.detail(c));b=Object.keys(g).reduce((N,w)=>{var te;return N[w]=(te=U==null?void 0:U.data)==null?void 0:te[w],N},{})}let{fields:M,operation:S,variables:V,...B}=x||{};u==null||u.mutate({action:"update",resource:p,data:g,previousData:b,meta:{id:c,dataProviderName:I(p,C,t),...B}})},onError:(m,{id:c,resource:p,errorNotification:i,values:C},g)=>{if(g)for(let x of g.previousQueries)r.setQueryData(x[0],x[1]);if(m.message!=="mutationCancelled"){f==null||f(m);let x=Cr.default.singular(p),D=typeof i=="function"?i(m,{id:c,values:C},p):i;T(D,{key:`${c}-${p}-notification`,message:s("notifications.editError",{resource:s(`${p}.${p}`,x),statusCode:m.statusCode},`Error when updating ${x} (status code: ${m.statusCode})`),description:m.message,type:"error"})}},...e})};var wo=require("@tanstack/react-query"),Rr=E(require("pluralize"));var Je=({mutationOptions:e}={})=>{let{mutate:t}=G(),r=F(),o=ce(),{resources:a}=k(),n=L(),s=pe(),{log:f}=Ve(),R=$();return(0,wo.useMutation)(({resource:l,values:T,metaData:P,dataProviderName:y})=>r(I(l,y,a)).create({resource:l,variables:T,metaData:P}),{onSuccess:(l,{resource:T,successNotification:P,dataProviderName:y,invalidates:m=["list","many"],values:c,metaData:p})=>{var h,b,M;let i=Rr.default.singular(T),C=typeof P=="function"?P(l,c,T):P;R(C,{key:`create-${T}-notification`,message:n("notifications.createSuccess",{resource:n(`${T}.${T}`,i)},`Successfully created ${i}`),description:n("notifications.success","Success"),type:"success"}),o({resource:T,dataProviderName:I(T,y,a),invalidates:m}),s==null||s({channel:`resources/${T}`,type:"created",payload:{ids:(h=l==null?void 0:l.data)!=null&&h.id?[l.data.id]:void 0},date:new Date});let{fields:g,operation:x,variables:D,...v}=p||{};f==null||f.mutate({action:"create",resource:T,data:c,meta:{dataProviderName:I(T,y,a),id:(M=(b=l==null?void 0:l.data)==null?void 0:b.id)!=null?M:void 0,...v}})},onError:(l,{resource:T,errorNotification:P,values:y})=>{t(l);let m=Rr.default.singular(T),c=typeof P=="function"?P(l,y,T):P;R(c,{key:`create-${T}-notification`,description:l.message,message:n("notifications.createError",{resource:n(`${T}.${T}`,m),statusCode:l.statusCode},`There was an error creating ${m} (status code: ${l.statusCode})`),type:"error"})},...e})};var Wt=require("@tanstack/react-query"),xr=E(require("pluralize"));var Qo=({mutationOptions:e}={})=>{let{mutate:t}=G(),r=F(),{resources:o}=k(),a=(0,Wt.useQueryClient)(),{mutationMode:n,undoableTimeout:s}=le(),{notificationDispatch:f}=ge(),R=L(),u=pe(),{log:l}=Ve(),T=$(),P=ce();return(0,Wt.useMutation)(({id:m,mutationMode:c,undoableTimeout:p,resource:i,onCancel:C,metaData:g,dataProviderName:x,values:D})=>{let v=c!=null?c:n,h=p!=null?p:s;return v!=="undoable"?r(I(i,x,o)).deleteOne({resource:i,id:m,metaData:g,variables:D}):new Promise((M,S)=>{let V=()=>{r(I(i,x,o)).deleteOne({resource:i,id:m,metaData:g,variables:D}).then(A=>M(A)).catch(A=>S(A))},B=()=>{S({message:"mutationCancelled"})};C&&C(B),f({type:"ADD",payload:{id:m,resource:i,cancelMutation:B,doMutation:V,seconds:h,isSilent:!!C}})})},{onMutate:async({id:m,resource:c,mutationMode:p,dataProviderName:i})=>{let C=O(c,I(c,i,o)),g=p!=null?p:n;await a.cancelQueries(C.resourceAll,void 0,{silent:!0});let x=a.getQueriesData(C.resourceAll);return g!=="pessimistic"&&(a.setQueriesData(C.list(),D=>D?{data:D.data.filter(h=>{var b;return((b=h.id)==null?void 0:b.toString())!==m.toString()}),total:D.total-1}:null),a.setQueriesData(C.many(),D=>{if(!D)return null;let v=D.data.filter(h=>{var b;return((b=h.id)==null?void 0:b.toString())!==(m==null?void 0:m.toString())});return{...D,data:v}})),{previousQueries:x,queryKey:C}},onSettled:(m,c,{id:p,resource:i,dataProviderName:C,invalidates:g=["list","many"]})=>{P({resource:i,dataProviderName:I(i,C,o),invalidates:g}),f({type:"REMOVE",payload:{id:p,resource:i}})},onSuccess:(m,{id:c,resource:p,successNotification:i,dataProviderName:C,metaData:g},x)=>{let D=xr.default.singular(p!=null?p:"");a.removeQueries(x==null?void 0:x.queryKey.detail(c));let v=typeof i=="function"?i(m,c,p):i;T(v,{key:`${c}-${p}-notification`,description:R("notifications.success","Success"),message:R("notifications.deleteSuccess",{resource:R(`${p}.${p}`,D)},`Successfully deleted a ${D}`),type:"success"}),u==null||u({channel:`resources/${p}`,type:"deleted",payload:{ids:c?[c]:[]},date:new Date});let{fields:h,operation:b,variables:M,...S}=g||{};l==null||l.mutate({action:"delete",resource:p,meta:{id:c,dataProviderName:I(p,C,o),...S}}),a.removeQueries(x==null?void 0:x.queryKey.detail(c))},onError:(m,{id:c,resource:p,errorNotification:i},C)=>{if(C)for(let g of C.previousQueries)a.setQueryData(g[0],g[1]);if(m.message!=="mutationCancelled"){t(m);let g=xr.default.singular(p!=null?p:""),x=typeof i=="function"?i(m,c,p):i;T(x,{key:`${c}-${p}-notification`,message:R("notifications.deleteError",{resource:g,statusCode:m.statusCode},`Error (status code: ${m.statusCode})`),description:m.message,type:"error"})}},...e})};var Ao=require("@tanstack/react-query"),Bo=E(require("pluralize"));var Ot=({mutationOptions:e}={})=>{let t=F(),{resources:r}=k(),o=L(),a=pe(),n=$(),s=ce();return(0,Ao.useMutation)(({resource:R,values:u,metaData:l,dataProviderName:T})=>{let P=t(I(R,T,r));return P.createMany?P.createMany({resource:R,variables:u,metaData:l}):he(u.map(y=>P.create({resource:R,variables:y,metaData:l})))},{onSuccess:(R,{resource:u,successNotification:l,dataProviderName:T,invalidates:P=["list","many"],values:y})=>{let m=Bo.default.plural(u),c=typeof l=="function"?l(R,y,u):l;n(c,{key:`createMany-${u}-notification`,message:o("notifications.createSuccess",{resource:o(`${u}.${u}`,u)},`Successfully created ${m}`),description:o("notifications.success","Success"),type:"success"}),s({resource:u,dataProviderName:I(u,T,r),invalidates:P});let p=R==null?void 0:R.data.filter(i=>(i==null?void 0:i.id)!==void 0).map(i=>i.id);a==null||a({channel:`resources/${u}`,type:"created",payload:{ids:p},date:new Date})},onError:(R,{resource:u,errorNotification:l,values:T})=>{let P=typeof l=="function"?l(R,T,u):l;n(P,{key:`createMany-${u}-notification`,description:R.message,message:o("notifications.createError",{resource:o(`${u}.${u}`,u),statusCode:R.statusCode},`There was an error creating ${u} (status code: ${R.statusCode}`),type:"error"})},...e})};var $t=require("@tanstack/react-query"),Pr=E(require("pluralize"));var No=({mutationOptions:e}={})=>{let{resources:t}=k(),r=(0,$t.useQueryClient)(),o=F(),a=L(),{mutationMode:n,undoableTimeout:s}=le(),{mutate:f}=G(),{notificationDispatch:R}=ge(),u=pe(),l=$(),T=ce();return(0,$t.useMutation)(({ids:y,values:m,resource:c,onCancel:p,mutationMode:i,undoableTimeout:C,metaData:g,dataProviderName:x})=>{let D=i!=null?i:n,v=C!=null?C:s,h=o(I(c,x,t)),b=()=>h.updateMany?h.updateMany({resource:c,ids:y,variables:m,metaData:g}):he(y.map(S=>h.update({resource:c,id:S,variables:m,metaData:g})));return D!=="undoable"?b():new Promise((S,V)=>{let B=()=>{b().then(U=>S(U)).catch(U=>V(U))},A=()=>{V({message:"mutationCancelled"})};p&&p(A),R({type:"ADD",payload:{id:y,resource:c,cancelMutation:A,doMutation:B,seconds:v,isSilent:!!p}})})},{onMutate:async({resource:y,ids:m,values:c,mutationMode:p,dataProviderName:i,metaData:C})=>{let g=O(y,I(y,i,t),C),x=p!=null?p:n;await r.cancelQueries(g.resourceAll,void 0,{silent:!0});let D=r.getQueriesData(g.resourceAll);if(x!=="pessimistic"){r.setQueriesData(g.list(),v=>{if(!v)return null;let h=v.data.map(b=>b.id!==void 0&&m.filter(M=>M!==void 0).map(String).includes(b.id.toString())?{...b,...c}:b);return{...v,data:h}}),r.setQueriesData(g.many(),v=>{if(!v)return null;let h=v.data.map(b=>b.id!==void 0&&m.filter(M=>M!==void 0).map(String).includes(b.id.toString())?{...b,...c}:b);return{...v,data:h}});for(let v of m)r.setQueriesData(g.detail(v),h=>{if(!h)return null;let b={...h.data,...c};return{...h,data:b}})}return{previousQueries:D,queryKey:g}},onSettled:(y,m,{ids:c,resource:p,dataProviderName:i})=>{T({resource:p,invalidates:["list","many"],dataProviderName:I(p,i,t)}),c.forEach(C=>T({resource:p,invalidates:["detail"],dataProviderName:I(p,i,t),id:C})),R({type:"REMOVE",payload:{id:c,resource:p}})},onSuccess:(y,{ids:m,resource:c,successNotification:p,values:i})=>{let C=Pr.default.singular(c),g=typeof p=="function"?p(y,{ids:m,values:i},c):p;l(g,{key:`${m}-${c}-notification`,description:a("notifications.success","Successful"),message:a("notifications.editSuccess",{resource:a(`${c}.${c}`,c)},`Successfully updated ${C}`),type:"success"}),u==null||u({channel:`resources/${c}`,type:"updated",payload:{ids:m.map(String)},date:new Date})},onError:(y,{ids:m,resource:c,errorNotification:p,values:i},C)=>{if(C)for(let g of C.previousQueries)r.setQueryData(g[0],g[1]);if(y.message!=="mutationCancelled"){f==null||f(y);let g=Pr.default.singular(c),x=typeof p=="function"?p(y,{ids:m,values:i},c):p;l(x,{key:`${m}-${c}-updateMany-error-notification`,message:a("notifications.editError",{resource:g,statusCode:y.statusCode},`Error when updating ${g} (status code: ${y.statusCode})`),description:y.message,type:"error"})}},...e})};var Gt=require("@tanstack/react-query"),ko=E(require("pluralize"));var Vo=({mutationOptions:e}={})=>{let{mutate:t}=G(),{mutationMode:r,undoableTimeout:o}=le(),a=F(),{notificationDispatch:n}=ge(),s=L(),f=pe(),R=$(),u=ce(),{resources:l}=k(),T=(0,Gt.useQueryClient)();return(0,Gt.useMutation)(({resource:y,ids:m,mutationMode:c,undoableTimeout:p,onCancel:i,metaData:C,dataProviderName:g,values:x})=>{let D=c!=null?c:r,v=p!=null?p:o,h=a(I(y,g,l)),b=()=>h.deleteMany?h.deleteMany({resource:y,ids:m,metaData:C,variables:x}):he(m.map(S=>h.deleteOne({resource:y,id:S,metaData:C,variables:x})));return D!=="undoable"?b():new Promise((S,V)=>{let B=()=>{b().then(U=>S(U)).catch(U=>V(U))},A=()=>{V({message:"mutationCancelled"})};i&&i(A),n({type:"ADD",payload:{id:m,resource:y,cancelMutation:A,doMutation:B,seconds:v,isSilent:!!i}})})},{onMutate:async({ids:y,resource:m,mutationMode:c,dataProviderName:p})=>{let i=O(m,I(m,p,l)),C=c!=null?c:r;await T.cancelQueries(i.resourceAll,void 0,{silent:!0});let g=T.getQueriesData(i.resourceAll);if(C!=="pessimistic"){T.setQueriesData(i.list(),x=>x?{data:x.data.filter(v=>v.id&&!y.map(String).includes(v.id.toString())),total:x.total-1}:null),T.setQueriesData(i.many(),x=>{if(!x)return null;let D=x.data.filter(v=>v.id?!y.map(String).includes(v.id.toString()):!1);return{...x,data:D}});for(let x of y)T.setQueriesData(i.detail(x),D=>!D||D.data.id==x?null:{...D})}return{previousQueries:g,queryKey:i}},onSettled:(y,m,{resource:c,ids:p,dataProviderName:i,invalidates:C=["list","many"]})=>{u({resource:c,dataProviderName:I(c,i,l),invalidates:C}),n({type:"REMOVE",payload:{id:p,resource:c}})},onSuccess:(y,{ids:m,resource:c,successNotification:p},i)=>{m.forEach(g=>T.removeQueries(i==null?void 0:i.queryKey.detail(g)));let C=typeof p=="function"?p(y,m,c):p;R(C,{key:`${m}-${c}-notification`,description:s("notifications.success","Success"),message:s("notifications.deleteSuccess",{resource:s(`${c}.${c}`,c)},`Successfully deleted ${c}`),type:"success"}),f==null||f({channel:`resources/${c}`,type:"deleted",payload:{ids:m},date:new Date}),m.forEach(g=>T.removeQueries(i==null?void 0:i.queryKey.detail(g)))},onError:(y,{ids:m,resource:c,errorNotification:p},i)=>{if(i)for(let C of i.previousQueries)T.setQueryData(C[0],C[1]);if(y.message!=="mutationCancelled"){t(y);let C=ko.default.singular(c),g=typeof p=="function"?p(y,m,c):p;R(g,{key:`${m}-${c}-notification`,message:s("notifications.deleteError",{resource:C,statusCode:y.statusCode},`Error (status code: ${y.statusCode})`),description:y.message,type:"error"})}},...e})};var Fo=e=>{let t=F(),{getApiUrl:r}=t(e);return r()};var Ho=require("@tanstack/react-query");var Ko=({url:e,method:t,config:r,queryOptions:o,successNotification:a,errorNotification:n,metaData:s,dataProviderName:f})=>{let R=F(),{custom:u}=R(f),{mutate:l}=G(),T=L(),P=$();if(u)return(0,Ho.useQuery)([f,"custom",t,e,{...r,...s}],({queryKey:m,pageParam:c,signal:p})=>u({url:e,method:t,...r,metaData:{...s,queryContext:{queryKey:m,pageParam:c,signal:p}}}),{...o,onSuccess:m=>{var p;(p=o==null?void 0:o.onSuccess)==null||p.call(o,m);let c=typeof a=="function"?a(m,{...r,...s}):a;P(c)},onError:m=>{var p;l(m),(p=o==null?void 0:o.onError)==null||p.call(o,m);let c=typeof n=="function"?n(m,{...r,...s}):n;P(c,{key:`${t}-notification`,message:T("notifications.error",{statusCode:m.statusCode},`Error (status code: ${m.statusCode})`),description:m.message,type:"error"})}});throw Error("Not implemented custom on data provider.")};var Wo=require("@tanstack/react-query");var Oo=({mutationOptions:e}={})=>{let{mutate:t}=G(),r=$(),o=F(),a=L();return(0,Wo.useMutation)(({url:s,method:f,values:R,metaData:u,dataProviderName:l,config:T})=>{let{custom:P}=o(l);if(P)return P({url:s,method:f,payload:R,metaData:u,headers:{...T==null?void 0:T.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(s,{successNotification:f,config:R,metaData:u})=>{let l=typeof f=="function"?f(s,{...R,...u}):f;r(l)},onError:(s,{errorNotification:f,method:R,config:u,metaData:l})=>{t(s);let T=typeof f=="function"?f(s,{...u,...l}):f;r(T,{key:`${R}-notification`,message:a("notifications.error",{statusCode:s.statusCode},`Error (status code: ${s.statusCode})`),description:s.message,type:"error"})},...e})};var zt=require("react");var Dr=E(require("react")),un=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),mt=Dr.default.createContext(un()),$o=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},Dr.default.createElement(mt.Provider,{value:r},e)};var F=()=>{let e=(0,zt.useContext)(mt);return(0,zt.useCallback)(r=>{if(r){if(!e[r])throw new Error(`"${r}" Data provider not found`);return e[r]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])};var Go=require("@tanstack/react-query");var zo=({resource:e,config:t,queryOptions:r,successNotification:o,errorNotification:a,metaData:n,liveMode:s,onLiveEvent:f,liveParams:R,dataProviderName:u})=>{let{resources:l}=k(),T=F(),P=O(e,I(e,u,l),n),{getList:y}=T(I(e,u,l)),m=L(),{mutate:c}=G(),p=$(),i=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ee({resource:e,types:["*"],params:{metaData:n,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...R},channel:`resources/${e}`,enabled:i,liveMode:s,onLiveEvent:f}),(0,Go.useInfiniteQuery)(P.list(t),({queryKey:g,pageParam:x,signal:D})=>{let{hasPagination:v,...h}=t||{},b={...t==null?void 0:t.pagination,current:x};return y({resource:e,...h,pagination:b,hasPagination:v,metaData:{...n,queryContext:{queryKey:g,pageParam:x,signal:D}}}).then(({data:M,total:S,...V})=>({data:M,total:S,pagination:b,...V}))},{getNextPageParam:g=>dt(g),getPreviousPageParam:g=>lt(g),...r,onSuccess:g=>{var D;(D=r==null?void 0:r.onSuccess)==null||D.call(r,g);let x=typeof o=="function"?o(g,{metaData:n,config:t},e):o;p(x)},onError:g=>{var D;c(g),(D=r==null?void 0:r.onError)==null||D.call(r,g);let x=typeof a=="function"?a(g,{metaData:n,config:t},e):a;p(x,{key:`${e}-useInfiniteList-notification`,message:m("notifications.error",{statusCode:g.statusCode},`Error (status code: ${g.statusCode})`),description:g.message,type:"error"})}})};var ft=require("react"),qo=require("@tanstack/react-query");var vr=E(require("react")),Me=vr.default.createContext(void 0),_o=({liveProvider:e,children:t})=>vr.default.createElement(Me.Provider,{value:e},t);var Ee=({resource:e,params:t,channel:r,types:o,enabled:a=!0,liveMode:n,onLiveEvent:s})=>{let f=(0,qo.useQueryClient)(),R=O(e),u=(0,ft.useContext)(Me),{liveMode:l,onLiveEvent:T}=(0,ft.useContext)(oe),P=n!=null?n:l;(0,ft.useEffect)(()=>{let y;return P&&P!=="off"&&a&&(y=u==null?void 0:u.subscribe({channel:r,params:{resource:e,...t},types:o,callback:m=>{P==="auto"&&f.invalidateQueries(R.resourceAll),s==null||s(m),T==null||T(m)}})),()=>{y&&(u==null||u.unsubscribe(y))}},[a])};var jo=require("react");var br=e=>{let{liveMode:t}=(0,jo.useContext)(oe);return e!=null?e:t};var _t=require("react");var pn=({params:e,channel:t,types:r=["*"],enabled:o=!0,onLiveEvent:a})=>{let n=(0,_t.useContext)(Me);(0,_t.useEffect)(()=>{let s;return o&&(s=n==null?void 0:n.subscribe({channel:t,params:e,types:r,callback:a})),()=>{s&&(n==null||n.unsubscribe(s))}},[o])};var Yo=require("react");var pe=()=>{let e=(0,Yo.useContext)(Me);return e==null?void 0:e.publish};var Jo=require("react");var hr=E(require("react")),Fe=hr.default.createContext({resources:[]}),Zo=({resources:e,children:t})=>hr.default.createElement(Fe.Provider,{value:{resources:e}},t);var k=({resourceName:e,resourceNameOrRouteName:t,recordItemId:r}={})=>{let{resources:o}=(0,Jo.useContext)(Fe),a=ee(),{useParams:n}=Q(),s=n(),f=a(t!=null?t:s.resource),R=e!=null?e:f.name,u=r!=null?r:s.id;return{resources:o,resource:f,resourceName:R,id:u,action:s.action}};var qt=require("react");var ee=()=>{let{resources:e}=(0,qt.useContext)(Fe);return(0,qt.useCallback)(r=>{let o=e.find(a=>a.route===r);if(!o){let a=e.find(n=>n.name===r);return a!=null?a:{name:r,route:r}}return o},[e])};var Xo=require("react");var ge=()=>{let{notifications:e,notificationDispatch:t}=(0,Xo.useContext)(Ft);return{notifications:e,notificationDispatch:t}};var ta=require("react");var jt=E(require("react"));var yt=(0,jt.createContext)({}),ea=({open:e,close:t,children:r})=>jt.default.createElement(yt.Provider,{value:{open:e,close:t}},r);var re=()=>{let{open:e,close:t}=(0,ta.useContext)(yt);return{open:e,close:t}};var ra=require("react");var $=()=>{let{open:e}=re();return(0,ra.useCallback)((r,o)=>{r!==!1&&(r?e==null||e(r):o&&(e==null||e(o)))},[])};var Yt=require("react");var Er=E(require("react"));var Ce=Er.default.createContext({}),oa=({children:e,i18nProvider:t})=>Er.default.createElement(Ce.Provider,{value:{i18nProvider:t}},e);var aa=()=>{let{i18nProvider:e}=(0,Yt.useContext)(Ce);return(0,Yt.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])};var Zt=require("react");var L=()=>{let{i18nProvider:e}=(0,Zt.useContext)(Ce);return(0,Zt.useMemo)(()=>{function r(o,a,n){var s,f;return(f=(s=e==null?void 0:e.translate(o,a,n))!=null?s:n)!=null?f:typeof a=="string"&&typeof n>"u"?a:o}return r},[e])};var Jt=require("react");var na=()=>{let{i18nProvider:e}=(0,Jt.useContext)(Ce);return(0,Jt.useCallback)(()=>e==null?void 0:e.getLocale(),[])};var sa=require("react");var le=()=>{let{mutationMode:e,undoableTimeout:t}=(0,sa.useContext)(oe);return{mutationMode:e,undoableTimeout:t}};var Lr=require("react");var Tt=E(require("react")),Mr=Tt.default.createContext({}),ia=({children:e})=>{let[t,r]=(0,Tt.useState)(!1);return Tt.default.createElement(Mr.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)};var Xe=()=>{let{warnWhenUnsavedChanges:e}=(0,Lr.useContext)(oe),{warnWhen:t,setWarnWhen:r}=(0,Lr.useContext)(Mr);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}};var ua=require("react");var Xt=()=>{let{syncWithLocation:e}=(0,ua.useContext)(oe);return{syncWithLocation:e}};var pa=require("react");var ca=()=>{let{Title:e}=(0,pa.useContext)(oe);return e};var da=require("react");var Se=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:a,Title:n,hasDashboard:s,mutationMode:f,syncWithLocation:R,undoableTimeout:u,warnWhenUnsavedChanges:l,DashboardPage:T,LoginPage:P,catchAll:y,options:m}=(0,da.useContext)(oe);return{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:a,Title:n,hasDashboard:s,mutationMode:f,syncWithLocation:R,undoableTimeout:u,warnWhenUnsavedChanges:l,DashboardPage:T,LoginPage:P,catchAll:y,options:m}};var la=require("react");var ma=require("export-to-csv-fix-source-map"),cn=({resourceName:e,sorter:t,filters:r,maxItemCount:o,pageSize:a=20,mapData:n=l=>l,exportOptions:s,metaData:f,dataProviderName:R,onError:u}={})=>{let[l,T]=(0,la.useState)(!1),{resources:P}=k(),y=ee(),m=F(),{useParams:c}=Q(),{resource:p}=c(),{name:i}=y(p);e&&(i=e);let C=`${ke(i,"plural")}-${new Date().toLocaleString()}`,{getList:g}=m(I(i,R,P));return{isLoading:l,triggerExport:async()=>{T(!0);let D=[],v=1,h=!0;for(;h;)try{let{data:M,total:S}=await g({resource:i,filters:r,sort:t,pagination:{current:v,pageSize:a},metaData:f});v++,D.push(...M),o&&D.length>=o&&(D=D.slice(0,o),h=!1),S===D.length&&(h=!1)}catch(M){T(!1),h=!1,u==null||u(M);return}new ma.ExportToCsv({filename:C,useKeysAsHeaders:!0,...s}).generateCsv(D.map(n)),T(!1)}}};var Ir=E(require("react"));var dn=({resource:e,action:t,id:r,onMutationSuccess:o,onMutationError:a,redirect:n,successNotification:s,errorNotification:f,metaData:R,mutationMode:u,liveMode:l,onLiveEvent:T,liveParams:P,undoableTimeout:y,dataProviderName:m,invalidates:c,queryOptions:p,createMutationOptions:i,updateMutationOptions:C}={})=>{var ht;let{options:g}=Se(),{useParams:x}=Q(),{resource:D,action:v,id:h}=x(),b=!e||e===D?r!=null?r:h:r,[M,S]=Ir.default.useState(b);Ir.default.useEffect(()=>{b!==M&&S(r)},[r]);let V=e!=null?e:D,B=(ht=t!=null?t:v==="show"?"create":v)!=null?ht:"create",U=ee()(V),{mutationMode:N}=le(),w=u!=null?u:N,te=B==="create",ie=B==="edit",fe=B==="clone",j=yr({redirectFromProps:n,action:B,redirectOptions:g.redirect}),J=M!==void 0&&(ie||fe),ye=je({resource:U.name,id:M!=null?M:"",queryOptions:{enabled:J,...p},liveMode:l,onLiveEvent:T,liveParams:P,metaData:R,dataProviderName:m}),{isFetching:z}=ye,Re=Je({mutationOptions:i}),{mutate:we,isLoading:Dt}=Re,xe=Kt({mutationOptions:C}),{mutate:vt,isLoading:nr}=xe,{setWarnWhen:bt}=Xe(),Qe=Ur();return{...te||fe?{formLoading:z||Dt,mutationResult:Re,onFinish:async ue=>{bt(!1);let H=Y=>{Qe({redirect:j,resource:U,id:Y})};return w!=="pessimistic"&&setTimeout(()=>{H()}),new Promise((Y,Ae)=>(w!=="pessimistic"&&Y(),we({values:ue,resource:U.name,successNotification:s,errorNotification:f,metaData:R,dataProviderName:m,invalidates:c},{onSuccess:(de,Pe,Be)=>{var Gr;o&&o(de,ue,Be);let rt=(Gr=de==null?void 0:de.data)==null?void 0:Gr.id;H(rt),Y(de)},onError:(de,Pe,Be)=>{if(a)return a(de,ue,Be);Ae()}})))}}:{formLoading:z||nr,mutationResult:xe,onFinish:async ue=>{bt(!1);let H={id:M!=null?M:"",values:ue,resource:U.name,mutationMode:w,undoableTimeout:y,successNotification:s,errorNotification:f,metaData:R,dataProviderName:m,invalidates:c},Y=()=>{S(b),Qe({redirect:j,resource:U,id:M})};return w!=="pessimistic"&&setTimeout(()=>{Y()}),new Promise((Ae,de)=>(w!=="pessimistic"&&Ae(),setTimeout(()=>{vt(H,{onSuccess:(Pe,Be,rt)=>{o&&o(Pe,ue,rt),w==="pessimistic"&&Y(),Ae(Pe)},onError:(Pe,Be,rt)=>{if(a)return a(Pe,ue,rt);de()}})})))}},queryResult:ye,id:M,setId:S,redirect:(ue,H)=>{Qe({redirect:ue!==void 0?ue:ie?"list":"edit",resource:U,id:H!=null?H:M})}}};var fa=require("react");var Ur=()=>{let{show:e,edit:t,list:r,create:o}=Z();return(0,fa.useCallback)(({redirect:n,resource:s,id:f})=>{if(n&&s.route)return s.canShow&&n==="show"&&f?e(s.route,f):s.canEdit&&n==="edit"&&f?t(s.route,f):s.canCreate&&n==="create"?o(s.route):r(s.route,"push")},[])};var Z=()=>{let{useHistory:e}=Q(),t=e(),r=ee(),o=(i,C="push")=>{C==="push"?t.push(i):t.replace(i)},a=i=>`/${r(i).route}/create`,n=(i,C)=>{let g=r(i),x=encodeURIComponent(C);return`/${g.route}/edit/${x}`},s=(i,C)=>{let g=r(i),x=encodeURIComponent(C);return`/${g.route}/clone/${x}`},f=(i,C)=>{let g=r(i),x=encodeURIComponent(C);return`/${g.route}/show/${x}`},R=i=>`/${r(i).route}`;return{create:(i,C="push")=>{o(a(i),C)},createUrl:a,edit:(i,C,g="push")=>{o(n(i,C),g)},editUrl:n,clone:(i,C,g="push")=>{o(s(i,C),g)},cloneUrl:s,show:(i,C,g="push")=>{o(f(i,C),g)},showUrl:f,list:(i,C="push")=>{o(R(i),C)},listUrl:R,push:(i,...C)=>{t.push(i,...C)},replace:(i,...C)=>{t.replace(i,...C)},goBack:()=>{t.goBack()}}};var er=E(require("react"));var ln=({resource:e,id:t,successNotification:r,errorNotification:o,metaData:a,liveMode:n,onLiveEvent:s,dataProviderName:f,queryOptions:R}={})=>{let{useParams:u}=Q(),{resource:l,id:T}=u(),P=!e||e===l?t!=null?t:T:t,[y,m]=(0,er.useState)(P);er.default.useEffect(()=>{P!==y&&m(P)},[P]);let p=ee()(e!=null?e:l);return{queryResult:je({resource:p.name,id:y!=null?y:"",queryOptions:{enabled:y!==void 0,...R},successNotification:r,errorNotification:o,metaData:a,liveMode:n,onLiveEvent:s,dataProviderName:f}),showId:y,setShowId:m}};var et=require("react"),ya=require("papaparse"),Ta=E(require("lodash/chunk"));var mn=({resourceName:e,mapData:t=R=>R,paparseOptions:r,batchSize:o=Number.MAX_SAFE_INTEGER,onFinish:a,metaData:n,onProgress:s,dataProviderName:f}={})=>{let[R,u]=(0,et.useState)(0),[l,T]=(0,et.useState)(0),[P,y]=(0,et.useState)(!1),m=ee(),{useParams:c}=Q(),{resource:p}=c(),{name:i}=m(e!=null?e:p),C=Ot(),g=Je(),x;o===1?x=g:x=C;let D=()=>{T(0),u(0),y(!1)},v=b=>{let M={succeeded:b.filter(S=>S.type==="success"),errored:b.filter(S=>S.type==="error")};a==null||a(M),y(!1)};(0,et.useEffect)(()=>{s==null||s({totalAmount:l,processedAmount:R})},[l,R]);let h=({file:b})=>(D(),new Promise(M=>{y(!0),(0,ya.parse)(b,{complete:async({data:S})=>{let V=at(S,t);if(T(V.length),o===1){let B=V.map(U=>async()=>({response:await g.mutateAsync({resource:i,values:U,successNotification:!1,errorNotification:!1,dataProviderName:f,metaData:n}),value:U})),A=await Nt(B,({response:U,value:N})=>(u(w=>w+1),{response:[U.data],type:"success",request:[N]}),(U,N)=>({response:[U],type:"error",request:[V[N]]}));M(A)}else{let B=(0,Ta.default)(V,o),A=B.map(N=>async()=>({response:await C.mutateAsync({resource:i,values:N,successNotification:!1,errorNotification:!1,dataProviderName:f,metaData:n}),value:N,currentBatchLength:N.length})),U=await Nt(A,({response:N,currentBatchLength:w,value:te})=>(u(ie=>ie+w),{response:N.data,type:"success",request:te}),(N,w)=>({response:[N],type:"error",request:B[w]}));M(U)}},...r})}).then(M=>(v(M),M)));return{inputProps:{type:"file",accept:".csv",onChange:b=>{b.target.files&&b.target.files.length>0&&h({file:b.target.files[0]})}},mutationResult:x,isLoading:P,handleChange:h}};var gt=require("react"),fn=({defaultVisible:e=!1}={})=>{let[t,r]=(0,gt.useState)(e),o=(0,gt.useCallback)(()=>r(!0),[t]),a=(0,gt.useCallback)(()=>r(!1),[t]);return{visible:t,show:o,close:a}};var Ca=require("react");var Sr=E(require("react")),yn={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Ct=Sr.default.createContext(yn),ga=({children:e,useHistory:t,useLocation:r,useParams:o,Prompt:a,Link:n,routes:s})=>Sr.default.createElement(Ct.Provider,{value:{useHistory:t,useLocation:r,useParams:o,Prompt:a,Link:n,routes:s}},e);var Q=()=>{let{useHistory:e,useLocation:t,useParams:r,Prompt:o,Link:a,routes:n}=(0,Ca.useContext)(Ct);return{useHistory:e,useLocation:t,useParams:r,Prompt:o,Link:a,routes:n}};var xa=require("react"),Pa=require("@tanstack/react-query");var wr=E(require("react"));var He=wr.default.createContext({}),Ra=({can:e,children:t})=>wr.default.createElement(He.Provider,{value:{can:e}},t);var Qr=({action:e,resource:t,params:r,queryOptions:o})=>{let{can:a}=(0,xa.useContext)(He),{resource:n,...s}=r!=null?r:{},{icon:f,list:R,edit:u,create:l,show:T,children:P,...y}=n!=null?n:{},m=(0,Pa.useQuery)(["useCan",{action:e,resource:t,params:{...s,resource:y},enabled:o==null?void 0:o.enabled}],()=>{var c;return(c=a==null?void 0:a({action:e,resource:t,params:r}))!=null?c:Promise.resolve({can:!0})},{enabled:typeof a<"u",...o,retry:!1});return typeof a>"u"?{data:{can:!0}}:m};var Da=require("react");var Tn=()=>{let{can:e}=(0,Da.useContext)(He);return{can:e}};var Le=require("react"),va=E(require("lodash/uniqBy")),ba=E(require("lodash/debounce")),Rt=E(require("lodash/get"));var gn=e=>{var ie,fe;let[t,r]=(0,Le.useState)([]),[o,a]=(0,Le.useState)([]),[n,s]=(0,Le.useState)([]),{resource:f,sort:R,filters:u=[],optionLabel:l="title",optionValue:T="id",debounce:P=300,successNotification:y,errorNotification:m,defaultValueQueryOptions:c,queryOptions:p,fetchSize:i,pagination:C,hasPagination:g,liveMode:x,defaultValue:D=[],onLiveEvent:v,onSearch:h,liveParams:b,metaData:M,dataProviderName:S}=e,V=Array.isArray(D)?D:[D],B=(0,Le.useCallback)(j=>{s(j.data.map(J=>({label:(0,Rt.default)(J,l),value:(0,Rt.default)(J,T)})))},[l,T]),A=c!=null?c:p,U=kt({resource:f,ids:V,queryOptions:{...A,enabled:V.length>0&&((ie=c==null?void 0:c.enabled)!=null?ie:!0),onSuccess:j=>{var J;B(j),(J=A==null?void 0:A.onSuccess)==null||J.call(A,j)}},metaData:M,liveMode:"off",dataProviderName:S}),N=(0,Le.useCallback)(j=>{a(j.data.map(J=>({label:(0,Rt.default)(J,l),value:(0,Rt.default)(J,T)})))},[l,T]),w=qe({resource:f,config:{sort:R,filters:u.concat(t),pagination:{current:C==null?void 0:C.current,pageSize:(fe=C==null?void 0:C.pageSize)!=null?fe:i},hasPagination:g},queryOptions:{...p,onSuccess:j=>{var J;N(j),(J=p==null?void 0:p.onSuccess)==null||J.call(p,j)}},successNotification:y,errorNotification:m,metaData:M,liveMode:x,liveParams:b,onLiveEvent:v,dataProviderName:S}),te=j=>{if(h){r(h(j));return}if(j)r([{field:l,operator:"contains",value:j}]);else{r([]);return}};return{queryResult:w,defaultValueQueryResult:U,options:(0,Le.useMemo)(()=>(0,va.default)([...o,...n],"value"),[o,n]),onSearch:(0,ba.default)(te,P)}};var ve=require("react"),Ar=E(require("qs")),Br=E(require("lodash/differenceWith")),Nr=E(require("lodash/isEqual"));var Cn=[],Rn=[];function xn({initialCurrent:e=1,initialPageSize:t=10,hasPagination:r=!0,initialSorter:o,permanentSorter:a=Rn,defaultSetFilterBehavior:n="merge",initialFilter:s,permanentFilter:f=Cn,syncWithLocation:R,resource:u,successNotification:l,errorNotification:T,queryOptions:P,liveMode:y,onLiveEvent:m,liveParams:c,metaData:p,dataProviderName:i}={}){var ue;let{syncWithLocation:C}=Xt(),g=R!=null?R:C,{useLocation:x,useParams:D}=Q(),{search:v,pathname:h}=x(),b=br(y),{parsedCurrent:M,parsedPageSize:S,parsedSorter:V,parsedFilters:B}=nt(v),A=M||e,U=S||t,N=V.length?V:o,w=B.length?B:s,{resource:te}=D(),{replace:ie}=Z(),j=ee()(u!=null?u:te),[J,ye]=(0,ve.useState)(pt(a,N!=null?N:[])),[z,Re]=(0,ve.useState)(ut(f,w!=null?w:[])),[we,Dt]=(0,ve.useState)(A),[xe,vt]=(0,ve.useState)(U),nr=({pagination:{current:H,pageSize:Y},sorter:Ae,filters:de})=>{let Pe=Ar.default.parse(v==null?void 0:v.substring(1)),Be=st({pagination:{pageSize:Y,current:H},sorter:Ae,filters:de,...Pe});return`${h}?${Be}`};(0,ve.useEffect)(()=>{v===""&&(Dt(A),vt(U),ye(pt(a,N!=null?N:[])),Re(ut(f,w!=null?w:[])))},[v]);let bt=()=>{let{sorter:H,filters:Y,pageSize:Ae,current:de,...Pe}=Ar.default.parse(v,{ignoreQueryPrefix:!0});return Pe};(0,ve.useEffect)(()=>{if(g){let H=bt(),Y=st({...r?{pagination:{pageSize:xe,current:we}}:{},sorter:(0,Br.default)(J,a,Nr.default),filters:(0,Br.default)(z,f,Nr.default),...H});return ie(`${h}?${Y}`,void 0,{shallow:!0})}},[g,we,xe,J,z]);let Qe=qe({resource:j.name,config:{hasPagination:r,pagination:{current:we,pageSize:xe},filters:Ne(f,z),sort:it(a,J)},queryOptions:P,successNotification:l,errorNotification:T,metaData:p,liveMode:b,liveParams:c,onLiveEvent:m,dataProviderName:i}),Hr=H=>{Re(Y=>Ne(f,H,Y))},Kr=H=>{Re(Ne(f,H))},Wr=H=>{Re(Y=>Ne(f,H(Y)))},Or=(H,Y=n)=>{typeof H=="function"?Wr(H):Y==="replace"?Kr(H):Hr(H)},$r=H=>{ye(()=>it(a,H))},ht=(0,ve.useMemo)(()=>{var H,Y;return r?{current:we,setCurrent:Dt,pageSize:xe,setPageSize:vt,pageCount:xe?Math.ceil(((Y=(H=Qe.data)==null?void 0:H.total)!=null?Y:0)/xe):1}:{current:void 0,setCurrent:void 0,pageSize:void 0,setPageSize:void 0,pageCount:void 0}},[r,we,xe,(ue=Qe.data)==null?void 0:ue.total]);return{tableQueryResult:Qe,sorter:J,setSorter:$r,filters:z,setFilters:Or,...ht,createLinkForSyncWithLocation:nr}}var Vr=require("react"),xt=require("@tanstack/react-query");var kr=E(require("react")),Ke=kr.default.createContext({}),ha=({create:e,get:t,update:r,children:o})=>kr.default.createElement(Ke.Provider,{value:{create:e,get:t,update:r}},o);var Ve=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,xt.useQueryClient)(),o=(0,Vr.useContext)(Ke),{resources:a}=(0,Vr.useContext)(Fe),{data:n,refetch:s,isLoading:f}=Lt({queryOptions:{enabled:!!o}}),R=(0,xt.useMutation)(async l=>{var m,c,p;let T=a.find(i=>i.name===l.resource),P=(c=(m=T==null?void 0:T.options)==null?void 0:m.auditLog)==null?void 0:c.permissions;if(P&&!dr(P,l.action))return;let y;return f&&(y=await s()),await((p=o.create)==null?void 0:p.call(o,{...l,author:n!=null?n:y==null?void 0:y.data}))},e),u=(0,xt.useMutation)(async l=>{var T;return await((T=o.update)==null?void 0:T.call(o,l))},{onSuccess:l=>{if(l!=null&&l.resource){let T=O(l==null?void 0:l.resource);r.invalidateQueries(T.logList())}},...t});return{log:R,rename:u}};var Ea=require("react"),Ma=require("@tanstack/react-query");var Pn=({resource:e,action:t,meta:r,author:o,metaData:a,queryOptions:n})=>{let{get:s}=(0,Ea.useContext)(Ke),f=O(e,void 0,a);return(0,Ma.useQuery)(f.logList(r),()=>{var u;return(u=s==null?void 0:s({resource:e,action:t,author:o,meta:r,metaData:a}))!=null?u:Promise.resolve([])},{enabled:typeof s<"u",...n,retry:!1})};var La=require("react"),Ia=require("@tanstack/react-query");var ce=()=>{let{resources:e}=k(),t=(0,Ia.useQueryClient)();return(0,La.useCallback)(({resource:o,dataProviderName:a,invalidates:n,id:s})=>{if(n===!1)return;let f=O(o,I(o,a,e));n.forEach(R=>{switch(R){case"all":t.invalidateQueries(f.all);break;case"list":t.invalidateQueries(f.list());break;case"many":t.invalidateQueries(f.many());break;case"resourceAll":t.invalidateQueries(f.resourceAll);break;case"detail":t.invalidateQueries(f.detail(s||""));break;default:break}})},[])};var Ua=require("react"),Sa=E(require("warn-once"));var Dn=()=>{var R;let{useParams:e}=Q(),{i18nProvider:t}=(0,Ua.useContext)(Ce),r=L(),{resources:o,resource:a}=k(),{action:n}=e(),s=[];if(!(a!=null&&a.name))return{breadcrumbs:s};let f=u=>{var T;let l=o.find(P=>P.name===u);l&&(l.parentName&&f(l.parentName),s.push({label:(T=l.label)!=null?T:r(`${l.name}.${l.name}`,Ue(l.name)),href:l.list?`/${l.route}`:void 0,icon:l.icon}))};if(a.parentName&&f(a.parentName),s.push({label:(R=a.label)!=null?R:r(`${a.name}.${a.name}`,Ue(a.name)),href:a.list?`/${a.route}`:void 0,icon:a.icon}),n){let u=`actions.${n}`,l=r(u);typeof t<"u"&&l===u?((0,Sa.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${n}" action. Please add "actions.${n}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),s.push({label:r(`buttons.${n}`,Ue(n))})):s.push({label:r(u,Ue(n))})}return{breadcrumbs:s}};var We=E(require("react"));var wa=()=>{let{resources:e}=k(),t=L(),{useLocation:r,useParams:o}=Q(),a=r(),n=o(),{hasDashboard:s}=Se(),f=We.default.useMemo(()=>{let y=e.find(c=>(a==null?void 0:a.pathname)===`/${c.route}`);y||(y=e.find(c=>(n==null?void 0:n.resource)===c.route));let m;return y!=null&&y.route?m=`/${y==null?void 0:y.route}`:a.pathname==="/"?m="/":m=a==null?void 0:a.pathname,m},[e,a,n]),R=We.default.useMemo(()=>e.map(y=>{var c,p;let m=`/${y.route}`;return{...y,icon:y.icon,route:m,key:(c=y.key)!=null?c:m,label:(p=y.label)!=null?p:t(`${y.name}.${y.name}`,ke(y.name,"plural"))}}),[e,s,t]),u=We.default.useMemo(()=>ct(R),[R]),l=We.default.useCallback((y,m,c=!1)=>{let p=m.find(i=>c?i.name===y:i.route===y);if(p){let i=[];return c&&p.route&&i.unshift(p.route),p.parentName&&i.unshift(...l(p.parentName,m,!0)),i}return[]},[]),T=We.default.useMemo(()=>l(f,R),[f,R]);return We.default.useMemo(()=>{let y=m=>m.reduce((c,p)=>{var i,C;return p.children.length>0&&((i=p.options)==null?void 0:i.hide)!==!0?[...c,{...p,children:y(p.children)}]:typeof p.list<"u"&&((C=p.options)==null?void 0:C.hide)!==!0?[...c,p]:c},[]);return{defaultOpenKeys:T,selectedKey:f,menuItems:y(u)}},[T,f,u])};var Qa=()=>{let[e,t]=(0,be.useState)(),{push:r}=Z(),o=L(),a=["edit","create","show"],{useParams:n}=Q(),s=n(),f=ee();return(0,be.useEffect)(()=>{if(s.resource){let R=f(s.resource);s.action&&a.includes(s.action)&&!R[s.action]&&t(o("pages.error.info",{action:s.action,resource:s.resource},`You may have forgotten to add the "${s.action}" component to "${s.resource}" resource.`))}},[s]),be.default.createElement(be.default.Fragment,null,be.default.createElement("h1",null,o("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&be.default.createElement("p",null,e),be.default.createElement("button",{onClick:()=>r("/")},o("pages.error.backHome",void 0,"Back Home")))};var X=E(require("react"));var Bt=()=>{let[e,t]=(0,X.useState)(""),[r,o]=(0,X.useState)(""),a=L(),{mutate:n}=ze();return X.default.createElement(X.default.Fragment,null,X.default.createElement("h1",null,a("pages.login.title","Sign in your account")),X.default.createElement("form",{onSubmit:s=>{s.preventDefault(),n({username:e,password:r})}},X.default.createElement("table",null,X.default.createElement("tbody",null,X.default.createElement("tr",null,X.default.createElement("td",null,a("pages.login.username",void 0,"username"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:s=>t(s.target.value)}))),X.default.createElement("tr",null,X.default.createElement("td",null,a("pages.login.password",void 0,"password"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:s=>o(s.target.value)}))))),X.default.createElement("br",null),X.default.createElement("input",{type:"submit",value:"login"})))};var Oe=E(require("react"));var K=E(require("react"));var Aa=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:o,contentProps:a,wrapperProps:n,renderContent:s,formProps:f})=>{let{Link:R}=Q(),[u,l]=(0,K.useState)(""),[T,P]=(0,K.useState)(""),[y,m]=(0,K.useState)(!1),c=L(),{mutate:p}=ze(),i=(x,D)=>x?typeof x=="string"?K.default.createElement(R,{to:x},D):x:null,C=()=>e?e.map(x=>{var D;return K.default.createElement("div",{key:x.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},K.default.createElement("button",{onClick:()=>p({providerName:x.name}),style:{display:"flex",alignItems:"center"}},x==null?void 0:x.icon,(D=x.label)!=null?D:K.default.createElement("label",null,x.label)))}):null,g=K.default.createElement("div",{...a},K.default.createElement("h1",{style:{textAlign:"center"}},c("pages.login.title","Sign in to your account")),C(),K.default.createElement("hr",null),K.default.createElement("form",{onSubmit:x=>{x.preventDefault(),p({email:u,password:T,remember:y})},...f},K.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},K.default.createElement("label",null,c("pages.login.fields.email","Email")),K.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:u,onChange:x=>l(x.target.value)}),K.default.createElement("label",null,c("pages.login.fields.password","Password")),K.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:T,onChange:x=>P(x.target.value)}),o!=null?o:K.default.createElement(K.default.Fragment,null,K.default.createElement("label",null,c("pages.login.buttons.rememberMe","Remember me"),K.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:y,value:y.toString(),onChange:()=>{m(!y)}}))),K.default.createElement("br",null),r!=null?r:i("/forgot-password",c("pages.login.buttons.forgotPassword","Forgot password?")),K.default.createElement("input",{type:"submit",value:c("pages.login.signin","Sign in")}),t!=null?t:K.default.createElement("span",null,c("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",i("/register",c("pages.login.register","Sign up"))))));return K.default.createElement("div",{...n},s?s(g):g)};var _=E(require("react"));var Ba=({providers:e,loginLink:t,wrapperProps:r,contentProps:o,renderContent:a,formProps:n})=>{let{Link:s}=Q(),[f,R]=(0,_.useState)(""),[u,l]=(0,_.useState)(""),T=L(),{mutate:P,isLoading:y}=Ut(),m=(i,C)=>i?typeof i=="string"?_.default.createElement(s,{to:i},C):i:null,c=()=>e?e.map(i=>{var C;return _.default.createElement("div",{key:i.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},_.default.createElement("button",{onClick:()=>P({providerName:i.name}),style:{display:"flex",alignItems:"center"}},i==null?void 0:i.icon,(C=i.label)!=null?C:_.default.createElement("label",null,i.label)))}):null,p=_.default.createElement("div",{...o},_.default.createElement("h1",{style:{textAlign:"center"}},T("pages.register.title","Sign up for your account")),c(),_.default.createElement("hr",null),_.default.createElement("form",{onSubmit:i=>{i.preventDefault(),P({email:f,password:u})},...n},_.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},_.default.createElement("label",null,T("pages.register.fields.email","Email")),_.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:f,onChange:i=>R(i.target.value)}),_.default.createElement("label",null,T("pages.register.fields.password","Password")),_.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:u,onChange:i=>l(i.target.value)}),_.default.createElement("input",{type:"submit",value:T("pages.register.buttons.submit","Sign up"),disabled:y}),t!=null?t:_.default.createElement(_.default.Fragment,null,_.default.createElement("span",null,T("pages.login.buttons.haveAccount","Have an account?")," ",m("login",T("pages.login.signin","Sign in")))))));return _.default.createElement("div",{...r},a?a(p):p)};var ae=E(require("react"));var Na=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:o,formProps:a})=>{let n=L(),{Link:s}=Q(),[f,R]=(0,ae.useState)(""),{mutate:u,isLoading:l}=St(),T=(y,m)=>y?typeof y=="string"?ae.default.createElement(s,{to:y},m):y:null,P=ae.default.createElement("div",{...r},ae.default.createElement("h1",{style:{textAlign:"center"}},n("pages.forgotPassword.title","Forgot your password?")),ae.default.createElement("hr",null),ae.default.createElement("form",{onSubmit:y=>{y.preventDefault(),u({email:f})},...a},ae.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ae.default.createElement("label",null,n("pages.forgotPassword.fields.email","Email")),ae.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:f,onChange:y=>R(y.target.value)}),ae.default.createElement("input",{type:"submit",disabled:l,value:n("pages.forgotPassword.buttons.submit","Send reset instructions")}),ae.default.createElement("br",null),e!=null?e:ae.default.createElement("span",null,n("pages.register.buttons.haveAccount","Have an account? ")," ",T("/login",n("pages.login.signin","Sign in"))))));return ae.default.createElement("div",{...t},o?o(P):P)};var ne=E(require("react"));var ka=({wrapperProps:e,contentProps:t,renderContent:r,formProps:o})=>{let a=L(),{mutate:n,isLoading:s}=wt(),[f,R]=(0,ne.useState)(""),[u,l]=(0,ne.useState)(""),T=ne.default.createElement("div",{...t},ne.default.createElement("h1",{style:{textAlign:"center"}},a("pages.updatePassword.title","Update Password")),ne.default.createElement("hr",null),ne.default.createElement("form",{onSubmit:P=>{P.preventDefault(),n({password:f,confirmPassword:u})},...o},ne.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ne.default.createElement("label",null,a("pages.updatePassword.fields.password","New Password")),ne.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:f,onChange:P=>R(P.target.value)}),ne.default.createElement("label",null,a("pages.updatePassword.fields.confirmPassword","Confirm New Password")),ne.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:u,onChange:P=>l(P.target.value)}),ne.default.createElement("input",{type:"submit",disabled:s,value:a("pages.updatePassword.buttons.submit","Update")}))));return ne.default.createElement("div",{...e},r?r(T):T)};var Va=e=>{let{type:t}=e;return Oe.default.createElement(Oe.default.Fragment,null,(()=>{switch(t){case"register":return Oe.default.createElement(Ba,{...e});case"forgotPassword":return Oe.default.createElement(Na,{...e});case"updatePassword":return Oe.default.createElement(ka,{...e});default:return Oe.default.createElement(Aa,{...e})}})())};var se=E(require("react")),tr=()=>se.default.createElement(se.default.Fragment,null,se.default.createElement("h1",null,"Welcome on board"),se.default.createElement("p",null,"Your configuration is completed."),se.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",se.default.createElement("code",null,"`resources`")," property of ",se.default.createElement("code",null,"`<Refine>`")),se.default.createElement("div",{style:{display:"flex",gap:8}},se.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Documentation")),se.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Examples")),se.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},se.default.createElement("button",null,"Community"))));var q=E(require("react")),Pt=require("@tanstack/react-query"),za=require("@tanstack/react-query-devtools");var Ha=require("react");var Ie=require("react");var vn="3.99.4",Fa=()=>{let e=(0,Ie.useContext)(W),t=(0,Ie.useContext)(Ke),r=(0,Ie.useContext)(Me),o=(0,Ie.useContext)(Ct),a=(0,Ie.useContext)(mt),{i18nProvider:n}=(0,Ie.useContext)(Ce),s=(0,Ie.useContext)(yt),f=(0,Ie.useContext)(He),{resources:R}=k(),u=e.isProvided,l=!!t.create||!!t.get||!!t.update,T=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),P=!!o.useHistory||!!o.Link||!!o.Prompt||!!o.useLocation||!!o.useParams,y=!!a,m=!!(n!=null&&n.changeLocale)||!!(n!=null&&n.getLocale)||!!(n!=null&&n.translate),c=!!s.close||!!s.open,p=!!f.can;return{providers:{auth:u,auditLog:l,live:T,router:P,data:y,i18n:m,notification:c,accessControl:p},version:vn,resourceCount:R.length}};var bn=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},Ka=()=>{let e=Fa();return(0,Ha.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${bn(e)}`},[]),null};var Ga=require("react");var Wa=require("react"),Oa=E(require("lodash/isEqual")),$a=e=>{let t=(0,Wa.useRef)(e);return(0,Oa.default)(t.current,e)||(t.current=e),t.current};var Fr=(e,t)=>{let r=$a(t);return(0,Ga.useMemo)(e,r)};var _a=({authProvider:e,dataProvider:t,routerProvider:r,notificationProvider:o,accessControlProvider:a,auditLogProvider:n,resources:s,DashboardPage:f,ReadyPage:R,LoginPage:u,catchAll:l,children:T,liveProvider:P,i18nProvider:y,mutationMode:m,syncWithLocation:c,warnWhenUnsavedChanges:p,undoableTimeout:i,Title:C,Layout:g,Sider:x,Header:D,Footer:v,OffLayoutArea:h,reactQueryClientConfig:b,reactQueryDevtoolConfig:M,liveMode:S,onLiveEvent:V,disableTelemetry:B,options:A})=>{let{optionsWithDefaults:U,disableTelemetryWithDefault:N,reactQueryWithDefaults:w}=fr({options:A,disableTelemetry:B,liveMode:S,mutationMode:m,reactQueryClientConfig:b,reactQueryDevtoolConfig:M,syncWithLocation:c,warnWhenUnsavedChanges:p,undoableTimeout:i}),te=Fr(()=>{var ye;return w.clientConfig instanceof Pt.QueryClient?w.clientConfig:new Pt.QueryClient({...w.clientConfig,defaultOptions:{...w.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(ye=w.clientConfig.defaultOptions)==null?void 0:ye.queries}}})},[w.clientConfig]),fe=q.default.useMemo(()=>typeof o=="function"?o:()=>o!=null?o:{},[o])(),j=Fr(()=>{let ye=[];return s==null||s.forEach(z=>{var Re;ye.push({key:z.key,name:z.name,label:(Re=z.options)==null?void 0:Re.label,icon:z.icon,route:_e(z,s),canCreate:!!z.create,canEdit:!!z.edit,canShow:!!z.show,canDelete:z.canDelete,create:z.create,show:z.show,list:z.list,edit:z.edit,options:z.options,parentName:z.parentName})}),ye},[s]);if(j.length===0)return R?q.default.createElement(R,null):q.default.createElement(tr,null);let{RouterComponent:J=q.default.Fragment}=r;return q.default.createElement(Pt.QueryClientProvider,{client:te},q.default.createElement(ea,{...fe},q.default.createElement(_r,{...e!=null?e:{},isProvided:Boolean(e)},q.default.createElement($o,{...t},q.default.createElement(_o,{liveProvider:P},q.default.createElement(ga,{...r},q.default.createElement(Zo,{resources:j},q.default.createElement(oa,{i18nProvider:y},q.default.createElement(Ra,{...a!=null?a:{}},q.default.createElement(ha,{...n!=null?n:{}},q.default.createElement(Tr,null,q.default.createElement(Lo,{mutationMode:U.mutationMode,warnWhenUnsavedChanges:U.warnWhenUnsavedChanges,syncWithLocation:U.syncWithLocation,Title:C,undoableTimeout:U.undoableTimeout,catchAll:l,DashboardPage:f,LoginPage:u,Layout:g,Sider:x,Footer:v,Header:D,OffLayoutArea:h,hasDashboard:!!f,liveMode:U.liveMode,onLiveEvent:V,options:U},q.default.createElement(ia,null,q.default.createElement(J,null,T,!N&&q.default.createElement(Ka,null),q.default.createElement(rr,null)))))))))))))),w.devtoolConfig===!1?null:q.default.createElement(za.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...w.devtoolConfig}))};var or=require("react");var gr=({notification:e})=>{let t=L(),{notificationDispatch:r}=ge(),{open:o}=re(),[a,n]=(0,or.useState)(),s=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||o==null||o({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:ot(e.seconds)},`You have ${ot(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:ot(e.seconds)}),e.seconds>0)){a&&clearTimeout(a);let f=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);n(f)}};return(0,or.useEffect)(()=>{s()},[e]),null};var tt=E(require("react"));var qa=({children:e,Layout:t,Sider:r,Header:o,Title:a,Footer:n,OffLayoutArea:s})=>{let{Layout:f,Footer:R,Header:u,Sider:l,Title:T,OffLayoutArea:P}=Se(),y=t!=null?t:f;return tt.default.createElement(y,{Sider:r!=null?r:l,Header:o!=null?o:u,Footer:n!=null?n:R,Title:a!=null?a:T,OffLayoutArea:s!=null?s:P},e,tt.default.createElement(hn,null))},hn=()=>{let{Prompt:e}=Q(),t=L(),{warnWhen:r,setWarnWhen:o}=Xe(),a=n=>(n.preventDefault(),n.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),n.returnValue);return(0,tt.useEffect)(()=>(r&&window.addEventListener("beforeunload",a),window.removeEventListener("beforeunload",a)),[r]),tt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:o})};var $e=E(require("react"));var ja=({children:e,fallback:t,loading:r})=>{let{isSuccess:o,isLoading:a,isError:n}=Qt(),{replace:s}=Z(),{useLocation:f}=Q(),{pathname:R,search:u}=f();if(a)return $e.default.createElement($e.default.Fragment,null,r)||null;if(n){if(!t){let l=`${R}${u}`;return R.includes("/login")||s(`/login?to=${encodeURIComponent(l)}`),null}return $e.default.createElement($e.default.Fragment,null,t)}return o?$e.default.createElement($e.default.Fragment,null,e):null};var ar=require("react");var rr=()=>{let{useLocation:e}=Q(),{checkAuth:t}=(0,ar.useContext)(W),r=e();return(0,ar.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null};var Ge=E(require("react"));var Ya=({resource:e,action:t,params:r,fallback:o,children:a,...n})=>{let{data:s}=Qr({resource:e,action:t,params:r});return s!=null&&s.can?Ge.default.isValidElement(a)?Ge.default.cloneElement(a,n):Ge.default.createElement(Ge.default.Fragment,null,a):(s==null?void 0:s.can)===!1?Ge.default.createElement(Ge.default.Fragment,null,o!=null?o:null):null};
//# sourceMappingURL=index.js.map