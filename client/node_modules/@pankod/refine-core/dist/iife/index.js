(()=>{var Zs=Object.create;var ar=Object.defineProperty;var Js=Object.getOwnPropertyDescriptor;var Xs=Object.getOwnPropertyNames;var ea=Object.getPrototypeOf,ta=Object.prototype.hasOwnProperty;var T=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var ra=(e,t)=>{for(var r in t)ar(e,r,{get:t[r],enumerable:!0})},sr=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Xs(t))!ta.call(e,s)&&s!==r&&ar(e,s,{get:()=>t[s],enumerable:!(o=Js(t,s))||o.enumerable});return e},Pe=(e,t,r)=>(sr(e,t,"default"),r&&sr(r,t,"default")),E=(e,t,r)=>(r=e!=null?Zs(ea(e)):{},sr(t||!e||!e.__esModule?ar(r,"default",{value:e,enumerable:!0}):r,e));var Ce={};ra(Ce,{AuthPage:()=>ks,Authenticated:()=>qs,CanAccess:()=>Ys,ErrorComponent:()=>Qs,LayoutWrapper:()=>js,LoginPage:()=>Qt,ReadyPage:()=>Xt,Refine:()=>_s,RouteChangeHandler:()=>er,UndoableQueue:()=>Cr,createTreeView:()=>pt,file2Base64:()=>Eo,getDefaultFilter:()=>ho,getDefaultSortOrder:()=>vo,getNextPageParam:()=>lt,getPreviousPageParam:()=>dt,handleUseParams:()=>pr,importCSVMapper:()=>st,parseTableParams:()=>at,parseTableParamsFromQuery:()=>Po,routeGenerator:()=>_e,setInitialFilters:()=>ut,setInitialSorters:()=>ct,stringifyTableParams:()=>nt,unionFilters:()=>Be,unionSorters:()=>it,useApiUrl:()=>Ho,useAuthenticated:()=>Lt,useBreadcrumb:()=>Ra,useCan:()=>Qr,useCanWithoutCache:()=>fa,useCancelNotification:()=>ye,useCheckError:()=>G,useCreate:()=>Je,useCreateMany:()=>$t,useCustom:()=>$o,useCustomMutation:()=>Wo,useDataProvider:()=>H,useDelete:()=>Qo,useDeleteMany:()=>ko,useExport:()=>ua,useForgotPassword:()=>St,useForm:()=>ca,useGetIdentity:()=>Et,useGetLocale:()=>as,useHandleNotification:()=>K,useImport:()=>la,useInfiniteList:()=>zo,useInvalidate:()=>pe,useIsExistAuthentication:()=>Co,useList:()=>je,useLiveMode:()=>vr,useLog:()=>ke,useLogList:()=>xa,useLogin:()=>ze,useLogout:()=>Mt,useMany:()=>Vt,useMenu:()=>ws,useModal:()=>da,useMutationMode:()=>de,useNavigation:()=>Z,useNotification:()=>re,useOne:()=>qe,usePermissions:()=>Yr,usePublish:()=>ce,useRedirectionAfterSubmission:()=>Ir,useRefineContext:()=>Le,useRegister:()=>Ut,useResource:()=>N,useResourceSubscription:()=>Ee,useResourceWithRoute:()=>ee,useRouterContext:()=>Q,useSelect:()=>ya,useSetLocale:()=>ss,useShow:()=>pa,useSubscription:()=>ia,useSyncWithLocation:()=>Zt,useTable:()=>ga,useTitle:()=>ps,useTranslate:()=>U,useUpdate:()=>Ht,useUpdateMany:()=>Bo,useUpdatePassword:()=>It,useWarnAboutChange:()=>Xe,userFriendlyResourceName:()=>Ne});Pe(Ce,T("@tanstack/react-query"));var ve=E(T("react"));var jr=T("react");var nr=E(T("react")),zr=T("@tanstack/react-query");var O=nr.default.createContext({}),_r=({children:e,isProvided:t,...r})=>{let{replace:o}=Z(),s=(0,zr.useQueryClient)(),a=()=>{s.invalidateQueries(["useAuthenticated"]),s.invalidateQueries(["getUserIdentity"]),s.invalidateQueries(["usePermissions"])},n=async l=>{var y;try{let P=await((y=r.login)==null?void 0:y.call(r,l));return a(),Promise.resolve(P)}catch(P){return Promise.reject(P)}},m=async l=>{var y;try{let P=await((y=r.register)==null?void 0:y.call(r,l));return a(),Promise.resolve(P)}catch(P){return Promise.reject(P)}},x=async l=>{var y;try{let P=await((y=r.logout)==null?void 0:y.call(r,l));return a(),Promise.resolve(P)}catch(P){return Promise.reject(P)}},u=async l=>{var y;try{return await((y=r.checkAuth)==null?void 0:y.call(r,l)),Promise.resolve()}catch(P){return P!=null&&P.redirectPath&&o(P.redirectPath),Promise.reject(P)}};return nr.default.createElement(O.Provider,{value:{...r,login:n,logout:x,checkAuth:u,register:m,isProvided:t}},e)};var qr=T("@tanstack/react-query"),Yr=e=>{let{getPermissions:t}=(0,jr.useContext)(O);return(0,qr.useQuery)(["usePermissions"],t!=null?t:()=>Promise.resolve(void 0),{enabled:!!t,...e})};var Zr=E(T("react")),Jr=T("@tanstack/react-query");var Et=({queryOptions:e}={})=>{let{getUserIdentity:t}=Zr.default.useContext(O);return(0,Jr.useQuery)(["getUserIdentity"],t!=null?t:()=>Promise.resolve({}),{enabled:!!t,retry:!1,...e})};var Xr=E(T("react")),eo=T("@tanstack/react-query");var Mt=({mutationOptions:e}={})=>{let{push:t}=Z(),{logout:r}=Xr.default.useContext(O),{open:o}=re();return(0,eo.useMutation)(["useLogout"],r,{onSuccess:(a,n)=>{var x;let m=(x=n==null?void 0:n.redirectPath)!=null?x:a;if(m!==!1){if(m){t(m);return}t("/login")}},onError:a=>{o==null||o({key:"useLogout-error",type:"error",message:(a==null?void 0:a.name)||"Logout Error",description:(a==null?void 0:a.message)||"Something went wrong during logout"})},...e})};var to=E(T("react")),ro=T("@tanstack/react-query"),oo=E(T("qs"));var ze=({mutationOptions:e}={})=>{let{replace:t}=Z(),{login:r}=to.default.useContext(O),{useLocation:o}=Q(),{search:s}=o(),{close:a,open:n}=re(),{to:m}=oo.default.parse(s,{ignoreQueryPrefix:!0});return(0,ro.useMutation)(["useLogin"],r,{onSuccess:u=>{if(m)return t(m);u!==!1&&t(typeof u=="string"?u:"/"),a==null||a("login-error")},onError:u=>{n==null||n({message:(u==null?void 0:u.name)||"Login Error",description:(u==null?void 0:u.message)||"Invalid credentials",key:"login-error",type:"error"})},...e})};var so=E(T("react")),ao=T("@tanstack/react-query");var Ut=({mutationOptions:e}={})=>{let{replace:t}=Z(),{register:r}=so.default.useContext(O),{close:o,open:s}=re();return(0,ao.useMutation)(["useRegister"],r,{onSuccess:n=>{n!==!1&&t(n||"/"),o==null||o("register-error")},onError:n=>{s==null||s({message:(n==null?void 0:n.name)||"Register Error",description:(n==null?void 0:n.message)||"Error while registering",key:"register-error",type:"error"})},...e})};var no=E(T("react")),io=T("@tanstack/react-query");var St=({mutationOptions:e}={})=>{let{replace:t}=Z(),{forgotPassword:r}=no.default.useContext(O),{close:o,open:s}=re();return(0,io.useMutation)(["useForgotPassword"],r,{onSuccess:n=>{n!==!1&&n&&t(n),o==null||o("forgot-password-error")},onError:n=>{s==null||s({message:(n==null?void 0:n.name)||"Forgot Password Error",description:(n==null?void 0:n.message)||"Error while resetting password",key:"forgot-password-error",type:"error"})},...e})};var uo=E(T("react")),co=T("@tanstack/react-query"),po=E(T("qs"));var It=({mutationOptions:e}={})=>{let{replace:t}=Z(),{updatePassword:r}=uo.default.useContext(O),{close:o,open:s}=re(),{useLocation:a}=Q(),{search:n}=a(),m=po.default.parse(n,{ignoreQueryPrefix:!0});return(0,co.useMutation)(["useUpdatePassword"],async u=>r==null?void 0:r({...m,...u}),{onSuccess:u=>{u!==!1&&u&&t(u),o==null||o("update-password-error")},onError:u=>{s==null||s({message:(u==null?void 0:u.name)||"Update Password Error",description:(u==null?void 0:u.message)||"Error while updating password",key:"update-password-error",type:"error"})},...e})};var lo=T("react"),mo=T("@tanstack/react-query");var Lt=e=>{let{checkAuth:t}=(0,lo.useContext)(O);return(0,mo.useQuery)(["useAuthenticated",e],async()=>{var o;return(o=await(t==null?void 0:t(e)))!=null?o:{}},{retry:!1})};var fo=E(T("react")),yo=T("@tanstack/react-query");var G=()=>{let{checkError:e}=fo.default.useContext(O),{mutate:t}=Mt();return(0,yo.useMutation)(["useCheckError"],e,{onError:o=>{t({redirectPath:o})}})};var To=T("react");var Co=()=>{let{isProvided:e}=(0,To.useContext)(O);return e||!1};var So=T("@tanstack/react-query");var ot=e=>e/1e3;var go=E(T("lodash/zip")),xo=E(T("lodash/fromPairs")),st=(e,t=r=>r)=>{let[r,...o]=e;return o.map(s=>(0,xo.default)((0,go.default)(r,s))).map((s,a,n)=>t.call(void 0,s,a,n))};var cr=E(T("pluralize"));var wt=E(T("qs")),ir=E(T("lodash/unionWith")),ur=E(T("lodash/differenceWith")),Ro=E(T("warn-once")),at=e=>{let{current:t,pageSize:r,sorter:o,filters:s}=wt.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:o!=null?o:[],parsedFilters:s!=null?s:[]}},Po=e=>{let t=wt.default.stringify(e);return at(`/${t}`)},nt=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:o,filters:s,...a}=e;return wt.default.stringify({...a,...r||{},sorter:o,filters:s},t)},bo=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Do=(e,t)=>e.field==t.field,Be=(e,t,r=[])=>(t.filter(s=>(s.operator==="or"||s.operator==="and")&&!s.key).length>1&&(0,Ro.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,ir.default)(e,t,r,bo).filter(s=>s.value!==void 0&&s.value!==null&&(s.operator!=="or"||s.operator==="or"&&s.value.length!==0)&&(s.operator!=="and"||s.operator==="and"&&s.value.length!==0))),it=(e,t)=>(0,ir.default)(e,t,Do).filter(r=>r.order!==void 0&&r.order!==null),ut=(e,t)=>[...(0,ur.default)(t,e,bo),...e],ct=(e,t)=>[...(0,ur.default)(t,e,Do),...e],vo=(e,t)=>{if(!t)return;let r=t.find(o=>o.field===e);if(r)return r.order},ho=(e,t,r="eq")=>{let o=t==null?void 0:t.find(s=>{if(s.operator!=="or"&&s.operator!=="and"&&"field"in s){let{operator:a,field:n}=s;return n===e&&a===r}});if(o)return o.value||[]};var Eo=e=>new Promise((t,r)=>{let o=new FileReader,s=()=>{o.result&&(o.removeEventListener("load",s,!1),t(o.result))};o.addEventListener("load",s,!1),o.readAsDataURL(e.originFileObj),o.onerror=a=>(o.removeEventListener("load",s,!1),r(a))});var Ne=(e="",t)=>{let r=Ie(e);return t==="singular"?cr.default.singular(r):cr.default.plural(r)};var pr=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e;var W=(e,t,r)=>{let o=t||"default",s={all:[o],resourceAll:[o,e||""],list:a=>[...s.resourceAll,"list",{...a,...r}],many:a=>[...s.resourceAll,"getMany",a&&a.map(String),{...r}].filter(n=>n!==void 0),detail:a=>[...s.resourceAll,"detail",a==null?void 0:a.toString(),{...r}],logList:a=>["logList",e,a,r].filter(n=>n!==void 0)};return s};var lr=(e,t)=>!e||!t?!1:!!e.find(r=>r===t);var oa=e=>t=>e.parentName?t.name===e.parentName:!1,_e=(e,t)=>{var s,a,n,m,x;let r,o=(a=(s=e.options)==null?void 0:s.route)!=null?a:e.name;if(e.parentName){let u=t.find(oa(e));u!=null&&u.parentName?r=`${_e(u,t)}/${o}`:e.parentName&&(r=`${(x=(m=(n=u==null?void 0:u.options)==null?void 0:n.route)!=null?m:u==null?void 0:u.name)!=null?x:e.parentName}/${o}`)}else r=o;return r};var pt=e=>{var n,m,x;let t=[],r={},o={},s,a;for(let u=0;u<e.length;u++){s=e[u];let l=(x=(m=s.route)!=null?m:(n=s.options)==null?void 0:n.route)!=null?x:"";r[l]=s,r[l].children=[],o[s.name]=s,o[s.name].children=[]}for(let u in r)r.hasOwnProperty(u)&&(a=r[u],a.parentName&&o[a.parentName]?o[a.parentName].children.push(a):t.push(a));return t};var Ie=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e);var mr=E(T("react"));var Mo=E(T("react")),dr=({children:e})=>Mo.default.createElement("div",null,e);var be={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},oe=mr.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:dr,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:be}),Uo=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,undoableTimeout:s,children:a,DashboardPage:n,Title:m,Layout:x=dr,Header:u,Sider:l,Footer:y,OffLayoutArea:P,LoginPage:f=Qt,catchAll:d,liveMode:p="off",onLiveEvent:c,options:i})=>mr.default.createElement(oe.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:o,Title:m,undoableTimeout:s,Layout:x,Header:u,Sider:l,Footer:y,OffLayoutArea:P,DashboardPage:n,LoginPage:f,catchAll:d,liveMode:p,onLiveEvent:c,options:i}},a);var fr=({options:e,disableTelemetry:t,liveMode:r,mutationMode:o,reactQueryClientConfig:s,reactQueryDevtoolConfig:a,syncWithLocation:n,undoableTimeout:m,warnWhenUnsavedChanges:x}={})=>{var P,f,d,p,c,i,g,C,R,b,D,h,v,M,L,k,V,A,I,B,w,te,ie,me;let u={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(f=(P=e==null?void 0:e.mutationMode)!=null?P:o)!=null?f:be.mutationMode,undoableTimeout:(p=(d=e==null?void 0:e.undoableTimeout)!=null?d:m)!=null?p:be.undoableTimeout,syncWithLocation:(i=(c=e==null?void 0:e.syncWithLocation)!=null?c:n)!=null?i:be.syncWithLocation,warnWhenUnsavedChanges:(C=(g=e==null?void 0:e.warnWhenUnsavedChanges)!=null?g:x)!=null?C:be.warnWhenUnsavedChanges,liveMode:(b=(R=e==null?void 0:e.liveMode)!=null?R:r)!=null?b:be.liveMode,redirect:{afterCreate:(h=(D=e==null?void 0:e.redirect)==null?void 0:D.afterCreate)!=null?h:be.redirect.afterCreate,afterClone:(M=(v=e==null?void 0:e.redirect)==null?void 0:v.afterClone)!=null?M:be.redirect.afterClone,afterEdit:(k=(L=e==null?void 0:e.redirect)==null?void 0:L.afterEdit)!=null?k:be.redirect.afterEdit}},l=(A=(V=e==null?void 0:e.disableTelemetry)!=null?V:t)!=null?A:!1,y={clientConfig:(w=(B=(I=e==null?void 0:e.reactQuery)==null?void 0:I.clientConfig)!=null?B:s)!=null?w:{},devtoolConfig:(me=(ie=(te=e==null?void 0:e.reactQuery)==null?void 0:te.devtoolConfig)!=null?ie:a)!=null?me:{}};return{optionsWithDefaults:u,disableTelemetryWithDefault:l,reactQueryWithDefaults:y}};var yr=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit}};var At=async(e,t,r)=>{let o=[];for(let[s,a]of e.entries())try{let n=await a();o.push(t(n,s))}catch(n){o.push(r(n,s))}return o};var S=(e,t,r)=>{var s;if(t)return t;let o=r==null?void 0:r.find(a=>a.name===e);return(s=o==null?void 0:o.options)!=null&&s.dataProviderName?o.options.dataProviderName:"default"};var he=async e=>({data:(await Promise.all(e)).map(t=>t.data)});var lt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let o=(t==null?void 0:t.current)||1,s=(t==null?void 0:t.pageSize)||10,a=Math.ceil((e.total||0)/s);return o<a?Number(o)+1:void 0},dt=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let o=(t==null?void 0:t.current)||1;return o===1?void 0:o-1};var je=({resource:e,config:t,queryOptions:r,successNotification:o,errorNotification:s,metaData:a,liveMode:n,onLiveEvent:m,liveParams:x,dataProviderName:u})=>{let{resources:l}=N(),y=H(),P=W(e,S(e,u,l),a),{getList:f}=y(S(e,u,l)),d=U(),{mutate:p}=G(),c=K(),i=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ee({resource:e,types:["*"],params:{metaData:a,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...x},channel:`resources/${e}`,enabled:i,liveMode:n,onLiveEvent:m}),(0,So.useQuery)(P.list(t),({queryKey:C,pageParam:R,signal:b})=>{let{hasPagination:D,...h}=t||{};return f({resource:e,...h,hasPagination:D,metaData:{...a,queryContext:{queryKey:C,pageParam:R,signal:b}}})},{...r,onSuccess:C=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,C);let R=typeof o=="function"?o(C,{metaData:a,config:t},e):o;c(R)},onError:C=>{var b;p(C),(b=r==null?void 0:r.onError)==null||b.call(r,C);let R=typeof s=="function"?s(C,{metaData:a,config:t},e):s;c(R,{key:`${e}-useList-notification`,message:d("notifications.error",{statusCode:C.statusCode},`Error (status code: ${C.statusCode})`),description:C.message,type:"error"})}})};var Io=T("@tanstack/react-query");var qe=({resource:e,id:t,queryOptions:r,successNotification:o,errorNotification:s,metaData:a,liveMode:n,onLiveEvent:m,liveParams:x,dataProviderName:u})=>{let{resources:l}=N(),y=H(),P=W(e,S(e,u,l),a),{getOne:f}=y(S(e,u,l)),d=U(),{mutate:p}=G(),c=K();return Ee({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,metaData:a,subscriptionType:"useOne",...x},enabled:r==null?void 0:r.enabled,liveMode:n,onLiveEvent:m}),(0,Io.useQuery)(P.detail(t),({queryKey:g,pageParam:C,signal:R})=>f({resource:e,id:t,metaData:{...a,queryContext:{queryKey:g,pageParam:C,signal:R}}}),{...r,onSuccess:g=>{var R;(R=r==null?void 0:r.onSuccess)==null||R.call(r,g);let C=typeof o=="function"?o(g,{id:t,metaData:a},e):o;c(C)},onError:g=>{var R;p(g),(R=r==null?void 0:r.onError)==null||R.call(r,g);let C=typeof s=="function"?s(g,{id:t,metaData:a},e):s;c(C,{key:`${t}-${e}-getOne-notification`,message:d("notifications.error",{statusCode:g.statusCode},`Error (status code: ${g.statusCode})`),description:g.message,type:"error"})}})};var Lo=T("@tanstack/react-query");var Vt=({resource:e,ids:t,queryOptions:r,successNotification:o,errorNotification:s,metaData:a,liveMode:n,onLiveEvent:m,liveParams:x,dataProviderName:u})=>{let{resources:l}=N(),y=H(),P=W(e,S(e,u,l),a),{getMany:f,getOne:d}=y(S(e,u,l)),p=U(),{mutate:c}=G(),i=K(),g=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ee({resource:e,types:["*"],params:{ids:t!=null?t:[],metaData:a,subscriptionType:"useMany",...x},channel:`resources/${e}`,enabled:g,liveMode:n,onLiveEvent:m}),(0,Lo.useQuery)(P.many(t),({queryKey:R,pageParam:b,signal:D})=>f?f({resource:e,ids:t,metaData:{...a,queryContext:{queryKey:R,pageParam:b,signal:D}}}):he(t.map(h=>d({resource:e,id:h,metaData:{...a,queryContext:{queryKey:R,pageParam:b,signal:D}}}))),{...r,onSuccess:R=>{var D;(D=r==null?void 0:r.onSuccess)==null||D.call(r,R);let b=typeof o=="function"?o(R,t,e):o;i(b)},onError:R=>{var D;c(R),(D=r==null?void 0:r.onError)==null||D.call(r,R);let b=typeof s=="function"?s(R,t,e):s;i(b,{key:`${t[0]}-${e}-getMany-notification`,message:p("notifications.error",{statusCode:R.statusCode},`Error (status code: ${R.statusCode})`),description:R.message,type:"error"})}})};var kt=T("@tanstack/react-query");var Ye=E(T("react")),Bt=E(T("lodash-es/isEqual"));var Nt=Ye.default.createContext({notifications:[],notificationDispatch:()=>!1}),sa=[],aa=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(o=>!((0,Bt.default)(o.id,t.payload.id)&&o.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(o=>!((0,Bt.default)(o.id,t.payload.id)&&o.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(o=>(0,Bt.default)(o.id,t.payload.id)&&o.resource==t.payload.resource?{...o,seconds:t.payload.seconds-1e3}:o);default:return e}},Tr=({children:e})=>{let[t,r]=(0,Ye.useReducer)(aa,sa),o={notifications:t,notificationDispatch:r};return Ye.default.createElement(Nt.Provider,{value:o},e,typeof window<"u"&&t.map(s=>Ye.default.createElement(Cr,{key:`${s.id}-${s.resource}-queue`,notification:s})))};var gr=E(T("pluralize"));var Ht=({mutationOptions:e}={})=>{let{resources:t}=N(),r=(0,kt.useQueryClient)(),o=H(),{mutationMode:s,undoableTimeout:a}=de(),n=U(),{mutate:m}=G(),x=ce(),{log:u}=ke(),{notificationDispatch:l}=ye(),y=K(),P=pe();return(0,kt.useMutation)(({id:d,values:p,resource:c,mutationMode:i,undoableTimeout:g,onCancel:C,metaData:R,dataProviderName:b})=>{let D=i!=null?i:s,h=g!=null?g:a;return D!=="undoable"?o(S(c,b,t)).update({resource:c,id:d,variables:p,metaData:R}):new Promise((M,L)=>{let k=()=>{o(S(c,b,t)).update({resource:c,id:d,variables:p,metaData:R}).then(A=>M(A)).catch(A=>L(A))},V=()=>{L({message:"mutationCancelled"})};C&&C(V),l({type:"ADD",payload:{id:d,resource:c,cancelMutation:V,doMutation:k,seconds:h,isSilent:!!C}})})},{onMutate:async({resource:d,id:p,mutationMode:c,values:i,dataProviderName:g})=>{let C=W(d,S(d,g,t)),R=r.getQueriesData(C.resourceAll),b=c!=null?c:s;return await r.cancelQueries(C.resourceAll,void 0,{silent:!0}),b!=="pessimistic"&&(r.setQueriesData(C.list(),D=>{if(!D)return null;let h=D.data.map(v=>{var M;return((M=v.id)==null?void 0:M.toString())===(p==null?void 0:p.toString())?{id:p,...i}:v});return{...D,data:h}}),r.setQueriesData(C.many(),D=>{if(!D)return null;let h=D.data.map(v=>{var M;return((M=v.id)==null?void 0:M.toString())===(p==null?void 0:p.toString())&&(v={id:p,...i}),v});return{...D,data:h}}),r.setQueriesData(C.detail(p),D=>D?{...D,data:{...D.data,...i}}:null)),{previousQueries:R,queryKey:C}},onSettled:(d,p,{id:c,resource:i,dataProviderName:g,invalidates:C=["list","many","detail"]})=>{P({resource:i,dataProviderName:S(i,g,t),invalidates:C,id:c}),l({type:"REMOVE",payload:{id:c,resource:i}})},onSuccess:(d,{id:p,resource:c,successNotification:i,dataProviderName:g,values:C,metaData:R},b)=>{var A;let D=gr.default.singular(c),h=typeof i=="function"?i(d,{id:p,values:C},c):i;y(h,{key:`${p}-${c}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${c}.${c}`,D)},`Successfully updated ${D}`),type:"success"}),x==null||x({channel:`resources/${c}`,type:"updated",payload:{ids:(A=d.data)!=null&&A.id?[d.data.id]:void 0},date:new Date});let v;if(b){let I=r.getQueryData(b.queryKey.detail(p));v=Object.keys(C).reduce((B,w)=>{var te;return B[w]=(te=I==null?void 0:I.data)==null?void 0:te[w],B},{})}let{fields:M,operation:L,variables:k,...V}=R||{};u==null||u.mutate({action:"update",resource:c,data:C,previousData:v,meta:{id:p,dataProviderName:S(c,g,t),...V}})},onError:(d,{id:p,resource:c,errorNotification:i,values:g},C)=>{if(C)for(let R of C.previousQueries)r.setQueryData(R[0],R[1]);if(d.message!=="mutationCancelled"){m==null||m(d);let R=gr.default.singular(c),b=typeof i=="function"?i(d,{id:p,values:g},c):i;y(b,{key:`${p}-${c}-notification`,message:n("notifications.editError",{resource:n(`${c}.${c}`,R),statusCode:d.statusCode},`Error when updating ${R} (status code: ${d.statusCode})`),description:d.message,type:"error"})}},...e})};var wo=T("@tanstack/react-query"),xr=E(T("pluralize"));var Je=({mutationOptions:e}={})=>{let{mutate:t}=G(),r=H(),o=pe(),{resources:s}=N(),a=U(),n=ce(),{log:m}=ke(),x=K();return(0,wo.useMutation)(({resource:l,values:y,metaData:P,dataProviderName:f})=>r(S(l,f,s)).create({resource:l,variables:y,metaData:P}),{onSuccess:(l,{resource:y,successNotification:P,dataProviderName:f,invalidates:d=["list","many"],values:p,metaData:c})=>{var h,v,M;let i=xr.default.singular(y),g=typeof P=="function"?P(l,p,y):P;x(g,{key:`create-${y}-notification`,message:a("notifications.createSuccess",{resource:a(`${y}.${y}`,i)},`Successfully created ${i}`),description:a("notifications.success","Success"),type:"success"}),o({resource:y,dataProviderName:S(y,f,s),invalidates:d}),n==null||n({channel:`resources/${y}`,type:"created",payload:{ids:(h=l==null?void 0:l.data)!=null&&h.id?[l.data.id]:void 0},date:new Date});let{fields:C,operation:R,variables:b,...D}=c||{};m==null||m.mutate({action:"create",resource:y,data:p,meta:{dataProviderName:S(y,f,s),id:(M=(v=l==null?void 0:l.data)==null?void 0:v.id)!=null?M:void 0,...D}})},onError:(l,{resource:y,errorNotification:P,values:f})=>{t(l);let d=xr.default.singular(y),p=typeof P=="function"?P(l,f,y):P;x(p,{key:`create-${y}-notification`,description:l.message,message:a("notifications.createError",{resource:a(`${y}.${y}`,d),statusCode:l.statusCode},`There was an error creating ${d} (status code: ${l.statusCode})`),type:"error"})},...e})};var Ft=T("@tanstack/react-query"),Rr=E(T("pluralize"));var Qo=({mutationOptions:e}={})=>{let{mutate:t}=G(),r=H(),{resources:o}=N(),s=(0,Ft.useQueryClient)(),{mutationMode:a,undoableTimeout:n}=de(),{notificationDispatch:m}=ye(),x=U(),u=ce(),{log:l}=ke(),y=K(),P=pe();return(0,Ft.useMutation)(({id:d,mutationMode:p,undoableTimeout:c,resource:i,onCancel:g,metaData:C,dataProviderName:R,values:b})=>{let D=p!=null?p:a,h=c!=null?c:n;return D!=="undoable"?r(S(i,R,o)).deleteOne({resource:i,id:d,metaData:C,variables:b}):new Promise((M,L)=>{let k=()=>{r(S(i,R,o)).deleteOne({resource:i,id:d,metaData:C,variables:b}).then(A=>M(A)).catch(A=>L(A))},V=()=>{L({message:"mutationCancelled"})};g&&g(V),m({type:"ADD",payload:{id:d,resource:i,cancelMutation:V,doMutation:k,seconds:h,isSilent:!!g}})})},{onMutate:async({id:d,resource:p,mutationMode:c,dataProviderName:i})=>{let g=W(p,S(p,i,o)),C=c!=null?c:a;await s.cancelQueries(g.resourceAll,void 0,{silent:!0});let R=s.getQueriesData(g.resourceAll);return C!=="pessimistic"&&(s.setQueriesData(g.list(),b=>b?{data:b.data.filter(h=>{var v;return((v=h.id)==null?void 0:v.toString())!==d.toString()}),total:b.total-1}:null),s.setQueriesData(g.many(),b=>{if(!b)return null;let D=b.data.filter(h=>{var v;return((v=h.id)==null?void 0:v.toString())!==(d==null?void 0:d.toString())});return{...b,data:D}})),{previousQueries:R,queryKey:g}},onSettled:(d,p,{id:c,resource:i,dataProviderName:g,invalidates:C=["list","many"]})=>{P({resource:i,dataProviderName:S(i,g,o),invalidates:C}),m({type:"REMOVE",payload:{id:c,resource:i}})},onSuccess:(d,{id:p,resource:c,successNotification:i,dataProviderName:g,metaData:C},R)=>{let b=Rr.default.singular(c!=null?c:"");s.removeQueries(R==null?void 0:R.queryKey.detail(p));let D=typeof i=="function"?i(d,p,c):i;y(D,{key:`${p}-${c}-notification`,description:x("notifications.success","Success"),message:x("notifications.deleteSuccess",{resource:x(`${c}.${c}`,b)},`Successfully deleted a ${b}`),type:"success"}),u==null||u({channel:`resources/${c}`,type:"deleted",payload:{ids:p?[p]:[]},date:new Date});let{fields:h,operation:v,variables:M,...L}=C||{};l==null||l.mutate({action:"delete",resource:c,meta:{id:p,dataProviderName:S(c,g,o),...L}}),s.removeQueries(R==null?void 0:R.queryKey.detail(p))},onError:(d,{id:p,resource:c,errorNotification:i},g)=>{if(g)for(let C of g.previousQueries)s.setQueryData(C[0],C[1]);if(d.message!=="mutationCancelled"){t(d);let C=Rr.default.singular(c!=null?c:""),R=typeof i=="function"?i(d,p,c):i;y(R,{key:`${p}-${c}-notification`,message:x("notifications.deleteError",{resource:C,statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}},...e})};var Ao=T("@tanstack/react-query"),Vo=E(T("pluralize"));var $t=({mutationOptions:e}={})=>{let t=H(),{resources:r}=N(),o=U(),s=ce(),a=K(),n=pe();return(0,Ao.useMutation)(({resource:x,values:u,metaData:l,dataProviderName:y})=>{let P=t(S(x,y,r));return P.createMany?P.createMany({resource:x,variables:u,metaData:l}):he(u.map(f=>P.create({resource:x,variables:f,metaData:l})))},{onSuccess:(x,{resource:u,successNotification:l,dataProviderName:y,invalidates:P=["list","many"],values:f})=>{let d=Vo.default.plural(u),p=typeof l=="function"?l(x,f,u):l;a(p,{key:`createMany-${u}-notification`,message:o("notifications.createSuccess",{resource:o(`${u}.${u}`,u)},`Successfully created ${d}`),description:o("notifications.success","Success"),type:"success"}),n({resource:u,dataProviderName:S(u,y,r),invalidates:P});let c=x==null?void 0:x.data.filter(i=>(i==null?void 0:i.id)!==void 0).map(i=>i.id);s==null||s({channel:`resources/${u}`,type:"created",payload:{ids:c},date:new Date})},onError:(x,{resource:u,errorNotification:l,values:y})=>{let P=typeof l=="function"?l(x,y,u):l;a(P,{key:`createMany-${u}-notification`,description:x.message,message:o("notifications.createError",{resource:o(`${u}.${u}`,u),statusCode:x.statusCode},`There was an error creating ${u} (status code: ${x.statusCode}`),type:"error"})},...e})};var Ot=T("@tanstack/react-query"),Pr=E(T("pluralize"));var Bo=({mutationOptions:e}={})=>{let{resources:t}=N(),r=(0,Ot.useQueryClient)(),o=H(),s=U(),{mutationMode:a,undoableTimeout:n}=de(),{mutate:m}=G(),{notificationDispatch:x}=ye(),u=ce(),l=K(),y=pe();return(0,Ot.useMutation)(({ids:f,values:d,resource:p,onCancel:c,mutationMode:i,undoableTimeout:g,metaData:C,dataProviderName:R})=>{let b=i!=null?i:a,D=g!=null?g:n,h=o(S(p,R,t)),v=()=>h.updateMany?h.updateMany({resource:p,ids:f,variables:d,metaData:C}):he(f.map(L=>h.update({resource:p,id:L,variables:d,metaData:C})));return b!=="undoable"?v():new Promise((L,k)=>{let V=()=>{v().then(I=>L(I)).catch(I=>k(I))},A=()=>{k({message:"mutationCancelled"})};c&&c(A),x({type:"ADD",payload:{id:f,resource:p,cancelMutation:A,doMutation:V,seconds:D,isSilent:!!c}})})},{onMutate:async({resource:f,ids:d,values:p,mutationMode:c,dataProviderName:i,metaData:g})=>{let C=W(f,S(f,i,t),g),R=c!=null?c:a;await r.cancelQueries(C.resourceAll,void 0,{silent:!0});let b=r.getQueriesData(C.resourceAll);if(R!=="pessimistic"){r.setQueriesData(C.list(),D=>{if(!D)return null;let h=D.data.map(v=>v.id!==void 0&&d.filter(M=>M!==void 0).map(String).includes(v.id.toString())?{...v,...p}:v);return{...D,data:h}}),r.setQueriesData(C.many(),D=>{if(!D)return null;let h=D.data.map(v=>v.id!==void 0&&d.filter(M=>M!==void 0).map(String).includes(v.id.toString())?{...v,...p}:v);return{...D,data:h}});for(let D of d)r.setQueriesData(C.detail(D),h=>{if(!h)return null;let v={...h.data,...p};return{...h,data:v}})}return{previousQueries:b,queryKey:C}},onSettled:(f,d,{ids:p,resource:c,dataProviderName:i})=>{y({resource:c,invalidates:["list","many"],dataProviderName:S(c,i,t)}),p.forEach(g=>y({resource:c,invalidates:["detail"],dataProviderName:S(c,i,t),id:g})),x({type:"REMOVE",payload:{id:p,resource:c}})},onSuccess:(f,{ids:d,resource:p,successNotification:c,values:i})=>{let g=Pr.default.singular(p),C=typeof c=="function"?c(f,{ids:d,values:i},p):c;l(C,{key:`${d}-${p}-notification`,description:s("notifications.success","Successful"),message:s("notifications.editSuccess",{resource:s(`${p}.${p}`,p)},`Successfully updated ${g}`),type:"success"}),u==null||u({channel:`resources/${p}`,type:"updated",payload:{ids:d.map(String)},date:new Date})},onError:(f,{ids:d,resource:p,errorNotification:c,values:i},g)=>{if(g)for(let C of g.previousQueries)r.setQueryData(C[0],C[1]);if(f.message!=="mutationCancelled"){m==null||m(f);let C=Pr.default.singular(p),R=typeof c=="function"?c(f,{ids:d,values:i},p):c;l(R,{key:`${d}-${p}-updateMany-error-notification`,message:s("notifications.editError",{resource:C,statusCode:f.statusCode},`Error when updating ${C} (status code: ${f.statusCode})`),description:f.message,type:"error"})}},...e})};var Wt=T("@tanstack/react-query"),No=E(T("pluralize"));var ko=({mutationOptions:e}={})=>{let{mutate:t}=G(),{mutationMode:r,undoableTimeout:o}=de(),s=H(),{notificationDispatch:a}=ye(),n=U(),m=ce(),x=K(),u=pe(),{resources:l}=N(),y=(0,Wt.useQueryClient)();return(0,Wt.useMutation)(({resource:f,ids:d,mutationMode:p,undoableTimeout:c,onCancel:i,metaData:g,dataProviderName:C,values:R})=>{let b=p!=null?p:r,D=c!=null?c:o,h=s(S(f,C,l)),v=()=>h.deleteMany?h.deleteMany({resource:f,ids:d,metaData:g,variables:R}):he(d.map(L=>h.deleteOne({resource:f,id:L,metaData:g,variables:R})));return b!=="undoable"?v():new Promise((L,k)=>{let V=()=>{v().then(I=>L(I)).catch(I=>k(I))},A=()=>{k({message:"mutationCancelled"})};i&&i(A),a({type:"ADD",payload:{id:d,resource:f,cancelMutation:A,doMutation:V,seconds:D,isSilent:!!i}})})},{onMutate:async({ids:f,resource:d,mutationMode:p,dataProviderName:c})=>{let i=W(d,S(d,c,l)),g=p!=null?p:r;await y.cancelQueries(i.resourceAll,void 0,{silent:!0});let C=y.getQueriesData(i.resourceAll);if(g!=="pessimistic"){y.setQueriesData(i.list(),R=>R?{data:R.data.filter(D=>D.id&&!f.map(String).includes(D.id.toString())),total:R.total-1}:null),y.setQueriesData(i.many(),R=>{if(!R)return null;let b=R.data.filter(D=>D.id?!f.map(String).includes(D.id.toString()):!1);return{...R,data:b}});for(let R of f)y.setQueriesData(i.detail(R),b=>!b||b.data.id==R?null:{...b})}return{previousQueries:C,queryKey:i}},onSettled:(f,d,{resource:p,ids:c,dataProviderName:i,invalidates:g=["list","many"]})=>{u({resource:p,dataProviderName:S(p,i,l),invalidates:g}),a({type:"REMOVE",payload:{id:c,resource:p}})},onSuccess:(f,{ids:d,resource:p,successNotification:c},i)=>{d.forEach(C=>y.removeQueries(i==null?void 0:i.queryKey.detail(C)));let g=typeof c=="function"?c(f,d,p):c;x(g,{key:`${d}-${p}-notification`,description:n("notifications.success","Success"),message:n("notifications.deleteSuccess",{resource:n(`${p}.${p}`,p)},`Successfully deleted ${p}`),type:"success"}),m==null||m({channel:`resources/${p}`,type:"deleted",payload:{ids:d},date:new Date}),d.forEach(C=>y.removeQueries(i==null?void 0:i.queryKey.detail(C)))},onError:(f,{ids:d,resource:p,errorNotification:c},i)=>{if(i)for(let g of i.previousQueries)y.setQueryData(g[0],g[1]);if(f.message!=="mutationCancelled"){t(f);let g=No.default.singular(p),C=typeof c=="function"?c(f,d,p):c;x(C,{key:`${d}-${p}-notification`,message:n("notifications.deleteError",{resource:g,statusCode:f.statusCode},`Error (status code: ${f.statusCode})`),description:f.message,type:"error"})}},...e})};var Ho=e=>{let t=H(),{getApiUrl:r}=t(e);return r()};var Fo=T("@tanstack/react-query");var $o=({url:e,method:t,config:r,queryOptions:o,successNotification:s,errorNotification:a,metaData:n,dataProviderName:m})=>{let x=H(),{custom:u}=x(m),{mutate:l}=G(),y=U(),P=K();if(u)return(0,Fo.useQuery)([m,"custom",t,e,{...r,...n}],({queryKey:d,pageParam:p,signal:c})=>u({url:e,method:t,...r,metaData:{...n,queryContext:{queryKey:d,pageParam:p,signal:c}}}),{...o,onSuccess:d=>{var c;(c=o==null?void 0:o.onSuccess)==null||c.call(o,d);let p=typeof s=="function"?s(d,{...r,...n}):s;P(p)},onError:d=>{var c;l(d),(c=o==null?void 0:o.onError)==null||c.call(o,d);let p=typeof a=="function"?a(d,{...r,...n}):a;P(p,{key:`${t}-notification`,message:y("notifications.error",{statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}});throw Error("Not implemented custom on data provider.")};var Oo=T("@tanstack/react-query");var Wo=({mutationOptions:e}={})=>{let{mutate:t}=G(),r=K(),o=H(),s=U();return(0,Oo.useMutation)(({url:n,method:m,values:x,metaData:u,dataProviderName:l,config:y})=>{let{custom:P}=o(l);if(P)return P({url:n,method:m,payload:x,metaData:u,headers:{...y==null?void 0:y.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(n,{successNotification:m,config:x,metaData:u})=>{let l=typeof m=="function"?m(n,{...x,...u}):m;r(l)},onError:(n,{errorNotification:m,method:x,config:u,metaData:l})=>{t(n);let y=typeof m=="function"?m(n,{...u,...l}):m;r(y,{key:`${x}-notification`,message:s("notifications.error",{statusCode:n.statusCode},`Error (status code: ${n.statusCode})`),description:n.message,type:"error"})},...e})};var Kt=T("react");var br=E(T("react")),na=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),mt=br.default.createContext(na()),Ko=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},br.default.createElement(mt.Provider,{value:r},e)};var H=()=>{let e=(0,Kt.useContext)(mt);return(0,Kt.useCallback)(r=>{if(r){if(!e[r])throw new Error(`"${r}" Data provider not found`);return e[r]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])};var Go=T("@tanstack/react-query");var zo=({resource:e,config:t,queryOptions:r,successNotification:o,errorNotification:s,metaData:a,liveMode:n,onLiveEvent:m,liveParams:x,dataProviderName:u})=>{let{resources:l}=N(),y=H(),P=W(e,S(e,u,l),a),{getList:f}=y(S(e,u,l)),d=U(),{mutate:p}=G(),c=K(),i=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return Ee({resource:e,types:["*"],params:{metaData:a,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...x},channel:`resources/${e}`,enabled:i,liveMode:n,onLiveEvent:m}),(0,Go.useInfiniteQuery)(P.list(t),({queryKey:C,pageParam:R,signal:b})=>{let{hasPagination:D,...h}=t||{},v={...t==null?void 0:t.pagination,current:R};return f({resource:e,...h,pagination:v,hasPagination:D,metaData:{...a,queryContext:{queryKey:C,pageParam:R,signal:b}}}).then(({data:M,total:L,...k})=>({data:M,total:L,pagination:v,...k}))},{getNextPageParam:C=>lt(C),getPreviousPageParam:C=>dt(C),...r,onSuccess:C=>{var b;(b=r==null?void 0:r.onSuccess)==null||b.call(r,C);let R=typeof o=="function"?o(C,{metaData:a,config:t},e):o;c(R)},onError:C=>{var b;p(C),(b=r==null?void 0:r.onError)==null||b.call(r,C);let R=typeof s=="function"?s(C,{metaData:a,config:t},e):s;c(R,{key:`${e}-useInfiniteList-notification`,message:d("notifications.error",{statusCode:C.statusCode},`Error (status code: ${C.statusCode})`),description:C.message,type:"error"})}})};var ft=T("react"),jo=T("@tanstack/react-query");var Dr=E(T("react")),Me=Dr.default.createContext(void 0),_o=({liveProvider:e,children:t})=>Dr.default.createElement(Me.Provider,{value:e},t);var Ee=({resource:e,params:t,channel:r,types:o,enabled:s=!0,liveMode:a,onLiveEvent:n})=>{let m=(0,jo.useQueryClient)(),x=W(e),u=(0,ft.useContext)(Me),{liveMode:l,onLiveEvent:y}=(0,ft.useContext)(oe),P=a!=null?a:l;(0,ft.useEffect)(()=>{let f;return P&&P!=="off"&&s&&(f=u==null?void 0:u.subscribe({channel:r,params:{resource:e,...t},types:o,callback:d=>{P==="auto"&&m.invalidateQueries(x.resourceAll),n==null||n(d),y==null||y(d)}})),()=>{f&&(u==null||u.unsubscribe(f))}},[s])};var qo=T("react");var vr=e=>{let{liveMode:t}=(0,qo.useContext)(oe);return e!=null?e:t};var Gt=T("react");var ia=({params:e,channel:t,types:r=["*"],enabled:o=!0,onLiveEvent:s})=>{let a=(0,Gt.useContext)(Me);(0,Gt.useEffect)(()=>{let n;return o&&(n=a==null?void 0:a.subscribe({channel:t,params:e,types:r,callback:s})),()=>{n&&(a==null||a.unsubscribe(n))}},[o])};var Yo=T("react");var ce=()=>{let e=(0,Yo.useContext)(Me);return e==null?void 0:e.publish};var Jo=T("react");var hr=E(T("react")),He=hr.default.createContext({resources:[]}),Zo=({resources:e,children:t})=>hr.default.createElement(He.Provider,{value:{resources:e}},t);var N=({resourceName:e,resourceNameOrRouteName:t,recordItemId:r}={})=>{let{resources:o}=(0,Jo.useContext)(He),s=ee(),{useParams:a}=Q(),n=a(),m=s(t!=null?t:n.resource),x=e!=null?e:m.name,u=r!=null?r:n.id;return{resources:o,resource:m,resourceName:x,id:u,action:n.action}};var zt=T("react");var ee=()=>{let{resources:e}=(0,zt.useContext)(He);return(0,zt.useCallback)(r=>{let o=e.find(s=>s.route===r);if(!o){let s=e.find(a=>a.name===r);return s!=null?s:{name:r,route:r}}return o},[e])};var Xo=T("react");var ye=()=>{let{notifications:e,notificationDispatch:t}=(0,Xo.useContext)(Nt);return{notifications:e,notificationDispatch:t}};var ts=T("react");var _t=E(T("react"));var yt=(0,_t.createContext)({}),es=({open:e,close:t,children:r})=>_t.default.createElement(yt.Provider,{value:{open:e,close:t}},r);var re=()=>{let{open:e,close:t}=(0,ts.useContext)(yt);return{open:e,close:t}};var rs=T("react");var K=()=>{let{open:e}=re();return(0,rs.useCallback)((r,o)=>{r!==!1&&(r?e==null||e(r):o&&(e==null||e(o)))},[])};var jt=T("react");var Er=E(T("react"));var Te=Er.default.createContext({}),os=({children:e,i18nProvider:t})=>Er.default.createElement(Te.Provider,{value:{i18nProvider:t}},e);var ss=()=>{let{i18nProvider:e}=(0,jt.useContext)(Te);return(0,jt.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])};var qt=T("react");var U=()=>{let{i18nProvider:e}=(0,qt.useContext)(Te);return(0,qt.useMemo)(()=>{function r(o,s,a){var n,m;return(m=(n=e==null?void 0:e.translate(o,s,a))!=null?n:a)!=null?m:typeof s=="string"&&typeof a>"u"?s:o}return r},[e])};var Yt=T("react");var as=()=>{let{i18nProvider:e}=(0,Yt.useContext)(Te);return(0,Yt.useCallback)(()=>e==null?void 0:e.getLocale(),[])};var ns=T("react");var de=()=>{let{mutationMode:e,undoableTimeout:t}=(0,ns.useContext)(oe);return{mutationMode:e,undoableTimeout:t}};var Ur=T("react");var Tt=E(T("react")),Mr=Tt.default.createContext({}),is=({children:e})=>{let[t,r]=(0,Tt.useState)(!1);return Tt.default.createElement(Mr.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)};var Xe=()=>{let{warnWhenUnsavedChanges:e}=(0,Ur.useContext)(oe),{warnWhen:t,setWarnWhen:r}=(0,Ur.useContext)(Mr);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}};var us=T("react");var Zt=()=>{let{syncWithLocation:e}=(0,us.useContext)(oe);return{syncWithLocation:e}};var cs=T("react");var ps=()=>{let{Title:e}=(0,cs.useContext)(oe);return e};var ls=T("react");var Le=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:s,Title:a,hasDashboard:n,mutationMode:m,syncWithLocation:x,undoableTimeout:u,warnWhenUnsavedChanges:l,DashboardPage:y,LoginPage:P,catchAll:f,options:d}=(0,ls.useContext)(oe);return{Footer:e,Header:t,Layout:r,OffLayoutArea:o,Sider:s,Title:a,hasDashboard:n,mutationMode:m,syncWithLocation:x,undoableTimeout:u,warnWhenUnsavedChanges:l,DashboardPage:y,LoginPage:P,catchAll:f,options:d}};var ds=T("react");var ms=T("export-to-csv-fix-source-map"),ua=({resourceName:e,sorter:t,filters:r,maxItemCount:o,pageSize:s=20,mapData:a=l=>l,exportOptions:n,metaData:m,dataProviderName:x,onError:u}={})=>{let[l,y]=(0,ds.useState)(!1),{resources:P}=N(),f=ee(),d=H(),{useParams:p}=Q(),{resource:c}=p(),{name:i}=f(c);e&&(i=e);let g=`${Ne(i,"plural")}-${new Date().toLocaleString()}`,{getList:C}=d(S(i,x,P));return{isLoading:l,triggerExport:async()=>{y(!0);let b=[],D=1,h=!0;for(;h;)try{let{data:M,total:L}=await C({resource:i,filters:r,sort:t,pagination:{current:D,pageSize:s},metaData:m});D++,b.push(...M),o&&b.length>=o&&(b=b.slice(0,o),h=!1),L===b.length&&(h=!1)}catch(M){y(!1),h=!1,u==null||u(M);return}new ms.ExportToCsv({filename:g,useKeysAsHeaders:!0,...n}).generateCsv(b.map(a)),y(!1)}}};var Sr=E(T("react"));var ca=({resource:e,action:t,id:r,onMutationSuccess:o,onMutationError:s,redirect:a,successNotification:n,errorNotification:m,metaData:x,mutationMode:u,liveMode:l,onLiveEvent:y,liveParams:P,undoableTimeout:f,dataProviderName:d,invalidates:p,queryOptions:c,createMutationOptions:i,updateMutationOptions:g}={})=>{var ht;let{options:C}=Le(),{useParams:R}=Q(),{resource:b,action:D,id:h}=R(),v=!e||e===b?r!=null?r:h:r,[M,L]=Sr.default.useState(v);Sr.default.useEffect(()=>{v!==M&&L(r)},[r]);let k=e!=null?e:b,V=(ht=t!=null?t:D==="show"?"create":D)!=null?ht:"create",I=ee()(k),{mutationMode:B}=de(),w=u!=null?u:B,te=V==="create",ie=V==="edit",me=V==="clone",q=yr({redirectFromProps:a,action:V,redirectOptions:C.redirect}),J=M!==void 0&&(ie||me),fe=qe({resource:I.name,id:M!=null?M:"",queryOptions:{enabled:J,...c},liveMode:l,onLiveEvent:y,liveParams:P,metaData:x,dataProviderName:d}),{isFetching:z}=fe,ge=Je({mutationOptions:i}),{mutate:we,isLoading:bt}=ge,xe=Ht({mutationOptions:g}),{mutate:Dt,isLoading:or}=xe,{setWarnWhen:vt}=Xe(),Qe=Ir();return{...te||me?{formLoading:z||bt,mutationResult:ge,onFinish:async ue=>{vt(!1);let F=Y=>{Qe({redirect:q,resource:I,id:Y})};return w!=="pessimistic"&&setTimeout(()=>{F()}),new Promise((Y,Ae)=>(w!=="pessimistic"&&Y(),we({values:ue,resource:I.name,successNotification:n,errorNotification:m,metaData:x,dataProviderName:d,invalidates:p},{onSuccess:(le,Re,Ve)=>{var Gr;o&&o(le,ue,Ve);let rt=(Gr=le==null?void 0:le.data)==null?void 0:Gr.id;F(rt),Y(le)},onError:(le,Re,Ve)=>{if(s)return s(le,ue,Ve);Ae()}})))}}:{formLoading:z||or,mutationResult:xe,onFinish:async ue=>{vt(!1);let F={id:M!=null?M:"",values:ue,resource:I.name,mutationMode:w,undoableTimeout:f,successNotification:n,errorNotification:m,metaData:x,dataProviderName:d,invalidates:p},Y=()=>{L(v),Qe({redirect:q,resource:I,id:M})};return w!=="pessimistic"&&setTimeout(()=>{Y()}),new Promise((Ae,le)=>(w!=="pessimistic"&&Ae(),setTimeout(()=>{Dt(F,{onSuccess:(Re,Ve,rt)=>{o&&o(Re,ue,rt),w==="pessimistic"&&Y(),Ae(Re)},onError:(Re,Ve,rt)=>{if(s)return s(Re,ue,rt);le()}})})))}},queryResult:fe,id:M,setId:L,redirect:(ue,F)=>{Qe({redirect:ue!==void 0?ue:ie?"list":"edit",resource:I,id:F!=null?F:M})}}};var fs=T("react");var Ir=()=>{let{show:e,edit:t,list:r,create:o}=Z();return(0,fs.useCallback)(({redirect:a,resource:n,id:m})=>{if(a&&n.route)return n.canShow&&a==="show"&&m?e(n.route,m):n.canEdit&&a==="edit"&&m?t(n.route,m):n.canCreate&&a==="create"?o(n.route):r(n.route,"push")},[])};var Z=()=>{let{useHistory:e}=Q(),t=e(),r=ee(),o=(i,g="push")=>{g==="push"?t.push(i):t.replace(i)},s=i=>`/${r(i).route}/create`,a=(i,g)=>{let C=r(i),R=encodeURIComponent(g);return`/${C.route}/edit/${R}`},n=(i,g)=>{let C=r(i),R=encodeURIComponent(g);return`/${C.route}/clone/${R}`},m=(i,g)=>{let C=r(i),R=encodeURIComponent(g);return`/${C.route}/show/${R}`},x=i=>`/${r(i).route}`;return{create:(i,g="push")=>{o(s(i),g)},createUrl:s,edit:(i,g,C="push")=>{o(a(i,g),C)},editUrl:a,clone:(i,g,C="push")=>{o(n(i,g),C)},cloneUrl:n,show:(i,g,C="push")=>{o(m(i,g),C)},showUrl:m,list:(i,g="push")=>{o(x(i),g)},listUrl:x,push:(i,...g)=>{t.push(i,...g)},replace:(i,...g)=>{t.replace(i,...g)},goBack:()=>{t.goBack()}}};var Jt=E(T("react"));var pa=({resource:e,id:t,successNotification:r,errorNotification:o,metaData:s,liveMode:a,onLiveEvent:n,dataProviderName:m,queryOptions:x}={})=>{let{useParams:u}=Q(),{resource:l,id:y}=u(),P=!e||e===l?t!=null?t:y:t,[f,d]=(0,Jt.useState)(P);Jt.default.useEffect(()=>{P!==f&&d(P)},[P]);let c=ee()(e!=null?e:l);return{queryResult:qe({resource:c.name,id:f!=null?f:"",queryOptions:{enabled:f!==void 0,...x},successNotification:r,errorNotification:o,metaData:s,liveMode:a,onLiveEvent:n,dataProviderName:m}),showId:f,setShowId:d}};var et=T("react"),ys=T("papaparse"),Ts=E(T("lodash-es/chunk"));var la=({resourceName:e,mapData:t=x=>x,paparseOptions:r,batchSize:o=Number.MAX_SAFE_INTEGER,onFinish:s,metaData:a,onProgress:n,dataProviderName:m}={})=>{let[x,u]=(0,et.useState)(0),[l,y]=(0,et.useState)(0),[P,f]=(0,et.useState)(!1),d=ee(),{useParams:p}=Q(),{resource:c}=p(),{name:i}=d(e!=null?e:c),g=$t(),C=Je(),R;o===1?R=C:R=g;let b=()=>{y(0),u(0),f(!1)},D=v=>{let M={succeeded:v.filter(L=>L.type==="success"),errored:v.filter(L=>L.type==="error")};s==null||s(M),f(!1)};(0,et.useEffect)(()=>{n==null||n({totalAmount:l,processedAmount:x})},[l,x]);let h=({file:v})=>(b(),new Promise(M=>{f(!0),(0,ys.parse)(v,{complete:async({data:L})=>{let k=st(L,t);if(y(k.length),o===1){let V=k.map(I=>async()=>({response:await C.mutateAsync({resource:i,values:I,successNotification:!1,errorNotification:!1,dataProviderName:m,metaData:a}),value:I})),A=await At(V,({response:I,value:B})=>(u(w=>w+1),{response:[I.data],type:"success",request:[B]}),(I,B)=>({response:[I],type:"error",request:[k[B]]}));M(A)}else{let V=(0,Ts.default)(k,o),A=V.map(B=>async()=>({response:await g.mutateAsync({resource:i,values:B,successNotification:!1,errorNotification:!1,dataProviderName:m,metaData:a}),value:B,currentBatchLength:B.length})),I=await At(A,({response:B,currentBatchLength:w,value:te})=>(u(ie=>ie+w),{response:B.data,type:"success",request:te}),(B,w)=>({response:[B],type:"error",request:V[w]}));M(I)}},...r})}).then(M=>(D(M),M)));return{inputProps:{type:"file",accept:".csv",onChange:v=>{v.target.files&&v.target.files.length>0&&h({file:v.target.files[0]})}},mutationResult:R,isLoading:P,handleChange:h}};var Ct=T("react"),da=({defaultVisible:e=!1}={})=>{let[t,r]=(0,Ct.useState)(e),o=(0,Ct.useCallback)(()=>r(!0),[t]),s=(0,Ct.useCallback)(()=>r(!1),[t]);return{visible:t,show:o,close:s}};var gs=T("react");var Lr=E(T("react")),ma={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},gt=Lr.default.createContext(ma),Cs=({children:e,useHistory:t,useLocation:r,useParams:o,Prompt:s,Link:a,routes:n})=>Lr.default.createElement(gt.Provider,{value:{useHistory:t,useLocation:r,useParams:o,Prompt:s,Link:a,routes:n}},e);var Q=()=>{let{useHistory:e,useLocation:t,useParams:r,Prompt:o,Link:s,routes:a}=(0,gs.useContext)(gt);return{useHistory:e,useLocation:t,useParams:r,Prompt:o,Link:s,routes:a}};var Rs=T("react"),Ps=T("@tanstack/react-query");var wr=E(T("react"));var Fe=wr.default.createContext({}),xs=({can:e,children:t})=>wr.default.createElement(Fe.Provider,{value:{can:e}},t);var Qr=({action:e,resource:t,params:r,queryOptions:o})=>{let{can:s}=(0,Rs.useContext)(Fe),{resource:a,...n}=r!=null?r:{},{icon:m,list:x,edit:u,create:l,show:y,children:P,...f}=a!=null?a:{},d=(0,Ps.useQuery)(["useCan",{action:e,resource:t,params:{...n,resource:f},enabled:o==null?void 0:o.enabled}],()=>{var p;return(p=s==null?void 0:s({action:e,resource:t,params:r}))!=null?p:Promise.resolve({can:!0})},{enabled:typeof s<"u",...o,retry:!1});return typeof s>"u"?{data:{can:!0}}:d};var bs=T("react");var fa=()=>{let{can:e}=(0,bs.useContext)(Fe);return{can:e}};var Ue=T("react"),Ds=E(T("lodash/uniqBy")),vs=E(T("lodash/debounce")),xt=E(T("lodash/get"));var ya=e=>{var ie,me;let[t,r]=(0,Ue.useState)([]),[o,s]=(0,Ue.useState)([]),[a,n]=(0,Ue.useState)([]),{resource:m,sort:x,filters:u=[],optionLabel:l="title",optionValue:y="id",debounce:P=300,successNotification:f,errorNotification:d,defaultValueQueryOptions:p,queryOptions:c,fetchSize:i,pagination:g,hasPagination:C,liveMode:R,defaultValue:b=[],onLiveEvent:D,onSearch:h,liveParams:v,metaData:M,dataProviderName:L}=e,k=Array.isArray(b)?b:[b],V=(0,Ue.useCallback)(q=>{n(q.data.map(J=>({label:(0,xt.default)(J,l),value:(0,xt.default)(J,y)})))},[l,y]),A=p!=null?p:c,I=Vt({resource:m,ids:k,queryOptions:{...A,enabled:k.length>0&&((ie=p==null?void 0:p.enabled)!=null?ie:!0),onSuccess:q=>{var J;V(q),(J=A==null?void 0:A.onSuccess)==null||J.call(A,q)}},metaData:M,liveMode:"off",dataProviderName:L}),B=(0,Ue.useCallback)(q=>{s(q.data.map(J=>({label:(0,xt.default)(J,l),value:(0,xt.default)(J,y)})))},[l,y]),w=je({resource:m,config:{sort:x,filters:u.concat(t),pagination:{current:g==null?void 0:g.current,pageSize:(me=g==null?void 0:g.pageSize)!=null?me:i},hasPagination:C},queryOptions:{...c,onSuccess:q=>{var J;B(q),(J=c==null?void 0:c.onSuccess)==null||J.call(c,q)}},successNotification:f,errorNotification:d,metaData:M,liveMode:R,liveParams:v,onLiveEvent:D,dataProviderName:L}),te=q=>{if(h){r(h(q));return}if(q)r([{field:l,operator:"contains",value:q}]);else{r([]);return}};return{queryResult:w,defaultValueQueryResult:I,options:(0,Ue.useMemo)(()=>(0,Ds.default)([...o,...a],"value"),[o,a]),onSearch:(0,vs.default)(te,P)}};var De=T("react"),Ar=E(T("qs")),Vr=E(T("lodash/differenceWith")),Br=E(T("lodash/isEqual"));var Ta=[],Ca=[];function ga({initialCurrent:e=1,initialPageSize:t=10,hasPagination:r=!0,initialSorter:o,permanentSorter:s=Ca,defaultSetFilterBehavior:a="merge",initialFilter:n,permanentFilter:m=Ta,syncWithLocation:x,resource:u,successNotification:l,errorNotification:y,queryOptions:P,liveMode:f,onLiveEvent:d,liveParams:p,metaData:c,dataProviderName:i}={}){var ue;let{syncWithLocation:g}=Zt(),C=x!=null?x:g,{useLocation:R,useParams:b}=Q(),{search:D,pathname:h}=R(),v=vr(f),{parsedCurrent:M,parsedPageSize:L,parsedSorter:k,parsedFilters:V}=at(D),A=M||e,I=L||t,B=k.length?k:o,w=V.length?V:n,{resource:te}=b(),{replace:ie}=Z(),q=ee()(u!=null?u:te),[J,fe]=(0,De.useState)(ct(s,B!=null?B:[])),[z,ge]=(0,De.useState)(ut(m,w!=null?w:[])),[we,bt]=(0,De.useState)(A),[xe,Dt]=(0,De.useState)(I),or=({pagination:{current:F,pageSize:Y},sorter:Ae,filters:le})=>{let Re=Ar.default.parse(D==null?void 0:D.substring(1)),Ve=nt({pagination:{pageSize:Y,current:F},sorter:Ae,filters:le,...Re});return`${h}?${Ve}`};(0,De.useEffect)(()=>{D===""&&(bt(A),Dt(I),fe(ct(s,B!=null?B:[])),ge(ut(m,w!=null?w:[])))},[D]);let vt=()=>{let{sorter:F,filters:Y,pageSize:Ae,current:le,...Re}=Ar.default.parse(D,{ignoreQueryPrefix:!0});return Re};(0,De.useEffect)(()=>{if(C){let F=vt(),Y=nt({...r?{pagination:{pageSize:xe,current:we}}:{},sorter:(0,Vr.default)(J,s,Br.default),filters:(0,Vr.default)(z,m,Br.default),...F});return ie(`${h}?${Y}`,void 0,{shallow:!0})}},[C,we,xe,J,z]);let Qe=je({resource:q.name,config:{hasPagination:r,pagination:{current:we,pageSize:xe},filters:Be(m,z),sort:it(s,J)},queryOptions:P,successNotification:l,errorNotification:y,metaData:c,liveMode:v,liveParams:p,onLiveEvent:d,dataProviderName:i}),Fr=F=>{ge(Y=>Be(m,F,Y))},$r=F=>{ge(Be(m,F))},Or=F=>{ge(Y=>Be(m,F(Y)))},Wr=(F,Y=a)=>{typeof F=="function"?Or(F):Y==="replace"?$r(F):Fr(F)},Kr=F=>{fe(()=>it(s,F))},ht=(0,De.useMemo)(()=>{var F,Y;return r?{current:we,setCurrent:bt,pageSize:xe,setPageSize:Dt,pageCount:xe?Math.ceil(((Y=(F=Qe.data)==null?void 0:F.total)!=null?Y:0)/xe):1}:{current:void 0,setCurrent:void 0,pageSize:void 0,setPageSize:void 0,pageCount:void 0}},[r,we,xe,(ue=Qe.data)==null?void 0:ue.total]);return{tableQueryResult:Qe,sorter:J,setSorter:Kr,filters:z,setFilters:Wr,...ht,createLinkForSyncWithLocation:or}}var kr=T("react"),Rt=T("@tanstack/react-query");var Nr=E(T("react")),$e=Nr.default.createContext({}),hs=({create:e,get:t,update:r,children:o})=>Nr.default.createElement($e.Provider,{value:{create:e,get:t,update:r}},o);var ke=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,Rt.useQueryClient)(),o=(0,kr.useContext)($e),{resources:s}=(0,kr.useContext)(He),{data:a,refetch:n,isLoading:m}=Et({queryOptions:{enabled:!!o}}),x=(0,Rt.useMutation)(async l=>{var d,p,c;let y=s.find(i=>i.name===l.resource),P=(p=(d=y==null?void 0:y.options)==null?void 0:d.auditLog)==null?void 0:p.permissions;if(P&&!lr(P,l.action))return;let f;return m&&(f=await n()),await((c=o.create)==null?void 0:c.call(o,{...l,author:a!=null?a:f==null?void 0:f.data}))},e),u=(0,Rt.useMutation)(async l=>{var y;return await((y=o.update)==null?void 0:y.call(o,l))},{onSuccess:l=>{if(l!=null&&l.resource){let y=W(l==null?void 0:l.resource);r.invalidateQueries(y.logList())}},...t});return{log:x,rename:u}};var Es=T("react"),Ms=T("@tanstack/react-query");var xa=({resource:e,action:t,meta:r,author:o,metaData:s,queryOptions:a})=>{let{get:n}=(0,Es.useContext)($e),m=W(e,void 0,s);return(0,Ms.useQuery)(m.logList(r),()=>{var u;return(u=n==null?void 0:n({resource:e,action:t,author:o,meta:r,metaData:s}))!=null?u:Promise.resolve([])},{enabled:typeof n<"u",...a,retry:!1})};var Us=T("react"),Ss=T("@tanstack/react-query");var pe=()=>{let{resources:e}=N(),t=(0,Ss.useQueryClient)();return(0,Us.useCallback)(({resource:o,dataProviderName:s,invalidates:a,id:n})=>{if(a===!1)return;let m=W(o,S(o,s,e));a.forEach(x=>{switch(x){case"all":t.invalidateQueries(m.all);break;case"list":t.invalidateQueries(m.list());break;case"many":t.invalidateQueries(m.many());break;case"resourceAll":t.invalidateQueries(m.resourceAll);break;case"detail":t.invalidateQueries(m.detail(n||""));break;default:break}})},[])};var Is=T("react"),Ls=E(T("warn-once"));var Ra=()=>{var x;let{useParams:e}=Q(),{i18nProvider:t}=(0,Is.useContext)(Te),r=U(),{resources:o,resource:s}=N(),{action:a}=e(),n=[];if(!(s!=null&&s.name))return{breadcrumbs:n};let m=u=>{var y;let l=o.find(P=>P.name===u);l&&(l.parentName&&m(l.parentName),n.push({label:(y=l.label)!=null?y:r(`${l.name}.${l.name}`,Ie(l.name)),href:l.list?`/${l.route}`:void 0,icon:l.icon}))};if(s.parentName&&m(s.parentName),n.push({label:(x=s.label)!=null?x:r(`${s.name}.${s.name}`,Ie(s.name)),href:s.list?`/${s.route}`:void 0,icon:s.icon}),a){let u=`actions.${a}`,l=r(u);typeof t<"u"&&l===u?((0,Ls.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${a}" action. Please add "actions.${a}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),n.push({label:r(`buttons.${a}`,Ie(a))})):n.push({label:r(u,Ie(a))})}return{breadcrumbs:n}};var Oe=E(T("react"));var ws=()=>{let{resources:e}=N(),t=U(),{useLocation:r,useParams:o}=Q(),s=r(),a=o(),{hasDashboard:n}=Le(),m=Oe.default.useMemo(()=>{let f=e.find(p=>(s==null?void 0:s.pathname)===`/${p.route}`);f||(f=e.find(p=>(a==null?void 0:a.resource)===p.route));let d;return f!=null&&f.route?d=`/${f==null?void 0:f.route}`:s.pathname==="/"?d="/":d=s==null?void 0:s.pathname,d},[e,s,a]),x=Oe.default.useMemo(()=>e.map(f=>{var p,c;let d=`/${f.route}`;return{...f,icon:f.icon,route:d,key:(p=f.key)!=null?p:d,label:(c=f.label)!=null?c:t(`${f.name}.${f.name}`,Ne(f.name,"plural"))}}),[e,n,t]),u=Oe.default.useMemo(()=>pt(x),[x]),l=Oe.default.useCallback((f,d,p=!1)=>{let c=d.find(i=>p?i.name===f:i.route===f);if(c){let i=[];return p&&c.route&&i.unshift(c.route),c.parentName&&i.unshift(...l(c.parentName,d,!0)),i}return[]},[]),y=Oe.default.useMemo(()=>l(m,x),[m,x]);return Oe.default.useMemo(()=>{let f=d=>d.reduce((p,c)=>{var i,g;return c.children.length>0&&((i=c.options)==null?void 0:i.hide)!==!0?[...p,{...c,children:f(c.children)}]:typeof c.list<"u"&&((g=c.options)==null?void 0:g.hide)!==!0?[...p,c]:p},[]);return{defaultOpenKeys:y,selectedKey:m,menuItems:f(u)}},[y,m,u])};var Qs=()=>{let[e,t]=(0,ve.useState)(),{push:r}=Z(),o=U(),s=["edit","create","show"],{useParams:a}=Q(),n=a(),m=ee();return(0,ve.useEffect)(()=>{if(n.resource){let x=m(n.resource);n.action&&s.includes(n.action)&&!x[n.action]&&t(o("pages.error.info",{action:n.action,resource:n.resource},`You may have forgotten to add the "${n.action}" component to "${n.resource}" resource.`))}},[n]),ve.default.createElement(ve.default.Fragment,null,ve.default.createElement("h1",null,o("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&ve.default.createElement("p",null,e),ve.default.createElement("button",{onClick:()=>r("/")},o("pages.error.backHome",void 0,"Back Home")))};var X=E(T("react"));var Qt=()=>{let[e,t]=(0,X.useState)(""),[r,o]=(0,X.useState)(""),s=U(),{mutate:a}=ze();return X.default.createElement(X.default.Fragment,null,X.default.createElement("h1",null,s("pages.login.title","Sign in your account")),X.default.createElement("form",{onSubmit:n=>{n.preventDefault(),a({username:e,password:r})}},X.default.createElement("table",null,X.default.createElement("tbody",null,X.default.createElement("tr",null,X.default.createElement("td",null,s("pages.login.username",void 0,"username"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:n=>t(n.target.value)}))),X.default.createElement("tr",null,X.default.createElement("td",null,s("pages.login.password",void 0,"password"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:n=>o(n.target.value)}))))),X.default.createElement("br",null),X.default.createElement("input",{type:"submit",value:"login"})))};var We=E(T("react"));var $=E(T("react"));var As=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:o,contentProps:s,wrapperProps:a,renderContent:n,formProps:m})=>{let{Link:x}=Q(),[u,l]=(0,$.useState)(""),[y,P]=(0,$.useState)(""),[f,d]=(0,$.useState)(!1),p=U(),{mutate:c}=ze(),i=(R,b)=>R?typeof R=="string"?$.default.createElement(x,{to:R},b):R:null,g=()=>e?e.map(R=>{var b;return $.default.createElement("div",{key:R.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},$.default.createElement("button",{onClick:()=>c({providerName:R.name}),style:{display:"flex",alignItems:"center"}},R==null?void 0:R.icon,(b=R.label)!=null?b:$.default.createElement("label",null,R.label)))}):null,C=$.default.createElement("div",{...s},$.default.createElement("h1",{style:{textAlign:"center"}},p("pages.login.title","Sign in to your account")),g(),$.default.createElement("hr",null),$.default.createElement("form",{onSubmit:R=>{R.preventDefault(),c({email:u,password:y,remember:f})},...m},$.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},$.default.createElement("label",null,p("pages.login.fields.email","Email")),$.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:u,onChange:R=>l(R.target.value)}),$.default.createElement("label",null,p("pages.login.fields.password","Password")),$.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:y,onChange:R=>P(R.target.value)}),o!=null?o:$.default.createElement($.default.Fragment,null,$.default.createElement("label",null,p("pages.login.buttons.rememberMe","Remember me"),$.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:f,value:f.toString(),onChange:()=>{d(!f)}}))),$.default.createElement("br",null),r!=null?r:i("/forgot-password",p("pages.login.buttons.forgotPassword","Forgot password?")),$.default.createElement("input",{type:"submit",value:p("pages.login.signin","Sign in")}),t!=null?t:$.default.createElement("span",null,p("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",i("/register",p("pages.login.register","Sign up"))))));return $.default.createElement("div",{...a},n?n(C):C)};var _=E(T("react"));var Vs=({providers:e,loginLink:t,wrapperProps:r,contentProps:o,renderContent:s,formProps:a})=>{let{Link:n}=Q(),[m,x]=(0,_.useState)(""),[u,l]=(0,_.useState)(""),y=U(),{mutate:P,isLoading:f}=Ut(),d=(i,g)=>i?typeof i=="string"?_.default.createElement(n,{to:i},g):i:null,p=()=>e?e.map(i=>{var g;return _.default.createElement("div",{key:i.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},_.default.createElement("button",{onClick:()=>P({providerName:i.name}),style:{display:"flex",alignItems:"center"}},i==null?void 0:i.icon,(g=i.label)!=null?g:_.default.createElement("label",null,i.label)))}):null,c=_.default.createElement("div",{...o},_.default.createElement("h1",{style:{textAlign:"center"}},y("pages.register.title","Sign up for your account")),p(),_.default.createElement("hr",null),_.default.createElement("form",{onSubmit:i=>{i.preventDefault(),P({email:m,password:u})},...a},_.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},_.default.createElement("label",null,y("pages.register.fields.email","Email")),_.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:i=>x(i.target.value)}),_.default.createElement("label",null,y("pages.register.fields.password","Password")),_.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:u,onChange:i=>l(i.target.value)}),_.default.createElement("input",{type:"submit",value:y("pages.register.buttons.submit","Sign up"),disabled:f}),t!=null?t:_.default.createElement(_.default.Fragment,null,_.default.createElement("span",null,y("pages.login.buttons.haveAccount","Have an account?")," ",d("login",y("pages.login.signin","Sign in")))))));return _.default.createElement("div",{...r},s?s(c):c)};var se=E(T("react"));var Bs=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:o,formProps:s})=>{let a=U(),{Link:n}=Q(),[m,x]=(0,se.useState)(""),{mutate:u,isLoading:l}=St(),y=(f,d)=>f?typeof f=="string"?se.default.createElement(n,{to:f},d):f:null,P=se.default.createElement("div",{...r},se.default.createElement("h1",{style:{textAlign:"center"}},a("pages.forgotPassword.title","Forgot your password?")),se.default.createElement("hr",null),se.default.createElement("form",{onSubmit:f=>{f.preventDefault(),u({email:m})},...s},se.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},se.default.createElement("label",null,a("pages.forgotPassword.fields.email","Email")),se.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:f=>x(f.target.value)}),se.default.createElement("input",{type:"submit",disabled:l,value:a("pages.forgotPassword.buttons.submit","Send reset instructions")}),se.default.createElement("br",null),e!=null?e:se.default.createElement("span",null,a("pages.register.buttons.haveAccount","Have an account? ")," ",y("/login",a("pages.login.signin","Sign in"))))));return se.default.createElement("div",{...t},o?o(P):P)};var ae=E(T("react"));var Ns=({wrapperProps:e,contentProps:t,renderContent:r,formProps:o})=>{let s=U(),{mutate:a,isLoading:n}=It(),[m,x]=(0,ae.useState)(""),[u,l]=(0,ae.useState)(""),y=ae.default.createElement("div",{...t},ae.default.createElement("h1",{style:{textAlign:"center"}},s("pages.updatePassword.title","Update Password")),ae.default.createElement("hr",null),ae.default.createElement("form",{onSubmit:P=>{P.preventDefault(),a({password:m,confirmPassword:u})},...o},ae.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ae.default.createElement("label",null,s("pages.updatePassword.fields.password","New Password")),ae.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:m,onChange:P=>x(P.target.value)}),ae.default.createElement("label",null,s("pages.updatePassword.fields.confirmPassword","Confirm New Password")),ae.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:u,onChange:P=>l(P.target.value)}),ae.default.createElement("input",{type:"submit",disabled:n,value:s("pages.updatePassword.buttons.submit","Update")}))));return ae.default.createElement("div",{...e},r?r(y):y)};var ks=e=>{let{type:t}=e;return We.default.createElement(We.default.Fragment,null,(()=>{switch(t){case"register":return We.default.createElement(Vs,{...e});case"forgotPassword":return We.default.createElement(Bs,{...e});case"updatePassword":return We.default.createElement(Ns,{...e});default:return We.default.createElement(As,{...e})}})())};var ne=E(T("react")),Xt=()=>ne.default.createElement(ne.default.Fragment,null,ne.default.createElement("h1",null,"Welcome on board"),ne.default.createElement("p",null,"Your configuration is completed."),ne.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",ne.default.createElement("code",null,"`resources`")," property of ",ne.default.createElement("code",null,"`<Refine>`")),ne.default.createElement("div",{style:{display:"flex",gap:8}},ne.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},ne.default.createElement("button",null,"Documentation")),ne.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},ne.default.createElement("button",null,"Examples")),ne.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},ne.default.createElement("button",null,"Community"))));var j=E(T("react")),Pt=T("@tanstack/react-query"),zs=T("@tanstack/react-query-devtools");var Fs=T("react");var Se=T("react");var Pa="3.99.4",Hs=()=>{let e=(0,Se.useContext)(O),t=(0,Se.useContext)($e),r=(0,Se.useContext)(Me),o=(0,Se.useContext)(gt),s=(0,Se.useContext)(mt),{i18nProvider:a}=(0,Se.useContext)(Te),n=(0,Se.useContext)(yt),m=(0,Se.useContext)(Fe),{resources:x}=N(),u=e.isProvided,l=!!t.create||!!t.get||!!t.update,y=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),P=!!o.useHistory||!!o.Link||!!o.Prompt||!!o.useLocation||!!o.useParams,f=!!s,d=!!(a!=null&&a.changeLocale)||!!(a!=null&&a.getLocale)||!!(a!=null&&a.translate),p=!!n.close||!!n.open,c=!!m.can;return{providers:{auth:u,auditLog:l,live:y,router:P,data:f,i18n:d,notification:p,accessControl:c},version:Pa,resourceCount:x.length}};var ba=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},$s=()=>{let e=Hs();return(0,Fs.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${ba(e)}`},[]),null};var Gs=T("react");var Os=T("react"),Ws=E(T("lodash-es/isEqual")),Ks=e=>{let t=(0,Os.useRef)(e);return(0,Ws.default)(t.current,e)||(t.current=e),t.current};var Hr=(e,t)=>{let r=Ks(t);return(0,Gs.useMemo)(e,r)};var _s=({authProvider:e,dataProvider:t,routerProvider:r,notificationProvider:o,accessControlProvider:s,auditLogProvider:a,resources:n,DashboardPage:m,ReadyPage:x,LoginPage:u,catchAll:l,children:y,liveProvider:P,i18nProvider:f,mutationMode:d,syncWithLocation:p,warnWhenUnsavedChanges:c,undoableTimeout:i,Title:g,Layout:C,Sider:R,Header:b,Footer:D,OffLayoutArea:h,reactQueryClientConfig:v,reactQueryDevtoolConfig:M,liveMode:L,onLiveEvent:k,disableTelemetry:V,options:A})=>{let{optionsWithDefaults:I,disableTelemetryWithDefault:B,reactQueryWithDefaults:w}=fr({options:A,disableTelemetry:V,liveMode:L,mutationMode:d,reactQueryClientConfig:v,reactQueryDevtoolConfig:M,syncWithLocation:p,warnWhenUnsavedChanges:c,undoableTimeout:i}),te=Hr(()=>{var fe;return w.clientConfig instanceof Pt.QueryClient?w.clientConfig:new Pt.QueryClient({...w.clientConfig,defaultOptions:{...w.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(fe=w.clientConfig.defaultOptions)==null?void 0:fe.queries}}})},[w.clientConfig]),me=j.default.useMemo(()=>typeof o=="function"?o:()=>o!=null?o:{},[o])(),q=Hr(()=>{let fe=[];return n==null||n.forEach(z=>{var ge;fe.push({key:z.key,name:z.name,label:(ge=z.options)==null?void 0:ge.label,icon:z.icon,route:_e(z,n),canCreate:!!z.create,canEdit:!!z.edit,canShow:!!z.show,canDelete:z.canDelete,create:z.create,show:z.show,list:z.list,edit:z.edit,options:z.options,parentName:z.parentName})}),fe},[n]);if(q.length===0)return x?j.default.createElement(x,null):j.default.createElement(Xt,null);let{RouterComponent:J=j.default.Fragment}=r;return j.default.createElement(Pt.QueryClientProvider,{client:te},j.default.createElement(es,{...me},j.default.createElement(_r,{...e!=null?e:{},isProvided:Boolean(e)},j.default.createElement(Ko,{...t},j.default.createElement(_o,{liveProvider:P},j.default.createElement(Cs,{...r},j.default.createElement(Zo,{resources:q},j.default.createElement(os,{i18nProvider:f},j.default.createElement(xs,{...s!=null?s:{}},j.default.createElement(hs,{...a!=null?a:{}},j.default.createElement(Tr,null,j.default.createElement(Uo,{mutationMode:I.mutationMode,warnWhenUnsavedChanges:I.warnWhenUnsavedChanges,syncWithLocation:I.syncWithLocation,Title:g,undoableTimeout:I.undoableTimeout,catchAll:l,DashboardPage:m,LoginPage:u,Layout:C,Sider:R,Footer:D,Header:b,OffLayoutArea:h,hasDashboard:!!m,liveMode:I.liveMode,onLiveEvent:k,options:I},j.default.createElement(is,null,j.default.createElement(J,null,y,!B&&j.default.createElement($s,null),j.default.createElement(er,null)))))))))))))),w.devtoolConfig===!1?null:j.default.createElement(zs.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...w.devtoolConfig}))};var tr=T("react");var Cr=({notification:e})=>{let t=U(),{notificationDispatch:r}=ye(),{open:o}=re(),[s,a]=(0,tr.useState)(),n=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||o==null||o({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:ot(e.seconds)},`You have ${ot(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:ot(e.seconds)}),e.seconds>0)){s&&clearTimeout(s);let m=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);a(m)}};return(0,tr.useEffect)(()=>{n()},[e]),null};var tt=E(T("react"));var js=({children:e,Layout:t,Sider:r,Header:o,Title:s,Footer:a,OffLayoutArea:n})=>{let{Layout:m,Footer:x,Header:u,Sider:l,Title:y,OffLayoutArea:P}=Le(),f=t!=null?t:m;return tt.default.createElement(f,{Sider:r!=null?r:l,Header:o!=null?o:u,Footer:a!=null?a:x,Title:s!=null?s:y,OffLayoutArea:n!=null?n:P},e,tt.default.createElement(Da,null))},Da=()=>{let{Prompt:e}=Q(),t=U(),{warnWhen:r,setWarnWhen:o}=Xe(),s=a=>(a.preventDefault(),a.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),a.returnValue);return(0,tt.useEffect)(()=>(r&&window.addEventListener("beforeunload",s),window.removeEventListener("beforeunload",s)),[r]),tt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:o})};var Ke=E(T("react"));var qs=({children:e,fallback:t,loading:r})=>{let{isSuccess:o,isLoading:s,isError:a}=Lt(),{replace:n}=Z(),{useLocation:m}=Q(),{pathname:x,search:u}=m();if(s)return Ke.default.createElement(Ke.default.Fragment,null,r)||null;if(a){if(!t){let l=`${x}${u}`;return x.includes("/login")||n(`/login?to=${encodeURIComponent(l)}`),null}return Ke.default.createElement(Ke.default.Fragment,null,t)}return o?Ke.default.createElement(Ke.default.Fragment,null,e):null};var rr=T("react");var er=()=>{let{useLocation:e}=Q(),{checkAuth:t}=(0,rr.useContext)(O),r=e();return(0,rr.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null};var Ge=E(T("react"));var Ys=({resource:e,action:t,params:r,fallback:o,children:s,...a})=>{let{data:n}=Qr({resource:e,action:t,params:r});return n!=null&&n.can?Ge.default.isValidElement(s)?Ge.default.cloneElement(s,a):Ge.default.createElement(Ge.default.Fragment,null,s):(n==null?void 0:n.can)===!1?Ge.default.createElement(Ge.default.Fragment,null,o!=null?o:null):null};})();
//# sourceMappingURL=index.js.map