(()=>{var Ba=Object.create;var zr=Object.defineProperty;var Ka=Object.getOwnPropertyDescriptor;var _a=Object.getOwnPropertyNames;var Ga=Object.getPrototypeOf,Za=Object.prototype.hasOwnProperty;var $=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var Qt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ya=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of _a(t))!Za.call(e,a)&&a!==r&&zr(e,a,{get:()=>t[a],enumerable:!(n=Ka(t,a))||n.enumerable});return e};var Q=(e,t,r)=>(r=e!=null?Ba(Ga(e)):{},Ya(t||!e||!e.__esModule?zr(r,"default",{value:e,enumerable:!0}):r,e));var be=Qt((bl,pr)=>{var Ja=Object.create,It=Object.defineProperty,Xa=Object.getOwnPropertyDescriptor,eo=Object.getOwnPropertyNames,to=Object.getPrototypeOf,ro=Object.prototype.hasOwnProperty,no=(e,t)=>{for(var r in t)It(e,r,{get:t[r],enumerable:!0})},Et=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of eo(t))!ro.call(e,a)&&a!==r&&It(e,a,{get:()=>t[a],enumerable:!(n=Xa(t,a))||n.enumerable});return e},ao=(e,t,r)=>(Et(e,t,"default"),r&&Et(r,t,"default")),N=(e,t,r)=>(r=e!=null?Ja(to(e)):{},Et(t||!e||!e.__esModule?It(r,"default",{value:e,enumerable:!0}):r,e)),oo=e=>Et(It({},"__esModule",{value:!0}),e),Xt={};no(Xt,{AuthPage:()=>bs,Authenticated:()=>Ls,CanAccess:()=>Rs,ErrorComponent:()=>fs,LayoutWrapper:()=>qs,LoginPage:()=>Yn,ReadyPage:()=>Jn,Refine:()=>Ns,RouteChangeHandler:()=>ea,UndoableQueue:()=>Xn,createTreeView:()=>Fn,file2Base64:()=>Vo,getDefaultFilter:()=>Oo,getDefaultSortOrder:()=>To,getNextPageParam:()=>An,getPreviousPageParam:()=>Ln,handleUseParams:()=>Wo,importCSVMapper:()=>Pn,parseTableParams:()=>rr,parseTableParamsFromQuery:()=>Mo,routeGenerator:()=>ar,setInitialFilters:()=>Zt,setInitialSorters:()=>Yt,stringifyTableParams:()=>_t,unionFilters:()=>lt,unionSorters:()=>Gt,useApiUrl:()=>oi,useAuthenticated:()=>kn,useBreadcrumb:()=>ps,useCan:()=>Gn,useCanWithoutCache:()=>Yi,useCancelNotification:()=>nt,useCheckError:()=>me,useCreate:()=>sr,useCreateMany:()=>Tn,useCustom:()=>si,useCustomMutation:()=>ui,useDataProvider:()=>te,useDelete:()=>Xo,useDeleteMany:()=>ai,useExport:()=>Mi,useForgotPassword:()=>$n,useForm:()=>Ti,useGetIdentity:()=>hn,useGetLocale:()=>Ii,useHandleNotification:()=>ue,useImport:()=>Ui,useInfiniteList:()=>mi,useInvalidate:()=>_e,useIsExistAuthentication:()=>qo,useList:()=>or,useLiveMode:()=>Wn,useLog:()=>Lt,useLogList:()=>ss,useLogin:()=>er,useLogout:()=>bn,useMany:()=>Rn,useMenu:()=>ms,useModal:()=>zi,useMutationMode:()=>ot,useNavigation:()=>he,useNotification:()=>De,useOne:()=>ir,usePermissions:()=>co,usePublish:()=>Ke,useRedirectionAfterSubmission:()=>Bn,useRefineContext:()=>Nt,useRegister:()=>Cn,useResource:()=>ee,useResourceSubscription:()=>dt,useResourceWithRoute:()=>Fe,useRouterContext:()=>J,useSelect:()=>es,useSetLocale:()=>wi,useShow:()=>Vi,useSubscription:()=>yi,useSyncWithLocation:()=>jn,useTable:()=>ns,useTitle:()=>Ai,useTranslate:()=>B,useUpdate:()=>Mn,useUpdateMany:()=>ri,useUpdatePassword:()=>xn,useWarnAboutChange:()=>cr,userFriendlyResourceName:()=>nr});pr.exports=oo(Xt);ao(Xt,$("@tanstack/react-query"),pr.exports);var je=N($("react")),io=$("react"),yn=N($("react")),so=$("@tanstack/react-query"),le=yn.default.createContext({}),lo=({children:e,isProvided:t,...r})=>{let{replace:n}=he(),a=(0,so.useQueryClient)(),o=()=>{a.invalidateQueries(["useAuthenticated"]),a.invalidateQueries(["getUserIdentity"]),a.invalidateQueries(["usePermissions"])},s=async y=>{var h;try{let p=await((h=r.login)==null?void 0:h.call(r,y));return o(),Promise.resolve(p)}catch(p){return Promise.reject(p)}},f=async y=>{var h;try{let p=await((h=r.register)==null?void 0:h.call(r,y));return o(),Promise.resolve(p)}catch(p){return Promise.reject(p)}},c=async y=>{var h;try{let p=await((h=r.logout)==null?void 0:h.call(r,y));return o(),Promise.resolve(p)}catch(p){return Promise.reject(p)}},m=async y=>{var h;try{return await((h=r.checkAuth)==null?void 0:h.call(r,y)),Promise.resolve()}catch(p){return p!=null&&p.redirectPath&&n(p.redirectPath),Promise.reject(p)}};return yn.default.createElement(le.Provider,{value:{...r,login:s,logout:c,checkAuth:m,register:f,isProvided:t}},e)},uo=$("@tanstack/react-query"),co=e=>{let{getPermissions:t}=(0,io.useContext)(le);return(0,uo.useQuery)(["usePermissions"],t!=null?t:()=>Promise.resolve(void 0),{enabled:!!t,...e})},po=N($("react")),mo=$("@tanstack/react-query"),hn=({queryOptions:e}={})=>{let{getUserIdentity:t}=po.default.useContext(le);return(0,mo.useQuery)(["getUserIdentity"],t!=null?t:()=>Promise.resolve({}),{enabled:!!t,retry:!1,...e})},fo=N($("react")),go=$("@tanstack/react-query"),bn=({mutationOptions:e}={})=>{let{push:t}=he(),{logout:r}=fo.default.useContext(le),{open:n}=De();return(0,go.useMutation)(["useLogout"],r,{onSuccess:(a,o)=>{var s;let f=(s=o==null?void 0:o.redirectPath)!=null?s:a;if(f!==!1){if(f){t(f);return}t("/login")}},onError:a=>{n==null||n({key:"useLogout-error",type:"error",message:(a==null?void 0:a.name)||"Logout Error",description:(a==null?void 0:a.message)||"Something went wrong during logout"})},...e})},vo=N($("react")),yo=$("@tanstack/react-query"),ho=N($("qs")),er=({mutationOptions:e}={})=>{let{replace:t}=he(),{login:r}=vo.default.useContext(le),{useLocation:n}=J(),{search:a}=n(),{close:o,open:s}=De(),{to:f}=ho.default.parse(a,{ignoreQueryPrefix:!0});return(0,yo.useMutation)(["useLogin"],r,{onSuccess:c=>{if(f)return t(f);c!==!1&&t(typeof c=="string"?c:"/"),o==null||o("login-error")},onError:c=>{s==null||s({message:(c==null?void 0:c.name)||"Login Error",description:(c==null?void 0:c.message)||"Invalid credentials",key:"login-error",type:"error"})},...e})},bo=N($("react")),Co=$("@tanstack/react-query"),Cn=({mutationOptions:e}={})=>{let{replace:t}=he(),{register:r}=bo.default.useContext(le),{close:n,open:a}=De();return(0,Co.useMutation)(["useRegister"],r,{onSuccess:o=>{o!==!1&&t(o||"/"),n==null||n("register-error")},onError:o=>{a==null||a({message:(o==null?void 0:o.name)||"Register Error",description:(o==null?void 0:o.message)||"Error while registering",key:"register-error",type:"error"})},...e})},$o=N($("react")),xo=$("@tanstack/react-query"),$n=({mutationOptions:e}={})=>{let{replace:t}=he(),{forgotPassword:r}=$o.default.useContext(le),{close:n,open:a}=De();return(0,xo.useMutation)(["useForgotPassword"],r,{onSuccess:o=>{o!==!1&&o&&t(o),n==null||n("forgot-password-error")},onError:o=>{a==null||a({message:(o==null?void 0:o.name)||"Forgot Password Error",description:(o==null?void 0:o.message)||"Error while resetting password",key:"forgot-password-error",type:"error"})},...e})},ko=N($("react")),Po=$("@tanstack/react-query"),Eo=N($("qs")),xn=({mutationOptions:e}={})=>{let{replace:t}=he(),{updatePassword:r}=ko.default.useContext(le),{close:n,open:a}=De(),{useLocation:o}=J(),{search:s}=o(),f=Eo.default.parse(s,{ignoreQueryPrefix:!0});return(0,Po.useMutation)(["useUpdatePassword"],async c=>r==null?void 0:r({...f,...c}),{onSuccess:c=>{c!==!1&&c&&t(c),n==null||n("update-password-error")},onError:c=>{a==null||a({message:(c==null?void 0:c.name)||"Update Password Error",description:(c==null?void 0:c.message)||"Error while updating password",key:"update-password-error",type:"error"})},...e})},wo=$("react"),Io=$("@tanstack/react-query"),kn=e=>{let{checkAuth:t}=(0,wo.useContext)(le);return(0,Io.useQuery)(["useAuthenticated",e],async()=>{var r;return(r=await(t==null?void 0:t(e)))!=null?r:{}},{retry:!1})},So=N($("react")),Fo=$("@tanstack/react-query"),me=()=>{let{checkError:e}=So.default.useContext(le),{mutate:t}=bn();return(0,Fo.useMutation)(["useCheckError"],e,{onError:r=>{t({redirectPath:r})}})},No=$("react"),qo=()=>{let{isProvided:e}=(0,No.useContext)(le);return e||!1},Ao=$("@tanstack/react-query"),Ut=e=>e/1e3,Lo=N($("lodash/zip")),Ro=N($("lodash/fromPairs")),Pn=(e,t=r=>r)=>{let[r,...n]=e;return n.map(a=>(0,Ro.default)((0,Lo.default)(r,a))).map((a,o,s)=>t.call(void 0,a,o,s))},Hr=N($("pluralize")),tr=N($("qs")),En=N($("lodash/unionWith")),wn=N($("lodash/differenceWith")),Do=N($("warn-once")),rr=e=>{let{current:t,pageSize:r,sorter:n,filters:a}=tr.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:n!=null?n:[],parsedFilters:a!=null?a:[]}},Mo=e=>{let t=tr.default.stringify(e);return rr(`/${t}`)},_t=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:n,filters:a,...o}=e;return tr.default.stringify({...o,...r||{},sorter:n,filters:a},t)},In=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Sn=(e,t)=>e.field==t.field,lt=(e,t,r=[])=>(t.filter(n=>(n.operator==="or"||n.operator==="and")&&!n.key).length>1&&(0,Do.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,En.default)(e,t,r,In).filter(n=>n.value!==void 0&&n.value!==null&&(n.operator!=="or"||n.operator==="or"&&n.value.length!==0)&&(n.operator!=="and"||n.operator==="and"&&n.value.length!==0))),Gt=(e,t)=>(0,En.default)(e,t,Sn).filter(r=>r.order!==void 0&&r.order!==null),Zt=(e,t)=>[...(0,wn.default)(t,e,In),...e],Yt=(e,t)=>[...(0,wn.default)(t,e,Sn),...e],To=(e,t)=>{if(!t)return;let r=t.find(n=>n.field===e);if(r)return r.order},Oo=(e,t,r="eq")=>{let n=t==null?void 0:t.find(a=>{if(a.operator!=="or"&&a.operator!=="and"&&"field"in a){let{operator:o,field:s}=a;return s===e&&o===r}});if(n)return n.value||[]},Vo=e=>new Promise((t,r)=>{let n=new FileReader,a=()=>{n.result&&(n.removeEventListener("load",a,!1),t(n.result))};n.addEventListener("load",a,!1),n.readAsDataURL(e.originFileObj),n.onerror=o=>(n.removeEventListener("load",a,!1),r(o))}),nr=(e="",t)=>{let r=ut(e);return t==="singular"?Hr.default.singular(r):Hr.default.plural(r)},Wo=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,fe=(e,t,r)=>{let n=t||"default",a={all:[n],resourceAll:[n,e||""],list:o=>[...a.resourceAll,"list",{...o,...r}],many:o=>[...a.resourceAll,"getMany",o&&o.map(String),{...r}].filter(s=>s!==void 0),detail:o=>[...a.resourceAll,"detail",o==null?void 0:o.toString(),{...r}],logList:o=>["logList",e,o,r].filter(s=>s!==void 0)};return a},Qo=(e,t)=>!e||!t?!1:!!e.find(r=>r===t),Uo=e=>t=>e.parentName?t.name===e.parentName:!1,ar=(e,t)=>{var r,n,a,o,s;let f,c=(n=(r=e.options)==null?void 0:r.route)!=null?n:e.name;if(e.parentName){let m=t.find(Uo(e));m!=null&&m.parentName?f=`${ar(m,t)}/${c}`:e.parentName&&(f=`${(s=(o=(a=m==null?void 0:m.options)==null?void 0:a.route)!=null?o:m==null?void 0:m.name)!=null?s:e.parentName}/${c}`)}else f=c;return f},Fn=e=>{var t,r,n;let a=[],o={},s={},f,c;for(let m=0;m<e.length;m++){f=e[m];let y=(n=(r=f.route)!=null?r:(t=f.options)==null?void 0:t.route)!=null?n:"";o[y]=f,o[y].children=[],s[f.name]=f,s[f.name].children=[]}for(let m in o)o.hasOwnProperty(m)&&(c=o[m],c.parentName&&s[c.parentName]?s[c.parentName].children.push(c):a.push(c));return a},ut=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),Nn=N($("react")),zo=N($("react")),qn=({children:e})=>zo.default.createElement("div",null,e),Se={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},Re=Nn.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:qn,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:Se}),Ho=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:n,undoableTimeout:a,children:o,DashboardPage:s,Title:f,Layout:c=qn,Header:m,Sider:y,Footer:h,OffLayoutArea:p,LoginPage:d=Yn,catchAll:g,liveMode:i="off",onLiveEvent:b,options:C})=>Nn.default.createElement(Re.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:n,Title:f,undoableTimeout:a,Layout:c,Header:m,Sider:y,Footer:h,OffLayoutArea:p,DashboardPage:s,LoginPage:d,catchAll:g,liveMode:i,onLiveEvent:b,options:C}},o),jo=({options:e,disableTelemetry:t,liveMode:r,mutationMode:n,reactQueryClientConfig:a,reactQueryDevtoolConfig:o,syncWithLocation:s,undoableTimeout:f,warnWhenUnsavedChanges:c}={})=>{var m,y,h,p,d,g,i,b,C,l,x,k,P,S,u,w,I,v,E,q,T,R,M,O;let re={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(y=(m=e==null?void 0:e.mutationMode)!=null?m:n)!=null?y:Se.mutationMode,undoableTimeout:(p=(h=e==null?void 0:e.undoableTimeout)!=null?h:f)!=null?p:Se.undoableTimeout,syncWithLocation:(g=(d=e==null?void 0:e.syncWithLocation)!=null?d:s)!=null?g:Se.syncWithLocation,warnWhenUnsavedChanges:(b=(i=e==null?void 0:e.warnWhenUnsavedChanges)!=null?i:c)!=null?b:Se.warnWhenUnsavedChanges,liveMode:(l=(C=e==null?void 0:e.liveMode)!=null?C:r)!=null?l:Se.liveMode,redirect:{afterCreate:(k=(x=e==null?void 0:e.redirect)==null?void 0:x.afterCreate)!=null?k:Se.redirect.afterCreate,afterClone:(S=(P=e==null?void 0:e.redirect)==null?void 0:P.afterClone)!=null?S:Se.redirect.afterClone,afterEdit:(w=(u=e==null?void 0:e.redirect)==null?void 0:u.afterEdit)!=null?w:Se.redirect.afterEdit}},de=(v=(I=e==null?void 0:e.disableTelemetry)!=null?I:t)!=null?v:!1,ye={clientConfig:(T=(q=(E=e==null?void 0:e.reactQuery)==null?void 0:E.clientConfig)!=null?q:a)!=null?T:{},devtoolConfig:(O=(M=(R=e==null?void 0:e.reactQuery)==null?void 0:R.devtoolConfig)!=null?M:o)!=null?O:{}};return{optionsWithDefaults:re,disableTelemetryWithDefault:de,reactQueryWithDefaults:ye}},Bo=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit}},jr=async(e,t,r)=>{let n=[];for(let[a,o]of e.entries())try{let s=await o();n.push(t(s,a))}catch(s){n.push(r(s,a))}return n},V=(e,t,r)=>{var n;if(t)return t;let a=r==null?void 0:r.find(o=>o.name===e);return(n=a==null?void 0:a.options)!=null&&n.dataProviderName?a.options.dataProviderName:"default"},St=async e=>({data:(await Promise.all(e)).map(t=>t.data)}),An=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let n=(t==null?void 0:t.current)||1,a=(t==null?void 0:t.pageSize)||10,o=Math.ceil((e.total||0)/a);return n<o?Number(n)+1:void 0},Ln=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let n=(t==null?void 0:t.current)||1;return n===1?void 0:n-1},or=({resource:e,config:t,queryOptions:r,successNotification:n,errorNotification:a,metaData:o,liveMode:s,onLiveEvent:f,liveParams:c,dataProviderName:m})=>{let{resources:y}=ee(),h=te(),p=fe(e,V(e,m,y),o),{getList:d}=h(V(e,m,y)),g=B(),{mutate:i}=me(),b=ue(),C=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return dt({resource:e,types:["*"],params:{metaData:o,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...c},channel:`resources/${e}`,enabled:C,liveMode:s,onLiveEvent:f}),(0,Ao.useQuery)(p.list(t),({queryKey:l,pageParam:x,signal:k})=>{let{hasPagination:P,...S}=t||{};return d({resource:e,...S,hasPagination:P,metaData:{...o,queryContext:{queryKey:l,pageParam:x,signal:k}}})},{...r,onSuccess:l=>{var x;(x=r==null?void 0:r.onSuccess)==null||x.call(r,l);let k=typeof n=="function"?n(l,{metaData:o,config:t},e):n;b(k)},onError:l=>{var x;i(l),(x=r==null?void 0:r.onError)==null||x.call(r,l);let k=typeof a=="function"?a(l,{metaData:o,config:t},e):a;b(k,{key:`${e}-useList-notification`,message:g("notifications.error",{statusCode:l.statusCode},`Error (status code: ${l.statusCode})`),description:l.message,type:"error"})}})},Ko=$("@tanstack/react-query"),ir=({resource:e,id:t,queryOptions:r,successNotification:n,errorNotification:a,metaData:o,liveMode:s,onLiveEvent:f,liveParams:c,dataProviderName:m})=>{let{resources:y}=ee(),h=te(),p=fe(e,V(e,m,y),o),{getOne:d}=h(V(e,m,y)),g=B(),{mutate:i}=me(),b=ue();return dt({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,metaData:o,subscriptionType:"useOne",...c},enabled:r==null?void 0:r.enabled,liveMode:s,onLiveEvent:f}),(0,Ko.useQuery)(p.detail(t),({queryKey:C,pageParam:l,signal:x})=>d({resource:e,id:t,metaData:{...o,queryContext:{queryKey:C,pageParam:l,signal:x}}}),{...r,onSuccess:C=>{var l;(l=r==null?void 0:r.onSuccess)==null||l.call(r,C);let x=typeof n=="function"?n(C,{id:t,metaData:o},e):n;b(x)},onError:C=>{var l;i(C),(l=r==null?void 0:r.onError)==null||l.call(r,C);let x=typeof a=="function"?a(C,{id:t,metaData:o},e):a;b(x,{key:`${t}-${e}-getOne-notification`,message:g("notifications.error",{statusCode:C.statusCode},`Error (status code: ${C.statusCode})`),description:C.message,type:"error"})}})},_o=$("@tanstack/react-query"),Rn=({resource:e,ids:t,queryOptions:r,successNotification:n,errorNotification:a,metaData:o,liveMode:s,onLiveEvent:f,liveParams:c,dataProviderName:m})=>{let{resources:y}=ee(),h=te(),p=fe(e,V(e,m,y),o),{getMany:d,getOne:g}=h(V(e,m,y)),i=B(),{mutate:b}=me(),C=ue(),l=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return dt({resource:e,types:["*"],params:{ids:t!=null?t:[],metaData:o,subscriptionType:"useMany",...c},channel:`resources/${e}`,enabled:l,liveMode:s,onLiveEvent:f}),(0,_o.useQuery)(p.many(t),({queryKey:x,pageParam:k,signal:P})=>d?d({resource:e,ids:t,metaData:{...o,queryContext:{queryKey:x,pageParam:k,signal:P}}}):St(t.map(S=>g({resource:e,id:S,metaData:{...o,queryContext:{queryKey:x,pageParam:k,signal:P}}}))),{...r,onSuccess:x=>{var k;(k=r==null?void 0:r.onSuccess)==null||k.call(r,x);let P=typeof n=="function"?n(x,t,e):n;C(P)},onError:x=>{var k;b(x),(k=r==null?void 0:r.onError)==null||k.call(r,x);let P=typeof a=="function"?a(x,t,e):a;C(P,{key:`${t[0]}-${e}-getMany-notification`,message:i("notifications.error",{statusCode:x.statusCode},`Error (status code: ${x.statusCode})`),description:x.message,type:"error"})}})},Br=$("@tanstack/react-query"),Pt=N($("react")),zt=N($("lodash/isEqual")),Dn=Pt.default.createContext({notifications:[],notificationDispatch:()=>!1}),Go=[],Zo=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,zt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,zt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,zt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},Yo=({children:e})=>{let[t,r]=(0,Pt.useReducer)(Zo,Go),n={notifications:t,notificationDispatch:r};return Pt.default.createElement(Dn.Provider,{value:n},e,typeof window<"u"&&t.map(a=>Pt.default.createElement(Xn,{key:`${a.id}-${a.resource}-queue`,notification:a})))},Kr=N($("pluralize")),Mn=({mutationOptions:e}={})=>{let{resources:t}=ee(),r=(0,Br.useQueryClient)(),n=te(),{mutationMode:a,undoableTimeout:o}=ot(),s=B(),{mutate:f}=me(),c=Ke(),{log:m}=Lt(),{notificationDispatch:y}=nt(),h=ue(),p=_e();return(0,Br.useMutation)(({id:d,values:g,resource:i,mutationMode:b,undoableTimeout:C,onCancel:l,metaData:x,dataProviderName:k})=>{let P=b!=null?b:a,S=C!=null?C:o;return P!=="undoable"?n(V(i,k,t)).update({resource:i,id:d,variables:g,metaData:x}):new Promise((u,w)=>{let I=()=>{n(V(i,k,t)).update({resource:i,id:d,variables:g,metaData:x}).then(E=>u(E)).catch(E=>w(E))},v=()=>{w({message:"mutationCancelled"})};l&&l(v),y({type:"ADD",payload:{id:d,resource:i,cancelMutation:v,doMutation:I,seconds:S,isSilent:!!l}})})},{onMutate:async({resource:d,id:g,mutationMode:i,values:b,dataProviderName:C})=>{let l=fe(d,V(d,C,t)),x=r.getQueriesData(l.resourceAll),k=i!=null?i:a;return await r.cancelQueries(l.resourceAll,void 0,{silent:!0}),k!=="pessimistic"&&(r.setQueriesData(l.list(),P=>{if(!P)return null;let S=P.data.map(u=>{var w;return((w=u.id)==null?void 0:w.toString())===(g==null?void 0:g.toString())?{id:g,...b}:u});return{...P,data:S}}),r.setQueriesData(l.many(),P=>{if(!P)return null;let S=P.data.map(u=>{var w;return((w=u.id)==null?void 0:w.toString())===(g==null?void 0:g.toString())&&(u={id:g,...b}),u});return{...P,data:S}}),r.setQueriesData(l.detail(g),P=>P?{...P,data:{...P.data,...b}}:null)),{previousQueries:x,queryKey:l}},onSettled:(d,g,{id:i,resource:b,dataProviderName:C,invalidates:l=["list","many","detail"]})=>{p({resource:b,dataProviderName:V(b,C,t),invalidates:l,id:i}),y({type:"REMOVE",payload:{id:i,resource:b}})},onSuccess:(d,{id:g,resource:i,successNotification:b,dataProviderName:C,values:l,metaData:x},k)=>{var P;let S=Kr.default.singular(i),u=typeof b=="function"?b(d,{id:g,values:l},i):b;h(u,{key:`${g}-${i}-notification`,description:s("notifications.success","Successful"),message:s("notifications.editSuccess",{resource:s(`${i}.${i}`,S)},`Successfully updated ${S}`),type:"success"}),c==null||c({channel:`resources/${i}`,type:"updated",payload:{ids:(P=d.data)!=null&&P.id?[d.data.id]:void 0},date:new Date});let w;if(k){let T=r.getQueryData(k.queryKey.detail(g));w=Object.keys(l).reduce((R,M)=>{var O;return R[M]=(O=T==null?void 0:T.data)==null?void 0:O[M],R},{})}let{fields:I,operation:v,variables:E,...q}=x||{};m==null||m.mutate({action:"update",resource:i,data:l,previousData:w,meta:{id:g,dataProviderName:V(i,C,t),...q}})},onError:(d,{id:g,resource:i,errorNotification:b,values:C},l)=>{if(l)for(let x of l.previousQueries)r.setQueryData(x[0],x[1]);if(d.message!=="mutationCancelled"){f==null||f(d);let x=Kr.default.singular(i),k=typeof b=="function"?b(d,{id:g,values:C},i):b;h(k,{key:`${g}-${i}-notification`,message:s("notifications.editError",{resource:s(`${i}.${i}`,x),statusCode:d.statusCode},`Error when updating ${x} (status code: ${d.statusCode})`),description:d.message,type:"error"})}},...e})},Jo=$("@tanstack/react-query"),_r=N($("pluralize")),sr=({mutationOptions:e}={})=>{let{mutate:t}=me(),r=te(),n=_e(),{resources:a}=ee(),o=B(),s=Ke(),{log:f}=Lt(),c=ue();return(0,Jo.useMutation)(({resource:m,values:y,metaData:h,dataProviderName:p})=>r(V(m,p,a)).create({resource:m,variables:y,metaData:h}),{onSuccess:(m,{resource:y,successNotification:h,dataProviderName:p,invalidates:d=["list","many"],values:g,metaData:i})=>{var b,C,l;let x=_r.default.singular(y),k=typeof h=="function"?h(m,g,y):h;c(k,{key:`create-${y}-notification`,message:o("notifications.createSuccess",{resource:o(`${y}.${y}`,x)},`Successfully created ${x}`),description:o("notifications.success","Success"),type:"success"}),n({resource:y,dataProviderName:V(y,p,a),invalidates:d}),s==null||s({channel:`resources/${y}`,type:"created",payload:{ids:(b=m==null?void 0:m.data)!=null&&b.id?[m.data.id]:void 0},date:new Date});let{fields:P,operation:S,variables:u,...w}=i||{};f==null||f.mutate({action:"create",resource:y,data:g,meta:{dataProviderName:V(y,p,a),id:(l=(C=m==null?void 0:m.data)==null?void 0:C.id)!=null?l:void 0,...w}})},onError:(m,{resource:y,errorNotification:h,values:p})=>{t(m);let d=_r.default.singular(y),g=typeof h=="function"?h(m,p,y):h;c(g,{key:`create-${y}-notification`,description:m.message,message:o("notifications.createError",{resource:o(`${y}.${y}`,d),statusCode:m.statusCode},`There was an error creating ${d} (status code: ${m.statusCode})`),type:"error"})},...e})},Gr=$("@tanstack/react-query"),Zr=N($("pluralize")),Xo=({mutationOptions:e}={})=>{let{mutate:t}=me(),r=te(),{resources:n}=ee(),a=(0,Gr.useQueryClient)(),{mutationMode:o,undoableTimeout:s}=ot(),{notificationDispatch:f}=nt(),c=B(),m=Ke(),{log:y}=Lt(),h=ue(),p=_e();return(0,Gr.useMutation)(({id:d,mutationMode:g,undoableTimeout:i,resource:b,onCancel:C,metaData:l,dataProviderName:x,values:k})=>{let P=g!=null?g:o,S=i!=null?i:s;return P!=="undoable"?r(V(b,x,n)).deleteOne({resource:b,id:d,metaData:l,variables:k}):new Promise((u,w)=>{let I=()=>{r(V(b,x,n)).deleteOne({resource:b,id:d,metaData:l,variables:k}).then(E=>u(E)).catch(E=>w(E))},v=()=>{w({message:"mutationCancelled"})};C&&C(v),f({type:"ADD",payload:{id:d,resource:b,cancelMutation:v,doMutation:I,seconds:S,isSilent:!!C}})})},{onMutate:async({id:d,resource:g,mutationMode:i,dataProviderName:b})=>{let C=fe(g,V(g,b,n)),l=i!=null?i:o;await a.cancelQueries(C.resourceAll,void 0,{silent:!0});let x=a.getQueriesData(C.resourceAll);return l!=="pessimistic"&&(a.setQueriesData(C.list(),k=>k?{data:k.data.filter(P=>{var S;return((S=P.id)==null?void 0:S.toString())!==d.toString()}),total:k.total-1}:null),a.setQueriesData(C.many(),k=>{if(!k)return null;let P=k.data.filter(S=>{var u;return((u=S.id)==null?void 0:u.toString())!==(d==null?void 0:d.toString())});return{...k,data:P}})),{previousQueries:x,queryKey:C}},onSettled:(d,g,{id:i,resource:b,dataProviderName:C,invalidates:l=["list","many"]})=>{p({resource:b,dataProviderName:V(b,C,n),invalidates:l}),f({type:"REMOVE",payload:{id:i,resource:b}})},onSuccess:(d,{id:g,resource:i,successNotification:b,dataProviderName:C,metaData:l},x)=>{let k=Zr.default.singular(i!=null?i:"");a.removeQueries(x==null?void 0:x.queryKey.detail(g));let P=typeof b=="function"?b(d,g,i):b;h(P,{key:`${g}-${i}-notification`,description:c("notifications.success","Success"),message:c("notifications.deleteSuccess",{resource:c(`${i}.${i}`,k)},`Successfully deleted a ${k}`),type:"success"}),m==null||m({channel:`resources/${i}`,type:"deleted",payload:{ids:g?[g]:[]},date:new Date});let{fields:S,operation:u,variables:w,...I}=l||{};y==null||y.mutate({action:"delete",resource:i,meta:{id:g,dataProviderName:V(i,C,n),...I}}),a.removeQueries(x==null?void 0:x.queryKey.detail(g))},onError:(d,{id:g,resource:i,errorNotification:b},C)=>{if(C)for(let l of C.previousQueries)a.setQueryData(l[0],l[1]);if(d.message!=="mutationCancelled"){t(d);let l=Zr.default.singular(i!=null?i:""),x=typeof b=="function"?b(d,g,i):b;h(x,{key:`${g}-${i}-notification`,message:c("notifications.deleteError",{resource:l,statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}},...e})},ei=$("@tanstack/react-query"),ti=N($("pluralize")),Tn=({mutationOptions:e}={})=>{let t=te(),{resources:r}=ee(),n=B(),a=Ke(),o=ue(),s=_e();return(0,ei.useMutation)(({resource:f,values:c,metaData:m,dataProviderName:y})=>{let h=t(V(f,y,r));return h.createMany?h.createMany({resource:f,variables:c,metaData:m}):St(c.map(p=>h.create({resource:f,variables:p,metaData:m})))},{onSuccess:(f,{resource:c,successNotification:m,dataProviderName:y,invalidates:h=["list","many"],values:p})=>{let d=ti.default.plural(c),g=typeof m=="function"?m(f,p,c):m;o(g,{key:`createMany-${c}-notification`,message:n("notifications.createSuccess",{resource:n(`${c}.${c}`,c)},`Successfully created ${d}`),description:n("notifications.success","Success"),type:"success"}),s({resource:c,dataProviderName:V(c,y,r),invalidates:h});let i=f==null?void 0:f.data.filter(b=>(b==null?void 0:b.id)!==void 0).map(b=>b.id);a==null||a({channel:`resources/${c}`,type:"created",payload:{ids:i},date:new Date})},onError:(f,{resource:c,errorNotification:m,values:y})=>{let h=typeof m=="function"?m(f,y,c):m;o(h,{key:`createMany-${c}-notification`,description:f.message,message:n("notifications.createError",{resource:n(`${c}.${c}`,c),statusCode:f.statusCode},`There was an error creating ${c} (status code: ${f.statusCode}`),type:"error"})},...e})},Yr=$("@tanstack/react-query"),Jr=N($("pluralize")),ri=({mutationOptions:e}={})=>{let{resources:t}=ee(),r=(0,Yr.useQueryClient)(),n=te(),a=B(),{mutationMode:o,undoableTimeout:s}=ot(),{mutate:f}=me(),{notificationDispatch:c}=nt(),m=Ke(),y=ue(),h=_e();return(0,Yr.useMutation)(({ids:p,values:d,resource:g,onCancel:i,mutationMode:b,undoableTimeout:C,metaData:l,dataProviderName:x})=>{let k=b!=null?b:o,P=C!=null?C:s,S=n(V(g,x,t)),u=()=>S.updateMany?S.updateMany({resource:g,ids:p,variables:d,metaData:l}):St(p.map(w=>S.update({resource:g,id:w,variables:d,metaData:l})));return k!=="undoable"?u():new Promise((w,I)=>{let v=()=>{u().then(q=>w(q)).catch(q=>I(q))},E=()=>{I({message:"mutationCancelled"})};i&&i(E),c({type:"ADD",payload:{id:p,resource:g,cancelMutation:E,doMutation:v,seconds:P,isSilent:!!i}})})},{onMutate:async({resource:p,ids:d,values:g,mutationMode:i,dataProviderName:b,metaData:C})=>{let l=fe(p,V(p,b,t),C),x=i!=null?i:o;await r.cancelQueries(l.resourceAll,void 0,{silent:!0});let k=r.getQueriesData(l.resourceAll);if(x!=="pessimistic"){r.setQueriesData(l.list(),P=>{if(!P)return null;let S=P.data.map(u=>u.id!==void 0&&d.filter(w=>w!==void 0).map(String).includes(u.id.toString())?{...u,...g}:u);return{...P,data:S}}),r.setQueriesData(l.many(),P=>{if(!P)return null;let S=P.data.map(u=>u.id!==void 0&&d.filter(w=>w!==void 0).map(String).includes(u.id.toString())?{...u,...g}:u);return{...P,data:S}});for(let P of d)r.setQueriesData(l.detail(P),S=>{if(!S)return null;let u={...S.data,...g};return{...S,data:u}})}return{previousQueries:k,queryKey:l}},onSettled:(p,d,{ids:g,resource:i,dataProviderName:b})=>{h({resource:i,invalidates:["list","many"],dataProviderName:V(i,b,t)}),g.forEach(C=>h({resource:i,invalidates:["detail"],dataProviderName:V(i,b,t),id:C})),c({type:"REMOVE",payload:{id:g,resource:i}})},onSuccess:(p,{ids:d,resource:g,successNotification:i,values:b})=>{let C=Jr.default.singular(g),l=typeof i=="function"?i(p,{ids:d,values:b},g):i;y(l,{key:`${d}-${g}-notification`,description:a("notifications.success","Successful"),message:a("notifications.editSuccess",{resource:a(`${g}.${g}`,g)},`Successfully updated ${C}`),type:"success"}),m==null||m({channel:`resources/${g}`,type:"updated",payload:{ids:d.map(String)},date:new Date})},onError:(p,{ids:d,resource:g,errorNotification:i,values:b},C)=>{if(C)for(let l of C.previousQueries)r.setQueryData(l[0],l[1]);if(p.message!=="mutationCancelled"){f==null||f(p);let l=Jr.default.singular(g),x=typeof i=="function"?i(p,{ids:d,values:b},g):i;y(x,{key:`${d}-${g}-updateMany-error-notification`,message:a("notifications.editError",{resource:l,statusCode:p.statusCode},`Error when updating ${l} (status code: ${p.statusCode})`),description:p.message,type:"error"})}},...e})},Xr=$("@tanstack/react-query"),ni=N($("pluralize")),ai=({mutationOptions:e}={})=>{let{mutate:t}=me(),{mutationMode:r,undoableTimeout:n}=ot(),a=te(),{notificationDispatch:o}=nt(),s=B(),f=Ke(),c=ue(),m=_e(),{resources:y}=ee(),h=(0,Xr.useQueryClient)();return(0,Xr.useMutation)(({resource:p,ids:d,mutationMode:g,undoableTimeout:i,onCancel:b,metaData:C,dataProviderName:l,values:x})=>{let k=g!=null?g:r,P=i!=null?i:n,S=a(V(p,l,y)),u=()=>S.deleteMany?S.deleteMany({resource:p,ids:d,metaData:C,variables:x}):St(d.map(w=>S.deleteOne({resource:p,id:w,metaData:C,variables:x})));return k!=="undoable"?u():new Promise((w,I)=>{let v=()=>{u().then(q=>w(q)).catch(q=>I(q))},E=()=>{I({message:"mutationCancelled"})};b&&b(E),o({type:"ADD",payload:{id:d,resource:p,cancelMutation:E,doMutation:v,seconds:P,isSilent:!!b}})})},{onMutate:async({ids:p,resource:d,mutationMode:g,dataProviderName:i})=>{let b=fe(d,V(d,i,y)),C=g!=null?g:r;await h.cancelQueries(b.resourceAll,void 0,{silent:!0});let l=h.getQueriesData(b.resourceAll);if(C!=="pessimistic"){h.setQueriesData(b.list(),x=>x?{data:x.data.filter(k=>k.id&&!p.map(String).includes(k.id.toString())),total:x.total-1}:null),h.setQueriesData(b.many(),x=>{if(!x)return null;let k=x.data.filter(P=>P.id?!p.map(String).includes(P.id.toString()):!1);return{...x,data:k}});for(let x of p)h.setQueriesData(b.detail(x),k=>!k||k.data.id==x?null:{...k})}return{previousQueries:l,queryKey:b}},onSettled:(p,d,{resource:g,ids:i,dataProviderName:b,invalidates:C=["list","many"]})=>{m({resource:g,dataProviderName:V(g,b,y),invalidates:C}),o({type:"REMOVE",payload:{id:i,resource:g}})},onSuccess:(p,{ids:d,resource:g,successNotification:i},b)=>{d.forEach(l=>h.removeQueries(b==null?void 0:b.queryKey.detail(l)));let C=typeof i=="function"?i(p,d,g):i;c(C,{key:`${d}-${g}-notification`,description:s("notifications.success","Success"),message:s("notifications.deleteSuccess",{resource:s(`${g}.${g}`,g)},`Successfully deleted ${g}`),type:"success"}),f==null||f({channel:`resources/${g}`,type:"deleted",payload:{ids:d},date:new Date}),d.forEach(l=>h.removeQueries(b==null?void 0:b.queryKey.detail(l)))},onError:(p,{ids:d,resource:g,errorNotification:i},b)=>{if(b)for(let C of b.previousQueries)h.setQueryData(C[0],C[1]);if(p.message!=="mutationCancelled"){t(p);let C=ni.default.singular(g),l=typeof i=="function"?i(p,d,g):i;c(l,{key:`${d}-${g}-notification`,message:s("notifications.deleteError",{resource:C,statusCode:p.statusCode},`Error (status code: ${p.statusCode})`),description:p.message,type:"error"})}},...e})},oi=e=>{let t=te(),{getApiUrl:r}=t(e);return r()},ii=$("@tanstack/react-query"),si=({url:e,method:t,config:r,queryOptions:n,successNotification:a,errorNotification:o,metaData:s,dataProviderName:f})=>{let c=te(),{custom:m}=c(f),{mutate:y}=me(),h=B(),p=ue();if(m)return(0,ii.useQuery)([f,"custom",t,e,{...r,...s}],({queryKey:d,pageParam:g,signal:i})=>m({url:e,method:t,...r,metaData:{...s,queryContext:{queryKey:d,pageParam:g,signal:i}}}),{...n,onSuccess:d=>{var g;(g=n==null?void 0:n.onSuccess)==null||g.call(n,d);let i=typeof a=="function"?a(d,{...r,...s}):a;p(i)},onError:d=>{var g;y(d),(g=n==null?void 0:n.onError)==null||g.call(n,d);let i=typeof o=="function"?o(d,{...r,...s}):o;p(i,{key:`${t}-notification`,message:h("notifications.error",{statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}});throw Error("Not implemented custom on data provider.")},li=$("@tanstack/react-query"),ui=({mutationOptions:e}={})=>{let{mutate:t}=me(),r=ue(),n=te(),a=B();return(0,li.useMutation)(({url:o,method:s,values:f,metaData:c,dataProviderName:m,config:y})=>{let{custom:h}=n(m);if(h)return h({url:o,method:s,payload:f,metaData:c,headers:{...y==null?void 0:y.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(o,{successNotification:s,config:f,metaData:c})=>{let m=typeof s=="function"?s(o,{...f,...c}):s;r(m)},onError:(o,{errorNotification:s,method:f,config:c,metaData:m})=>{t(o);let y=typeof s=="function"?s(o,{...c,...m}):s;r(y,{key:`${f}-notification`,message:a("notifications.error",{statusCode:o.statusCode},`Error (status code: ${o.statusCode})`),description:o.message,type:"error"})},...e})},en=$("react"),On=N($("react")),ci=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),lr=On.default.createContext(ci()),di=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},On.default.createElement(lr.Provider,{value:r},e)},te=()=>{let e=(0,en.useContext)(lr);return(0,en.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},pi=$("@tanstack/react-query"),mi=({resource:e,config:t,queryOptions:r,successNotification:n,errorNotification:a,metaData:o,liveMode:s,onLiveEvent:f,liveParams:c,dataProviderName:m})=>{let{resources:y}=ee(),h=te(),p=fe(e,V(e,m,y),o),{getList:d}=h(V(e,m,y)),g=B(),{mutate:i}=me(),b=ue(),C=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return dt({resource:e,types:["*"],params:{metaData:o,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...c},channel:`resources/${e}`,enabled:C,liveMode:s,onLiveEvent:f}),(0,pi.useInfiniteQuery)(p.list(t),({queryKey:l,pageParam:x,signal:k})=>{let{hasPagination:P,...S}=t||{},u={...t==null?void 0:t.pagination,current:x};return d({resource:e,...S,pagination:u,hasPagination:P,metaData:{...o,queryContext:{queryKey:l,pageParam:x,signal:k}}}).then(({data:w,total:I,...v})=>({data:w,total:I,pagination:u,...v}))},{getNextPageParam:l=>An(l),getPreviousPageParam:l=>Ln(l),...r,onSuccess:l=>{var x;(x=r==null?void 0:r.onSuccess)==null||x.call(r,l);let k=typeof n=="function"?n(l,{metaData:o,config:t},e):n;b(k)},onError:l=>{var x;i(l),(x=r==null?void 0:r.onError)==null||x.call(r,l);let k=typeof a=="function"?a(l,{metaData:o,config:t},e):a;b(k,{key:`${e}-useInfiniteList-notification`,message:g("notifications.error",{statusCode:l.statusCode},`Error (status code: ${l.statusCode})`),description:l.message,type:"error"})}})},Ht=$("react"),fi=$("@tanstack/react-query"),Vn=N($("react")),ct=Vn.default.createContext(void 0),gi=({liveProvider:e,children:t})=>Vn.default.createElement(ct.Provider,{value:e},t),dt=({resource:e,params:t,channel:r,types:n,enabled:a=!0,liveMode:o,onLiveEvent:s})=>{let f=(0,fi.useQueryClient)(),c=fe(e),m=(0,Ht.useContext)(ct),{liveMode:y,onLiveEvent:h}=(0,Ht.useContext)(Re),p=o!=null?o:y;(0,Ht.useEffect)(()=>{let d;return p&&p!=="off"&&a&&(d=m==null?void 0:m.subscribe({channel:r,params:{resource:e,...t},types:n,callback:g=>{p==="auto"&&f.invalidateQueries(c.resourceAll),s==null||s(g),h==null||h(g)}})),()=>{d&&(m==null||m.unsubscribe(d))}},[a])},vi=$("react"),Wn=e=>{let{liveMode:t}=(0,vi.useContext)(Re);return e!=null?e:t},tn=$("react"),yi=({params:e,channel:t,types:r=["*"],enabled:n=!0,onLiveEvent:a})=>{let o=(0,tn.useContext)(ct);(0,tn.useEffect)(()=>{let s;return n&&(s=o==null?void 0:o.subscribe({channel:t,params:e,types:r,callback:a})),()=>{s&&(o==null||o.unsubscribe(s))}},[n])},hi=$("react"),Ke=()=>{let e=(0,hi.useContext)(ct);return e==null?void 0:e.publish},bi=$("react"),Qn=N($("react")),Ft=Qn.default.createContext({resources:[]}),Ci=({resources:e,children:t})=>Qn.default.createElement(Ft.Provider,{value:{resources:e}},t),ee=({resourceName:e,resourceNameOrRouteName:t,recordItemId:r}={})=>{let{resources:n}=(0,bi.useContext)(Ft),a=Fe(),{useParams:o}=J(),s=o(),f=a(t!=null?t:s.resource),c=e!=null?e:f.name,m=r!=null?r:s.id;return{resources:n,resource:f,resourceName:c,id:m,action:s.action}},rn=$("react"),Fe=()=>{let{resources:e}=(0,rn.useContext)(Ft);return(0,rn.useCallback)(t=>{let r=e.find(n=>n.route===t);if(!r){let n=e.find(a=>a.name===t);return n!=null?n:{name:t,route:t}}return r},[e])},$i=$("react"),nt=()=>{let{notifications:e,notificationDispatch:t}=(0,$i.useContext)(Dn);return{notifications:e,notificationDispatch:t}},xi=$("react"),Un=N($("react")),ur=(0,Un.createContext)({}),ki=({open:e,close:t,children:r})=>Un.default.createElement(ur.Provider,{value:{open:e,close:t}},r),De=()=>{let{open:e,close:t}=(0,xi.useContext)(ur);return{open:e,close:t}},Pi=$("react"),ue=()=>{let{open:e}=De();return(0,Pi.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},nn=$("react"),zn=N($("react")),at=zn.default.createContext({}),Ei=({children:e,i18nProvider:t})=>zn.default.createElement(at.Provider,{value:{i18nProvider:t}},e),wi=()=>{let{i18nProvider:e}=(0,nn.useContext)(at);return(0,nn.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},an=$("react"),B=()=>{let{i18nProvider:e}=(0,an.useContext)(at);return(0,an.useMemo)(()=>{function t(r,n,a){var o,s;return(s=(o=e==null?void 0:e.translate(r,n,a))!=null?o:a)!=null?s:typeof n=="string"&&typeof a>"u"?n:r}return t},[e])},on=$("react"),Ii=()=>{let{i18nProvider:e}=(0,on.useContext)(at);return(0,on.useCallback)(()=>e==null?void 0:e.getLocale(),[])},Si=$("react"),ot=()=>{let{mutationMode:e,undoableTimeout:t}=(0,Si.useContext)(Re);return{mutationMode:e,undoableTimeout:t}},sn=$("react"),Jt=N($("react")),Hn=Jt.default.createContext({}),Fi=({children:e})=>{let[t,r]=(0,Jt.useState)(!1);return Jt.default.createElement(Hn.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},cr=()=>{let{warnWhenUnsavedChanges:e}=(0,sn.useContext)(Re),{warnWhen:t,setWarnWhen:r}=(0,sn.useContext)(Hn);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}},Ni=$("react"),jn=()=>{let{syncWithLocation:e}=(0,Ni.useContext)(Re);return{syncWithLocation:e}},qi=$("react"),Ai=()=>{let{Title:e}=(0,qi.useContext)(Re);return e},Li=$("react"),Nt=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:n,Sider:a,Title:o,hasDashboard:s,mutationMode:f,syncWithLocation:c,undoableTimeout:m,warnWhenUnsavedChanges:y,DashboardPage:h,LoginPage:p,catchAll:d,options:g}=(0,Li.useContext)(Re);return{Footer:e,Header:t,Layout:r,OffLayoutArea:n,Sider:a,Title:o,hasDashboard:s,mutationMode:f,syncWithLocation:c,undoableTimeout:m,warnWhenUnsavedChanges:y,DashboardPage:h,LoginPage:p,catchAll:d,options:g}},Ri=$("react"),Di=$("export-to-csv-fix-source-map"),Mi=({resourceName:e,sorter:t,filters:r,maxItemCount:n,pageSize:a=20,mapData:o=y=>y,exportOptions:s,metaData:f,dataProviderName:c,onError:m}={})=>{let[y,h]=(0,Ri.useState)(!1),{resources:p}=ee(),d=Fe(),g=te(),{useParams:i}=J(),{resource:b}=i(),{name:C}=d(b);e&&(C=e);let l=`${nr(C,"plural")}-${new Date().toLocaleString()}`,{getList:x}=g(V(C,c,p));return{isLoading:y,triggerExport:async()=>{h(!0);let k=[],P=1,S=!0;for(;S;)try{let{data:u,total:w}=await x({resource:C,filters:r,sort:t,pagination:{current:P,pageSize:a},metaData:f});P++,k.push(...u),n&&k.length>=n&&(k=k.slice(0,n),S=!1),w===k.length&&(S=!1)}catch(u){h(!1),S=!1,m==null||m(u);return}new Di.ExportToCsv({filename:l,useKeysAsHeaders:!0,...s}).generateCsv(k.map(o)),h(!1)}}},ln=N($("react")),Ti=({resource:e,action:t,id:r,onMutationSuccess:n,onMutationError:a,redirect:o,successNotification:s,errorNotification:f,metaData:c,mutationMode:m,liveMode:y,onLiveEvent:h,liveParams:p,undoableTimeout:d,dataProviderName:g,invalidates:i,queryOptions:b,createMutationOptions:C,updateMutationOptions:l}={})=>{var x;let{options:k}=Nt(),{useParams:P}=J(),{resource:S,action:u,id:w}=P(),I=!e||e===S?r!=null?r:w:r,[v,E]=ln.default.useState(I);ln.default.useEffect(()=>{I!==v&&E(r)},[r]);let q=e!=null?e:S,T=(x=t!=null?t:u==="show"?"create":u)!=null?x:"create",R=Fe()(q),{mutationMode:M}=ot(),O=m!=null?m:M,re=T==="create",de=T==="edit",ye=T==="clone",G=Bo({redirectFromProps:o,action:T,redirectOptions:k.redirect}),H=v!==void 0&&(de||ye),K=ir({resource:R.name,id:v!=null?v:"",queryOptions:{enabled:H,...b},liveMode:y,onLiveEvent:h,liveParams:p,metaData:c,dataProviderName:g}),{isFetching:ke}=K,Ue=sr({mutationOptions:C}),{mutate:ze,isLoading:ht}=Ue,Pe=Mn({mutationOptions:l}),{mutate:bt,isLoading:Vt}=Pe,{setWarnWhen:Ct}=cr(),He=Bn();return{...re||ye?{formLoading:ke||ht,mutationResult:Ue,onFinish:async pe=>{Ct(!1);let we=Ie=>{He({redirect:G,resource:R,id:Ie})};return O!=="pessimistic"&&setTimeout(()=>{we()}),new Promise((Ie,Ye)=>(O!=="pessimistic"&&Ie(),ze({values:pe,resource:R.name,successNotification:s,errorNotification:f,metaData:c,dataProviderName:g,invalidates:i},{onSuccess:(Ee,Ae,z)=>{var Z;n&&n(Ee,pe,z);let $t=(Z=Ee==null?void 0:Ee.data)==null?void 0:Z.id;we($t),Ie(Ee)},onError:(Ee,Ae,z)=>{if(a)return a(Ee,pe,z);Ye()}})))}}:{formLoading:ke||Vt,mutationResult:Pe,onFinish:async pe=>{Ct(!1);let we={id:v!=null?v:"",values:pe,resource:R.name,mutationMode:O,undoableTimeout:d,successNotification:s,errorNotification:f,metaData:c,dataProviderName:g,invalidates:i},Ie=()=>{E(I),He({redirect:G,resource:R,id:v})};return O!=="pessimistic"&&setTimeout(()=>{Ie()}),new Promise((Ye,Ee)=>(O!=="pessimistic"&&Ye(),setTimeout(()=>{bt(we,{onSuccess:(Ae,z,Z)=>{n&&n(Ae,pe,Z),O==="pessimistic"&&Ie(),Ye(Ae)},onError:(Ae,z,Z)=>{if(a)return a(Ae,pe,Z);Ee()}})})))}},queryResult:K,id:v,setId:E,redirect:(pe,we)=>{He({redirect:pe!==void 0?pe:de?"list":"edit",resource:R,id:we!=null?we:v})}}},Oi=$("react"),Bn=()=>{let{show:e,edit:t,list:r,create:n}=he();return(0,Oi.useCallback)(({redirect:a,resource:o,id:s})=>{if(a&&o.route)return o.canShow&&a==="show"&&s?e(o.route,s):o.canEdit&&a==="edit"&&s?t(o.route,s):o.canCreate&&a==="create"?n(o.route):r(o.route,"push")},[])},he=()=>{let{useHistory:e}=J(),t=e(),r=Fe(),n=(m,y="push")=>{y==="push"?t.push(m):t.replace(m)},a=m=>`/${r(m).route}/create`,o=(m,y)=>{let h=r(m),p=encodeURIComponent(y);return`/${h.route}/edit/${p}`},s=(m,y)=>{let h=r(m),p=encodeURIComponent(y);return`/${h.route}/clone/${p}`},f=(m,y)=>{let h=r(m),p=encodeURIComponent(y);return`/${h.route}/show/${p}`},c=m=>`/${r(m).route}`;return{create:(m,y="push")=>{n(a(m),y)},createUrl:a,edit:(m,y,h="push")=>{n(o(m,y),h)},editUrl:o,clone:(m,y,h="push")=>{n(s(m,y),h)},cloneUrl:s,show:(m,y,h="push")=>{n(f(m,y),h)},showUrl:f,list:(m,y="push")=>{n(c(m),y)},listUrl:c,push:(m,...y)=>{t.push(m,...y)},replace:(m,...y)=>{t.replace(m,...y)},goBack:()=>{t.goBack()}}},un=N($("react")),Vi=({resource:e,id:t,successNotification:r,errorNotification:n,metaData:a,liveMode:o,onLiveEvent:s,dataProviderName:f,queryOptions:c}={})=>{let{useParams:m}=J(),{resource:y,id:h}=m(),p=!e||e===y?t!=null?t:h:t,[d,g]=(0,un.useState)(p);un.default.useEffect(()=>{p!==d&&g(p)},[p]);let i=Fe()(e!=null?e:y);return{queryResult:ir({resource:i.name,id:d!=null?d:"",queryOptions:{enabled:d!==void 0,...c},successNotification:r,errorNotification:n,metaData:a,liveMode:o,onLiveEvent:s,dataProviderName:f}),showId:d,setShowId:g}},xt=$("react"),Wi=$("papaparse"),Qi=N($("lodash/chunk")),Ui=({resourceName:e,mapData:t=c=>c,paparseOptions:r,batchSize:n=Number.MAX_SAFE_INTEGER,onFinish:a,metaData:o,onProgress:s,dataProviderName:f}={})=>{let[c,m]=(0,xt.useState)(0),[y,h]=(0,xt.useState)(0),[p,d]=(0,xt.useState)(!1),g=Fe(),{useParams:i}=J(),{resource:b}=i(),{name:C}=g(e!=null?e:b),l=Tn(),x=sr(),k;n===1?k=x:k=l;let P=()=>{h(0),m(0),d(!1)},S=w=>{let I={succeeded:w.filter(v=>v.type==="success"),errored:w.filter(v=>v.type==="error")};a==null||a(I),d(!1)};(0,xt.useEffect)(()=>{s==null||s({totalAmount:y,processedAmount:c})},[y,c]);let u=({file:w})=>(P(),new Promise(I=>{d(!0),(0,Wi.parse)(w,{complete:async({data:v})=>{let E=Pn(v,t);if(h(E.length),n===1){let q=E.map(R=>async()=>({response:await x.mutateAsync({resource:C,values:R,successNotification:!1,errorNotification:!1,dataProviderName:f,metaData:o}),value:R})),T=await jr(q,({response:R,value:M})=>(m(O=>O+1),{response:[R.data],type:"success",request:[M]}),(R,M)=>({response:[R],type:"error",request:[E[M]]}));I(T)}else{let q=(0,Qi.default)(E,n),T=q.map(M=>async()=>({response:await l.mutateAsync({resource:C,values:M,successNotification:!1,errorNotification:!1,dataProviderName:f,metaData:o}),value:M,currentBatchLength:M.length})),R=await jr(T,({response:M,currentBatchLength:O,value:re})=>(m(de=>de+O),{response:M.data,type:"success",request:re}),(M,O)=>({response:[M],type:"error",request:q[O]}));I(R)}},...r})}).then(I=>(S(I),I)));return{inputProps:{type:"file",accept:".csv",onChange:w=>{w.target.files&&w.target.files.length>0&&u({file:w.target.files[0]})}},mutationResult:k,isLoading:p,handleChange:u}},jt=$("react"),zi=({defaultVisible:e=!1}={})=>{let[t,r]=(0,jt.useState)(e),n=(0,jt.useCallback)(()=>r(!0),[t]),a=(0,jt.useCallback)(()=>r(!1),[t]);return{visible:t,show:n,close:a}},Hi=$("react"),Kn=N($("react")),ji={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},dr=Kn.default.createContext(ji),Bi=({children:e,useHistory:t,useLocation:r,useParams:n,Prompt:a,Link:o,routes:s})=>Kn.default.createElement(dr.Provider,{value:{useHistory:t,useLocation:r,useParams:n,Prompt:a,Link:o,routes:s}},e),J=()=>{let{useHistory:e,useLocation:t,useParams:r,Prompt:n,Link:a,routes:o}=(0,Hi.useContext)(dr);return{useHistory:e,useLocation:t,useParams:r,Prompt:n,Link:a,routes:o}},Ki=$("react"),_i=$("@tanstack/react-query"),_n=N($("react")),qt=_n.default.createContext({}),Gi=({can:e,children:t})=>_n.default.createElement(qt.Provider,{value:{can:e}},t),Gn=({action:e,resource:t,params:r,queryOptions:n})=>{let{can:a}=(0,Ki.useContext)(qt),{resource:o,...s}=r!=null?r:{},{icon:f,list:c,edit:m,create:y,show:h,children:p,...d}=o!=null?o:{},g=(0,_i.useQuery)(["useCan",{action:e,resource:t,params:{...s,resource:d},enabled:n==null?void 0:n.enabled}],()=>{var i;return(i=a==null?void 0:a({action:e,resource:t,params:r}))!=null?i:Promise.resolve({can:!0})},{enabled:typeof a<"u",...n,retry:!1});return typeof a>"u"?{data:{can:!0}}:g},Zi=$("react"),Yi=()=>{let{can:e}=(0,Zi.useContext)(qt);return{can:e}},Je=$("react"),Ji=N($("lodash/uniqBy")),Xi=N($("lodash/debounce")),kt=N($("lodash/get")),es=e=>{var t,r;let[n,a]=(0,Je.useState)([]),[o,s]=(0,Je.useState)([]),[f,c]=(0,Je.useState)([]),{resource:m,sort:y,filters:h=[],optionLabel:p="title",optionValue:d="id",debounce:g=300,successNotification:i,errorNotification:b,defaultValueQueryOptions:C,queryOptions:l,fetchSize:x,pagination:k,hasPagination:P,liveMode:S,defaultValue:u=[],onLiveEvent:w,onSearch:I,liveParams:v,metaData:E,dataProviderName:q}=e,T=Array.isArray(u)?u:[u],R=(0,Je.useCallback)(G=>{c(G.data.map(H=>({label:(0,kt.default)(H,p),value:(0,kt.default)(H,d)})))},[p,d]),M=C!=null?C:l,O=Rn({resource:m,ids:T,queryOptions:{...M,enabled:T.length>0&&((t=C==null?void 0:C.enabled)!=null?t:!0),onSuccess:G=>{var H;R(G),(H=M==null?void 0:M.onSuccess)==null||H.call(M,G)}},metaData:E,liveMode:"off",dataProviderName:q}),re=(0,Je.useCallback)(G=>{s(G.data.map(H=>({label:(0,kt.default)(H,p),value:(0,kt.default)(H,d)})))},[p,d]),de=or({resource:m,config:{sort:y,filters:h.concat(n),pagination:{current:k==null?void 0:k.current,pageSize:(r=k==null?void 0:k.pageSize)!=null?r:x},hasPagination:P},queryOptions:{...l,onSuccess:G=>{var H;re(G),(H=l==null?void 0:l.onSuccess)==null||H.call(l,G)}},successNotification:i,errorNotification:b,metaData:E,liveMode:S,liveParams:v,onLiveEvent:w,dataProviderName:q}),ye=G=>{if(I){a(I(G));return}if(G)a([{field:p,operator:"contains",value:G}]);else{a([]);return}};return{queryResult:de,defaultValueQueryResult:O,options:(0,Je.useMemo)(()=>(0,Ji.default)([...o,...f],"value"),[o,f]),onSearch:(0,Xi.default)(ye,g)}},Be=$("react"),cn=N($("qs")),dn=N($("lodash/differenceWith")),pn=N($("lodash/isEqual")),ts=[],rs=[];function ns({initialCurrent:e=1,initialPageSize:t=10,hasPagination:r=!0,initialSorter:n,permanentSorter:a=rs,defaultSetFilterBehavior:o="merge",initialFilter:s,permanentFilter:f=ts,syncWithLocation:c,resource:m,successNotification:y,errorNotification:h,queryOptions:p,liveMode:d,onLiveEvent:g,liveParams:i,metaData:b,dataProviderName:C}={}){var l;let{syncWithLocation:x}=jn(),k=c!=null?c:x,{useLocation:P,useParams:S}=J(),{search:u,pathname:w}=P(),I=Wn(d),{parsedCurrent:v,parsedPageSize:E,parsedSorter:q,parsedFilters:T}=rr(u),R=v||e,M=E||t,O=q.length?q:n,re=T.length?T:s,{resource:de}=S(),{replace:ye}=he(),G=Fe()(m!=null?m:de),[H,K]=(0,Be.useState)(Yt(a,O!=null?O:[])),[ke,Ue]=(0,Be.useState)(Zt(f,re!=null?re:[])),[ze,ht]=(0,Be.useState)(R),[Pe,bt]=(0,Be.useState)(M),Vt=({pagination:{current:z,pageSize:Z},sorter:$t,filters:Ur})=>{let Wt=cn.default.parse(u==null?void 0:u.substring(1)),ja=_t({pagination:{pageSize:Z,current:z},sorter:$t,filters:Ur,...Wt});return`${w}?${ja}`};(0,Be.useEffect)(()=>{u===""&&(ht(R),bt(M),K(Yt(a,O!=null?O:[])),Ue(Zt(f,re!=null?re:[])))},[u]);let Ct=()=>{let{sorter:z,filters:Z,pageSize:$t,current:Ur,...Wt}=cn.default.parse(u,{ignoreQueryPrefix:!0});return Wt};(0,Be.useEffect)(()=>{if(k){let z=Ct(),Z=_t({...r?{pagination:{pageSize:Pe,current:ze}}:{},sorter:(0,dn.default)(H,a,pn.default),filters:(0,dn.default)(ke,f,pn.default),...z});return ye(`${w}?${Z}`,void 0,{shallow:!0})}},[k,ze,Pe,H,ke]);let He=or({resource:G.name,config:{hasPagination:r,pagination:{current:ze,pageSize:Pe},filters:lt(f,ke),sort:Gt(a,H)},queryOptions:p,successNotification:y,errorNotification:h,metaData:b,liveMode:I,liveParams:i,onLiveEvent:g,dataProviderName:C}),pe=z=>{Ue(Z=>lt(f,z,Z))},we=z=>{Ue(lt(f,z))},Ie=z=>{Ue(Z=>lt(f,z(Z)))},Ye=(z,Z=o)=>{typeof z=="function"?Ie(z):Z==="replace"?we(z):pe(z)},Ee=z=>{K(()=>Gt(a,z))},Ae=(0,Be.useMemo)(()=>{var z,Z;return r?{current:ze,setCurrent:ht,pageSize:Pe,setPageSize:bt,pageCount:Pe?Math.ceil(((Z=(z=He.data)==null?void 0:z.total)!=null?Z:0)/Pe):1}:{current:void 0,setCurrent:void 0,pageSize:void 0,setPageSize:void 0,pageCount:void 0}},[r,ze,Pe,(l=He.data)==null?void 0:l.total]);return{tableQueryResult:He,sorter:H,setSorter:Ee,filters:ke,setFilters:Ye,...Ae,createLinkForSyncWithLocation:Vt}}var mn=$("react"),Bt=$("@tanstack/react-query"),Zn=N($("react")),At=Zn.default.createContext({}),as=({create:e,get:t,update:r,children:n})=>Zn.default.createElement(At.Provider,{value:{create:e,get:t,update:r}},n),Lt=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,Bt.useQueryClient)(),n=(0,mn.useContext)(At),{resources:a}=(0,mn.useContext)(Ft),{data:o,refetch:s,isLoading:f}=hn({queryOptions:{enabled:!!n}}),c=(0,Bt.useMutation)(async y=>{var h,p,d;let g=a.find(C=>C.name===y.resource),i=(p=(h=g==null?void 0:g.options)==null?void 0:h.auditLog)==null?void 0:p.permissions;if(i&&!Qo(i,y.action))return;let b;return f&&(b=await s()),await((d=n.create)==null?void 0:d.call(n,{...y,author:o!=null?o:b==null?void 0:b.data}))},e),m=(0,Bt.useMutation)(async y=>{var h;return await((h=n.update)==null?void 0:h.call(n,y))},{onSuccess:y=>{if(y!=null&&y.resource){let h=fe(y==null?void 0:y.resource);r.invalidateQueries(h.logList())}},...t});return{log:c,rename:m}},os=$("react"),is=$("@tanstack/react-query"),ss=({resource:e,action:t,meta:r,author:n,metaData:a,queryOptions:o})=>{let{get:s}=(0,os.useContext)(At),f=fe(e,void 0,a);return(0,is.useQuery)(f.logList(r),()=>{var c;return(c=s==null?void 0:s({resource:e,action:t,author:n,meta:r,metaData:a}))!=null?c:Promise.resolve([])},{enabled:typeof s<"u",...o,retry:!1})},ls=$("react"),us=$("@tanstack/react-query"),_e=()=>{let{resources:e}=ee(),t=(0,us.useQueryClient)();return(0,ls.useCallback)(({resource:r,dataProviderName:n,invalidates:a,id:o})=>{if(a===!1)return;let s=fe(r,V(r,n,e));a.forEach(f=>{switch(f){case"all":t.invalidateQueries(s.all);break;case"list":t.invalidateQueries(s.list());break;case"many":t.invalidateQueries(s.many());break;case"resourceAll":t.invalidateQueries(s.resourceAll);break;case"detail":t.invalidateQueries(s.detail(o||""));break;default:break}})},[])},cs=$("react"),ds=N($("warn-once")),ps=()=>{var e;let{useParams:t}=J(),{i18nProvider:r}=(0,cs.useContext)(at),n=B(),{resources:a,resource:o}=ee(),{action:s}=t(),f=[];if(!(o!=null&&o.name))return{breadcrumbs:f};let c=m=>{var y;let h=a.find(p=>p.name===m);h&&(h.parentName&&c(h.parentName),f.push({label:(y=h.label)!=null?y:n(`${h.name}.${h.name}`,ut(h.name)),href:h.list?`/${h.route}`:void 0,icon:h.icon}))};if(o.parentName&&c(o.parentName),f.push({label:(e=o.label)!=null?e:n(`${o.name}.${o.name}`,ut(o.name)),href:o.list?`/${o.route}`:void 0,icon:o.icon}),s){let m=`actions.${s}`,y=n(m);typeof r<"u"&&y===m?((0,ds.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${s}" action. Please add "actions.${s}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),f.push({label:n(`buttons.${s}`,ut(s))})):f.push({label:n(m,ut(s))})}return{breadcrumbs:f}},Xe=N($("react")),ms=()=>{let{resources:e}=ee(),t=B(),{useLocation:r,useParams:n}=J(),a=r(),o=n(),{hasDashboard:s}=Nt(),f=Xe.default.useMemo(()=>{let p=e.find(g=>(a==null?void 0:a.pathname)===`/${g.route}`);p||(p=e.find(g=>(o==null?void 0:o.resource)===g.route));let d;return p!=null&&p.route?d=`/${p==null?void 0:p.route}`:a.pathname==="/"?d="/":d=a==null?void 0:a.pathname,d},[e,a,o]),c=Xe.default.useMemo(()=>e.map(p=>{var d,g;let i=`/${p.route}`;return{...p,icon:p.icon,route:i,key:(d=p.key)!=null?d:i,label:(g=p.label)!=null?g:t(`${p.name}.${p.name}`,nr(p.name,"plural"))}}),[e,s,t]),m=Xe.default.useMemo(()=>Fn(c),[c]),y=Xe.default.useCallback((p,d,g=!1)=>{let i=d.find(b=>g?b.name===p:b.route===p);if(i){let b=[];return g&&i.route&&b.unshift(i.route),i.parentName&&b.unshift(...y(i.parentName,d,!0)),b}return[]},[]),h=Xe.default.useMemo(()=>y(f,c),[f,c]);return Xe.default.useMemo(()=>{let p=d=>d.reduce((g,i)=>{var b,C;return i.children.length>0&&((b=i.options)==null?void 0:b.hide)!==!0?[...g,{...i,children:p(i.children)}]:typeof i.list<"u"&&((C=i.options)==null?void 0:C.hide)!==!0?[...g,i]:g},[]);return{defaultOpenKeys:h,selectedKey:f,menuItems:p(m)}},[h,f,m])},fs=()=>{let[e,t]=(0,je.useState)(),{push:r}=he(),n=B(),a=["edit","create","show"],{useParams:o}=J(),s=o(),f=Fe();return(0,je.useEffect)(()=>{if(s.resource){let c=f(s.resource);s.action&&a.includes(s.action)&&!c[s.action]&&t(n("pages.error.info",{action:s.action,resource:s.resource},`You may have forgotten to add the "${s.action}" component to "${s.resource}" resource.`))}},[s]),je.default.createElement(je.default.Fragment,null,je.default.createElement("h1",null,n("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&je.default.createElement("p",null,e),je.default.createElement("button",{onClick:()=>r("/")},n("pages.error.backHome",void 0,"Back Home")))},X=N($("react")),Yn=()=>{let[e,t]=(0,X.useState)(""),[r,n]=(0,X.useState)(""),a=B(),{mutate:o}=er();return X.default.createElement(X.default.Fragment,null,X.default.createElement("h1",null,a("pages.login.title","Sign in your account")),X.default.createElement("form",{onSubmit:s=>{s.preventDefault(),o({username:e,password:r})}},X.default.createElement("table",null,X.default.createElement("tbody",null,X.default.createElement("tr",null,X.default.createElement("td",null,a("pages.login.username",void 0,"username"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:s=>t(s.target.value)}))),X.default.createElement("tr",null,X.default.createElement("td",null,a("pages.login.password",void 0,"password"),":"),X.default.createElement("td",null,X.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:s=>n(s.target.value)}))))),X.default.createElement("br",null),X.default.createElement("input",{type:"submit",value:"login"})))},et=N($("react")),j=N($("react")),gs=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:n,contentProps:a,wrapperProps:o,renderContent:s,formProps:f})=>{let{Link:c}=J(),[m,y]=(0,j.useState)(""),[h,p]=(0,j.useState)(""),[d,g]=(0,j.useState)(!1),i=B(),{mutate:b}=er(),C=(k,P)=>k?typeof k=="string"?j.default.createElement(c,{to:k},P):k:null,l=()=>e?e.map(k=>{var P;return j.default.createElement("div",{key:k.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},j.default.createElement("button",{onClick:()=>b({providerName:k.name}),style:{display:"flex",alignItems:"center"}},k==null?void 0:k.icon,(P=k.label)!=null?P:j.default.createElement("label",null,k.label)))}):null,x=j.default.createElement("div",{...a},j.default.createElement("h1",{style:{textAlign:"center"}},i("pages.login.title","Sign in to your account")),l(),j.default.createElement("hr",null),j.default.createElement("form",{onSubmit:k=>{k.preventDefault(),b({email:m,password:h,remember:d})},...f},j.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},j.default.createElement("label",null,i("pages.login.fields.email","Email")),j.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:k=>y(k.target.value)}),j.default.createElement("label",null,i("pages.login.fields.password","Password")),j.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:h,onChange:k=>p(k.target.value)}),n!=null?n:j.default.createElement(j.default.Fragment,null,j.default.createElement("label",null,i("pages.login.buttons.rememberMe","Remember me"),j.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:d,value:d.toString(),onChange:()=>{g(!d)}}))),j.default.createElement("br",null),r!=null?r:C("/forgot-password",i("pages.login.buttons.forgotPassword","Forgot password?")),j.default.createElement("input",{type:"submit",value:i("pages.login.signin","Sign in")}),t!=null?t:j.default.createElement("span",null,i("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",C("/register",i("pages.login.register","Sign up"))))));return j.default.createElement("div",{...o},s?s(x):x)},Y=N($("react")),vs=({providers:e,loginLink:t,wrapperProps:r,contentProps:n,renderContent:a,formProps:o})=>{let{Link:s}=J(),[f,c]=(0,Y.useState)(""),[m,y]=(0,Y.useState)(""),h=B(),{mutate:p,isLoading:d}=Cn(),g=(C,l)=>C?typeof C=="string"?Y.default.createElement(s,{to:C},l):C:null,i=()=>e?e.map(C=>{var l;return Y.default.createElement("div",{key:C.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},Y.default.createElement("button",{onClick:()=>p({providerName:C.name}),style:{display:"flex",alignItems:"center"}},C==null?void 0:C.icon,(l=C.label)!=null?l:Y.default.createElement("label",null,C.label)))}):null,b=Y.default.createElement("div",{...n},Y.default.createElement("h1",{style:{textAlign:"center"}},h("pages.register.title","Sign up for your account")),i(),Y.default.createElement("hr",null),Y.default.createElement("form",{onSubmit:C=>{C.preventDefault(),p({email:f,password:m})},...o},Y.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},Y.default.createElement("label",null,h("pages.register.fields.email","Email")),Y.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:f,onChange:C=>c(C.target.value)}),Y.default.createElement("label",null,h("pages.register.fields.password","Password")),Y.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:m,onChange:C=>y(C.target.value)}),Y.default.createElement("input",{type:"submit",value:h("pages.register.buttons.submit","Sign up"),disabled:d}),t!=null?t:Y.default.createElement(Y.default.Fragment,null,Y.default.createElement("span",null,h("pages.login.buttons.haveAccount","Have an account?")," ",g("login",h("pages.login.signin","Sign in")))))));return Y.default.createElement("div",{...r},a?a(b):b)},ie=N($("react")),ys=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:n,formProps:a})=>{let o=B(),{Link:s}=J(),[f,c]=(0,ie.useState)(""),{mutate:m,isLoading:y}=$n(),h=(d,g)=>d?typeof d=="string"?ie.default.createElement(s,{to:d},g):d:null,p=ie.default.createElement("div",{...r},ie.default.createElement("h1",{style:{textAlign:"center"}},o("pages.forgotPassword.title","Forgot your password?")),ie.default.createElement("hr",null),ie.default.createElement("form",{onSubmit:d=>{d.preventDefault(),m({email:f})},...a},ie.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ie.default.createElement("label",null,o("pages.forgotPassword.fields.email","Email")),ie.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:f,onChange:d=>c(d.target.value)}),ie.default.createElement("input",{type:"submit",disabled:y,value:o("pages.forgotPassword.buttons.submit","Send reset instructions")}),ie.default.createElement("br",null),e!=null?e:ie.default.createElement("span",null,o("pages.register.buttons.haveAccount","Have an account? ")," ",h("/login",o("pages.login.signin","Sign in"))))));return ie.default.createElement("div",{...t},n?n(p):p)},se=N($("react")),hs=({wrapperProps:e,contentProps:t,renderContent:r,formProps:n})=>{let a=B(),{mutate:o,isLoading:s}=xn(),[f,c]=(0,se.useState)(""),[m,y]=(0,se.useState)(""),h=se.default.createElement("div",{...t},se.default.createElement("h1",{style:{textAlign:"center"}},a("pages.updatePassword.title","Update Password")),se.default.createElement("hr",null),se.default.createElement("form",{onSubmit:p=>{p.preventDefault(),o({password:f,confirmPassword:m})},...n},se.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},se.default.createElement("label",null,a("pages.updatePassword.fields.password","New Password")),se.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:f,onChange:p=>c(p.target.value)}),se.default.createElement("label",null,a("pages.updatePassword.fields.confirmPassword","Confirm New Password")),se.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:m,onChange:p=>y(p.target.value)}),se.default.createElement("input",{type:"submit",disabled:s,value:a("pages.updatePassword.buttons.submit","Update")}))));return se.default.createElement("div",{...e},r?r(h):h)},bs=e=>{let{type:t}=e;return et.default.createElement(et.default.Fragment,null,(()=>{switch(t){case"register":return et.default.createElement(vs,{...e});case"forgotPassword":return et.default.createElement(ys,{...e});case"updatePassword":return et.default.createElement(hs,{...e});default:return et.default.createElement(gs,{...e})}})())},ne=N($("react")),Jn=()=>ne.default.createElement(ne.default.Fragment,null,ne.default.createElement("h1",null,"Welcome on board"),ne.default.createElement("p",null,"Your configuration is completed."),ne.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",ne.default.createElement("code",null,"`resources`")," property of ",ne.default.createElement("code",null,"`<Refine>`")),ne.default.createElement("div",{style:{display:"flex",gap:8}},ne.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},ne.default.createElement("button",null,"Documentation")),ne.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},ne.default.createElement("button",null,"Examples")),ne.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},ne.default.createElement("button",null,"Community")))),_=N($("react")),Kt=$("@tanstack/react-query"),Cs=$("@tanstack/react-query-devtools"),$s=$("react"),Le=$("react"),xs="3.99.4",ks=()=>{let e=(0,Le.useContext)(le),t=(0,Le.useContext)(At),r=(0,Le.useContext)(ct),n=(0,Le.useContext)(dr),a=(0,Le.useContext)(lr),{i18nProvider:o}=(0,Le.useContext)(at),s=(0,Le.useContext)(ur),f=(0,Le.useContext)(qt),{resources:c}=ee(),m=e.isProvided,y=!!t.create||!!t.get||!!t.update,h=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),p=!!n.useHistory||!!n.Link||!!n.Prompt||!!n.useLocation||!!n.useParams,d=!!a,g=!!(o!=null&&o.changeLocale)||!!(o!=null&&o.getLocale)||!!(o!=null&&o.translate),i=!!s.close||!!s.open,b=!!f.can;return{providers:{auth:m,auditLog:y,live:h,router:p,data:d,i18n:g,notification:i,accessControl:b},version:xs,resourceCount:c.length}},Ps=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},Es=()=>{let e=ks();return(0,$s.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${Ps(e)}`},[]),null},ws=$("react"),Is=$("react"),Ss=N($("lodash/isEqual")),Fs=e=>{let t=(0,Is.useRef)(e);return(0,Ss.default)(t.current,e)||(t.current=e),t.current},fn=(e,t)=>{let r=Fs(t);return(0,ws.useMemo)(e,r)},Ns=({authProvider:e,dataProvider:t,routerProvider:r,notificationProvider:n,accessControlProvider:a,auditLogProvider:o,resources:s,DashboardPage:f,ReadyPage:c,LoginPage:m,catchAll:y,children:h,liveProvider:p,i18nProvider:d,mutationMode:g,syncWithLocation:i,warnWhenUnsavedChanges:b,undoableTimeout:C,Title:l,Layout:x,Sider:k,Header:P,Footer:S,OffLayoutArea:u,reactQueryClientConfig:w,reactQueryDevtoolConfig:I,liveMode:v,onLiveEvent:E,disableTelemetry:q,options:T})=>{let{optionsWithDefaults:R,disableTelemetryWithDefault:M,reactQueryWithDefaults:O}=jo({options:T,disableTelemetry:q,liveMode:v,mutationMode:g,reactQueryClientConfig:w,reactQueryDevtoolConfig:I,syncWithLocation:i,warnWhenUnsavedChanges:b,undoableTimeout:C}),re=fn(()=>{var H;return O.clientConfig instanceof Kt.QueryClient?O.clientConfig:new Kt.QueryClient({...O.clientConfig,defaultOptions:{...O.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(H=O.clientConfig.defaultOptions)==null?void 0:H.queries}}})},[O.clientConfig]),de=_.default.useMemo(()=>typeof n=="function"?n:()=>n!=null?n:{},[n])(),ye=fn(()=>{let H=[];return s==null||s.forEach(K=>{var ke;H.push({key:K.key,name:K.name,label:(ke=K.options)==null?void 0:ke.label,icon:K.icon,route:ar(K,s),canCreate:!!K.create,canEdit:!!K.edit,canShow:!!K.show,canDelete:K.canDelete,create:K.create,show:K.show,list:K.list,edit:K.edit,options:K.options,parentName:K.parentName})}),H},[s]);if(ye.length===0)return c?_.default.createElement(c,null):_.default.createElement(Jn,null);let{RouterComponent:G=_.default.Fragment}=r;return _.default.createElement(Kt.QueryClientProvider,{client:re},_.default.createElement(ki,{...de},_.default.createElement(lo,{...e!=null?e:{},isProvided:Boolean(e)},_.default.createElement(di,{...t},_.default.createElement(gi,{liveProvider:p},_.default.createElement(Bi,{...r},_.default.createElement(Ci,{resources:ye},_.default.createElement(Ei,{i18nProvider:d},_.default.createElement(Gi,{...a!=null?a:{}},_.default.createElement(as,{...o!=null?o:{}},_.default.createElement(Yo,null,_.default.createElement(Ho,{mutationMode:R.mutationMode,warnWhenUnsavedChanges:R.warnWhenUnsavedChanges,syncWithLocation:R.syncWithLocation,Title:l,undoableTimeout:R.undoableTimeout,catchAll:y,DashboardPage:f,LoginPage:m,Layout:x,Sider:k,Footer:S,Header:P,OffLayoutArea:u,hasDashboard:!!f,liveMode:R.liveMode,onLiveEvent:E,options:R},_.default.createElement(Fi,null,_.default.createElement(G,null,h,!M&&_.default.createElement(Es,null),_.default.createElement(ea,null)))))))))))))),O.devtoolConfig===!1?null:_.default.createElement(Cs.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...O.devtoolConfig}))},gn=$("react"),Xn=({notification:e})=>{let t=B(),{notificationDispatch:r}=nt(),{open:n}=De(),[a,o]=(0,gn.useState)(),s=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||n==null||n({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:Ut(e.seconds)},`You have ${Ut(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:Ut(e.seconds)}),e.seconds>0)){a&&clearTimeout(a);let f=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);o(f)}};return(0,gn.useEffect)(()=>{s()},[e]),null},wt=N($("react")),qs=({children:e,Layout:t,Sider:r,Header:n,Title:a,Footer:o,OffLayoutArea:s})=>{let{Layout:f,Footer:c,Header:m,Sider:y,Title:h,OffLayoutArea:p}=Nt(),d=t!=null?t:f;return wt.default.createElement(d,{Sider:r!=null?r:y,Header:n!=null?n:m,Footer:o!=null?o:c,Title:a!=null?a:h,OffLayoutArea:s!=null?s:p},e,wt.default.createElement(As,null))},As=()=>{let{Prompt:e}=J(),t=B(),{warnWhen:r,setWarnWhen:n}=cr(),a=o=>(o.preventDefault(),o.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),o.returnValue);return(0,wt.useEffect)(()=>(r&&window.addEventListener("beforeunload",a),window.removeEventListener("beforeunload",a)),[r]),wt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:n})},tt=N($("react")),Ls=({children:e,fallback:t,loading:r})=>{let{isSuccess:n,isLoading:a,isError:o}=kn(),{replace:s}=he(),{useLocation:f}=J(),{pathname:c,search:m}=f();if(a)return tt.default.createElement(tt.default.Fragment,null,r)||null;if(o){if(!t){let y=`${c}${m}`;return c.includes("/login")||s(`/login?to=${encodeURIComponent(y)}`),null}return tt.default.createElement(tt.default.Fragment,null,t)}return n?tt.default.createElement(tt.default.Fragment,null,e):null},vn=$("react"),ea=()=>{let{useLocation:e}=J(),{checkAuth:t}=(0,vn.useContext)(le),r=e();return(0,vn.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},rt=N($("react")),Rs=({resource:e,action:t,params:r,fallback:n,children:a,...o})=>{let{data:s}=Gn({resource:e,action:t,params:r});return s!=null&&s.can?rt.default.isValidElement(a)?rt.default.cloneElement(a,o):rt.default.createElement(rt.default.Fragment,null,a):(s==null?void 0:s.can)===!1?rt.default.createElement(rt.default.Fragment,null,n!=null?n:null):null}});var Ra=Qt((Dc,La)=>{var Dr=Object.defineProperty,Zs=Object.getOwnPropertyDescriptor,Ys=Object.getOwnPropertyNames,Js=Object.prototype.hasOwnProperty,Xs=(e,t)=>{for(var r in t)Dr(e,r,{get:t[r],enumerable:!0})},el=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of Ys(t))!Js.call(e,a)&&a!==r&&Dr(e,a,{get:()=>t[a],enumerable:!(n=Zs(t,a))||n.enumerable});return e},tl=e=>el(Dr({},"__esModule",{value:!0}),e),Aa={};Xs(Aa,{ColumnSizing:()=>D.ColumnSizing,Expanding:()=>D.Expanding,Filters:()=>D.Filters,Grouping:()=>D.Grouping,Headers:()=>D.Headers,Ordering:()=>D.Ordering,Pagination:()=>D.Pagination,Pinning:()=>D.Pinning,RowSelection:()=>D.RowSelection,Sorting:()=>D.Sorting,Visibility:()=>D.Visibility,aggregationFns:()=>D.aggregationFns,buildHeaderGroups:()=>D.buildHeaderGroups,createCell:()=>D.createCell,createColumn:()=>D.createColumn,createColumnHelper:()=>D.createColumnHelper,createRow:()=>D.createRow,createTable:()=>D.createTable,defaultColumnSizing:()=>D.defaultColumnSizing,expandRows:()=>D.expandRows,filterFns:()=>D.filterFns,flattenBy:()=>D.flattenBy,flexRender:()=>D.flexRender,functionalUpdate:()=>D.functionalUpdate,getCoreRowModel:()=>D.getCoreRowModel,getExpandedRowModel:()=>D.getExpandedRowModel,getFacetedMinMaxValues:()=>D.getFacetedMinMaxValues,getFacetedRowModel:()=>D.getFacetedRowModel,getFacetedUniqueValues:()=>D.getFacetedUniqueValues,getFilteredRowModel:()=>D.getFilteredRowModel,getGroupedRowModel:()=>D.getGroupedRowModel,getPaginationRowModel:()=>D.getPaginationRowModel,getSortedRowModel:()=>D.getSortedRowModel,isFunction:()=>D.isFunction,isRowSelected:()=>D.isRowSelected,isSubRowSelected:()=>D.isSubRowSelected,makeStateUpdater:()=>D.makeStateUpdater,memo:()=>D.memo,noop:()=>D.noop,orderColumns:()=>D.orderColumns,passiveEventSupported:()=>D.passiveEventSupported,reSplitAlphaNumeric:()=>D.reSplitAlphaNumeric,selectRowsFn:()=>D.selectRowsFn,shouldAutoRemoveFilter:()=>D.shouldAutoRemoveFilter,sortingFns:()=>D.sortingFns,useReactTable:()=>D.useReactTable,useTable:()=>nl});La.exports=tl(Aa);var Ot=$("react"),rl=be(),qa=$("@tanstack/react-table");function nl({refineCoreProps:{hasPagination:e=!0,...t}={},initialState:r={},...n}){var a;let o=(0,rl.useTable)({...t,hasPagination:e}),{tableQueryResult:{data:s},current:f,setCurrent:c,pageSize:m,setPageSize:y,sorter:h,setSorter:p,filters:d,setFilters:g,pageCount:i}=o,b=[];d.map(I=>{I.operator!=="or"&&I.operator!=="and"&&"field"in I&&b.push(I)});let C=(0,qa.useReactTable)({getCoreRowModel:(0,qa.getCoreRowModel)(),data:(a=s==null?void 0:s.data)!=null?a:[],initialState:{...e?{pagination:{pageIndex:(f!=null?f:1)-1,pageSize:m}}:{},sorting:h.map(I=>({id:I.field,desc:I.order==="desc"})),columnFilters:b.map(I=>({id:I.field,value:I.value})),...r},pageCount:i,manualPagination:e,manualSorting:!0,manualFiltering:!0,...n}),{state:l,columns:x}=C.options,{pagination:k,sorting:P,columnFilters:S}=l,{pageIndex:u,pageSize:w}=k!=null?k:{};return(0,Ot.useEffect)(()=>{e&&u!==void 0&&c(u+1)},[u]),(0,Ot.useEffect)(()=>{e&&w!==void 0&&y(w)},[w]),(0,Ot.useEffect)(()=>{P!==void 0&&(p(P==null?void 0:P.map(I=>({field:I.id,order:I.desc?"desc":"asc"}))),P.length>0&&e&&c(1))},[P]),(0,Ot.useEffect)(()=>{let I=[];S==null||S.map(E=>{var q,T;let R=(T=(q=x.find(M=>M.id===E.id))==null?void 0:q.meta)==null?void 0:T.filterOperator;I.push({field:E.id,operator:R!=null?R:Array.isArray(E.value)?"in":"eq",value:E.value})});let v=b.filter(E=>!I.some(q=>E.field===q.field&&E.operator===q.operator));v==null||v.map(E=>{I.push({field:E.field,operator:E.operator,value:void 0})}),g(I),I.length>0&&e&&c(1)},[S]),e?{...C,refineCore:o}:{...C,refineCore:{...o,current:void 0,setCurrent:void 0,pageSize:void 0,setPageSize:void 0,pageCount:void 0}}}var D=$("@tanstack/react-table")});var Vr=Qt((Uc,Qa)=>{var Tr=Object.defineProperty,ol=Object.getOwnPropertyDescriptor,il=Object.getOwnPropertyNames,sl=Object.prototype.hasOwnProperty,ll=(e,t)=>{for(var r in t)Tr(e,r,{get:t[r],enumerable:!0})},ul=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of il(t))!sl.call(e,a)&&a!==r&&Tr(e,a,{get:()=>t[a],enumerable:!(n=ol(t,a))||n.enumerable});return e},cl=e=>ul(Tr({},"__esModule",{value:!0}),e),Wa={};ll(Wa,{Controller:()=>xe.Controller,FormProvider:()=>xe.FormProvider,appendErrors:()=>xe.appendErrors,get:()=>xe.get,set:()=>xe.set,useController:()=>xe.useController,useFieldArray:()=>xe.useFieldArray,useForm:()=>Or,useFormContext:()=>xe.useFormContext,useFormState:()=>xe.useFormState,useModalForm:()=>ml,useReactHookForm:()=>xe.useForm,useStepsForm:()=>pl,useWatch:()=>xe.useWatch});Qa.exports=cl(Wa);var Ma=$("react"),dl=$("react-hook-form"),Ta=be(),Or=({refineCoreProps:e,warnWhenUnsavedChanges:t,...r}={})=>{let{warnWhenUnsavedChanges:n,setWarnWhen:a}=(0,Ta.useWarnAboutChange)(),o=t!=null?t:n,s=(0,Ta.useForm)({...e}),{queryResult:f,onFinish:c,formLoading:m}=s,y=(0,dl.useForm)({...r}),{watch:h,reset:p,getValues:d,handleSubmit:g}=y;(0,Ma.useEffect)(()=>{var C;if(typeof(f==null?void 0:f.data)<"u"){let l={},x=Object.keys(d());Object.entries(((C=f==null?void 0:f.data)==null?void 0:C.data)||{}).forEach(([k,P])=>{x.includes(k)&&(l[k]=P)}),p(l)}},[f==null?void 0:f.data]),(0,Ma.useEffect)(()=>{let C=h((l,{type:x})=>{x==="change"&&i(l)});return()=>C.unsubscribe()},[h]);let i=C=>(o&&a(!0),C),b=(C,l)=>async x=>(a(!1),await g(C,l)(x));return{...y,handleSubmit:b,refineCore:s,saveButtonProps:{disabled:m,onClick:C=>{b(c,()=>!1)(C)}}}},Oa=$("react"),pl=({stepsProps:e,...t}={})=>{let{defaultStep:r=0,isBackValidate:n=!1}=e!=null?e:{},[a,o]=(0,Oa.useState)(r),s=Or({...t}),{trigger:f,getValues:c,reset:m,formState:{dirtyFields:y},refineCore:{queryResult:h}}=s;(0,Oa.useEffect)(()=>{var d;if(h!=null&&h.data){let g={},i=Object.keys(c());Object.entries((d=h==null?void 0:h.data)==null?void 0:d.data).forEach(([b,C])=>{i.includes(b)&&(y[b]?g[b]=c(b):g[b]=C)}),m(g,{keepDirty:!0,keepValues:!0})}},[h==null?void 0:h.data,a]);let p=d=>{let g=d;d<0&&(g=0),o(g)};return{...s,steps:{currentStep:a,gotoStep:async d=>{if(d!==a){if(d<a&&!n){p(d);return}await f()&&p(d)}}}}},Va=$("react"),vt=be(),ml=({modalProps:e,refineCoreProps:t,...r}={})=>{let n=(0,vt.useTranslate)(),{resource:a,action:o}=t!=null?t:{},{defaultVisible:s=!1,autoSubmitClose:f=!0,autoResetForm:c=!0}=e!=null?e:{},m=Or({refineCoreProps:t,...r}),{reset:y,refineCore:{onFinish:h,setId:p},saveButtonProps:d,handleSubmit:g}=m,{visible:i,show:b,close:C}=(0,vt.useModal)({defaultVisible:s}),l=async I=>{await h(I),f&&C(),c&&y()},{resourceName:x}=(0,vt.useResource)({resourceNameOrRouteName:a}),{warnWhen:k,setWarnWhen:P}=(0,vt.useWarnAboutChange)(),S=(0,Va.useCallback)(()=>{if(k)if(window.confirm(n("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes.")))P(!1);else return;p==null||p(void 0),C()},[k]),u=(0,Va.useCallback)(I=>{p==null||p(I),b()},[]),w=n(`${x}.titles.${o}`,void 0,`${(0,vt.userFriendlyResourceName)(`${o} ${x}`,"singular")}`);return{modal:{submit:l,close:S,show:u,visible:i,title:w},...m,saveButtonProps:{...d,onClick:I=>g(l)(I)}}},xe=$("react-hook-form")});var yt=Q($("react")),Ha=Q(be());var $e=Q($("react")),Lr=Q(be());var Ds=/(image|photo|avatar|url|logo|cover|thumbnail|icon)/i,mr=(e,t)=>{let r=["name","label","title","count","content","username","nickname","login","firstName","lastName","url"];Ds.test(e)&&r.unshift("url");let n=r.find(a=>a in t&&!!t[a]);if(n)return n==="firstName"&&"lastName"in t?["firstName","lastName"]:n};function fr(e,t,r){var a;if(t)return t;let n=r==null?void 0:r.find(o=>o.name===e);return(a=n==null?void 0:n.options)!=null&&a.dataProviderName?n.options.dataProviderName:"default"}var pt=e=>{var t;return(t=e==null?void 0:e.options)==null?void 0:t.dataProviderName};var gr=e=>{let t=[...e].filter(Boolean).sort((r,n)=>(n.priority||0)-(r.priority||0))[0];return t||null};var ta=Q($("prettier/standalone")),ra=Q($("prettier/parser-typescript")),vr=e=>{try{return ta.default.format(e,{parser:"typescript",plugins:[ra.default],arrowParens:"always",trailingComma:"all",semi:!0,tabWidth:4,printWidth:80})}catch(t){return console.warn("Formatting error in inferencer",t),e}};var yr=e=>e.replace(/ {2,}/g," ").replace(/\n{2,}/g,`
`);var hr=/(-id|-ids|_id|_ids|Id|Ids|ID|IDs)(\[\])?$/,na=(e,t)=>{let r=hr.test(e),n=typeof t=="string"||typeof t=="number",a=Array.isArray(t)&&t.every(o=>typeof o=="string"||typeof o=="number");return r&&n||r&&a?{key:e,relation:!0,multiple:!!a,type:"relation",priority:1}:!1};var ce=e=>e.replace(hr,"");var A=e=>ce(e).replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").replace(/-/g," ").split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");var br=e=>e.replace(/export\s+(const|let|var|type|interface|function|class)\s+(\w+)\s*(=|:)\s*/g,"$1 $2 = ").split(`
`).filter(a=>!a.trim().startsWith("export default")).join(`
`);var aa=/import(?:(?:(?:[ \n\t]+([^ *\n\t\{\},]+)[ \n\t]*(?:,|[ \n\t]+))?([ \n\t]*\{(?:[ \n\t]*[^ \n\t"'\{\}]+[ \n\t]*,?)+\})?[ \n\t]*)|[ \n\t]*\*[ \n\t]*as[ \n\t]+([^ \n\t\{\}]+)[ \n\t]+)from[ \n\t]*(?:['"])([^'"\n]+)(?:['"])(?:;?)/g,Ms=/import[ \n\t](?:['"])([^'"\n]+)(?:['"])(?:;?)/g,Ts=/((?:\w|\s|_)*)( as )((?:\w|\s|_)*)( |,)?/g,Cr=(e,t={})=>{let r=e.matchAll(aa),n=new Set;for(let a of r){let[,o,s,f,c]=a;if(c in t){let m=t[c];if(c==="react")continue;o&&n.add(`const { default: ${o} } = ${m};`),s&&n.add(`const${s.replace(Ts,"$1: $3$4")} = ${m};`),f&&n.add(`const ${f} = ${m};`)}}return yr(`
    ${Array.from(n).join(`
`)}
    ${e.replace(aa,"").replace(Ms,"")}
    `)};var mt=Q($("pluralize"));var $r=(e,t)=>e?t.find(n=>{let a=ce(e.key);return n.name===a||n.name===(mt.default.isPlural(a)?a:mt.default.plural(a))||n.name===(mt.default.isSingular(a)?a:mt.default.singular(a))}):void 0;var oa=Q($("pluralize"));var Ce=(e,t,r="Inferred")=>{let n=e.replace(/[^a-zA-Z0-9]/g," "),a=oa.default.singular(n),s=A(a).replace(/ /g,"")||r,f=t.charAt(0).toUpperCase()+t.slice(1);return/^[a-zA-Z]/.test(s)?`${s}${f}`:`${f}${s}`};var Os=e=>e?Array.isArray(e)?e.join(""):typeof e=="string"?e:typeof e=="object"||typeof e=="function"?e.toString():typeof e=="number"?String(e):typeof e=="boolean"&&e?"true":e:"",L=(e,...t)=>e.reduce((n,a,o)=>`${n}${a}${Os(t[o])}`,"").trim();var xr=(e,t)=>`
    ${e!=null?e:""}
    
    render(typeof ${t} !== "undefined" ? <${t} /> : <></>);
    `;var kr=e=>e==null?void 0:e.replace(/(\/\* hidden-start \*\/)(.|\n)*?(\/\* hidden-end \*\/)/g,"");var Vs=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Pr=e=>Vs.test(e);function Er(e,t,r){let n=`${e}`;return t&&(n+="?.",Pr(t)?n+=t:n+=`['${t}']`),r&&(n+="?.",Pr(r)?n+=r:n+=`['${r}']`),n}function Ws(e,t,r){return(r!=null?r:[]).map(a=>Er(e,t,a))}var F=(e,t,r,n=' + " " + ')=>Array.isArray(r)?n?Ws(e,t,r).join(n):Er(e,t,r[0]):Er(e,t,r),ae=(e,t,r)=>{let n=e;return t&&(n+=`.${t}`),r&&(Array.isArray(r)?n+=`.${r[0]}`:n+=`.${r}`),n};var Ne=e=>{let t=e.reduce((n,[a,o,s])=>(n[o]||(n[o]=[]),n[o].includes(a)||(s?n[o].push([a,!0]):n[o].push(a)),n),{});return Object.entries(t).map(([n,a])=>{let o=a.find(m=>Array.isArray(m)&&m[1]),s=a.filter(m=>typeof m=="string"),f=o?`${o[0]}`:"",c=s.length?`{ ${s.join(", ")} }`:"";return`import ${f}${f&&c?", ":""}${c} from "${n}";`})};var wr=Q($("pluralize")),oe=(e="")=>wr.default.isSingular(e)?e:wr.default.singular(e);var Ir=Q($("pluralize")),ge=(e="")=>Ir.default.isPlural(e)?e:Ir.default.plural(e);var Qs=/^id$/i,ft=e=>Qs.test(e);var gt=e=>e.relationInfer&&e.relationInfer.accessor?Array.isArray(e.relationInfer.accessor)?`optionLabel: "${e.relationInfer.accessor[0]}",`:e.relationInfer.accessor!=="title"?`optionLabel: "${e.relationInfer.accessor}",`:"":"";var qe=e=>{};var U=(e,t="")=>{if(Number.isInteger(Number(e)))return t.charAt(0).toLowerCase()+t.slice(1)+e;let n=e.replace(/^\d+/,"").replace(/[^a-zA-Z0-9]/g,"-"),a=A(n).replace(/ /g,"");return`${a.charAt(0).toLowerCase()+a.slice(1)}${t.charAt(0).toUpperCase()+t.slice(1)}`};var ia=e=>{let t=(r,n,a,o=t)=>{let s=e.map(c=>c(r,n,a,o));return gr(s)};return t};var sa=e=>(r,n,a,o,s)=>e.reduce((f,c)=>c(f,n,a,o,s),r);var la=(e,t,r,n)=>{let a=Array.isArray(t),o=Array.isArray(t)&&t.every(s=>typeof s=="string"||typeof s=="number");if(a){if(!o){let f=n(e,t[0],r,n);return f?{...f,key:e,multiple:!0,priority:1}:!1}let s=n(e,t[0],r,n)||{type:"string"};return{key:e,multiple:!0,priority:1,type:s==null?void 0:s.type}}return!1};var ua=(e,t)=>typeof t=="boolean"?{key:e,type:"boolean"}:!1;var Sr=Q($("dayjs")),Us=/(_at|_on|At|On|AT|ON)(\[\])?$/,ca=(e,t)=>{let r=Us.test(e)&&(0,Sr.default)(t).isValid(),n=typeof t=="string"&&(0,Sr.default)(t).isValid(),a=typeof t=="string"&&t.length>4;return r||n&&a?{key:e,type:"date",priority:1}:!1};var zs=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,da=(e,t)=>typeof t=="string"&&zs.test(t)?{key:e,type:"email",priority:1}:!1;var Hs=/\.(gif|jpe?g|tiff?|png|webp|bmp|svg)$/i,pa=(e,t)=>typeof t=="string"&&Hs.test(t)?{key:e,type:"image",priority:2}:!1;var ma=(e,t)=>typeof t>"u"||t===null?null:!1;var fa=(e,t)=>typeof t=="number"?{key:e,type:"number"}:!1;var js=/id$/i,ga=(e,t,r,n)=>{let a=t!==null,o=!Array.isArray(t);if(a&&o&&typeof t=="object"){if(Object.keys(t).length===1&&js.test(Object.keys(t)[0]))return{key:e,type:"relation",relation:!0,accessor:"id",priority:1};let c=mr(e,t);if((c?c.length>0:!1)&&c){let y=c&&Array.isArray(c)?c[0]:c,h=n(y,t[y],t,n);if(h){let p=Array.isArray(c)?c.map(d=>h.accessor?`${d}.${Array.isArray(h.accessor)?h.accessor[0]:h.accessor}`:d):h.accessor?Array.isArray(h.accessor)?`${c}.${h.accessor[0]}`:`${c}.${h.accessor}`:c;return{...h,fieldable:!0,key:e,accessor:p,priority:1}}}return{key:e,fieldable:!1,type:"object",priority:1}}return!1};var va=(e,t)=>typeof t=="string"&&t.length>100?{key:e,type:"richtext",priority:1}:!1;var ya=(e,t)=>typeof t=="string"?{key:e,type:"text"}:!1;var Bs=/^(https?|ftp):\/\/(-\.)?([^\s/?\.#-]+\.?)+(\/[^\s]*)?$/i,ha=(e,t)=>typeof t=="string"&&Bs.test(t)?{key:e,type:"url",priority:1}:!1;var ba=[la,ua,ca,da,pa,ma,fa,ga,na,va,ya,ha];var Ca=(e,t,r,n)=>e.map(o=>{if(!o.relation&&(o.type==="text"||o.type==="richtext"||o.type==="number")&&!o.canRelation){let s=/^[a-z0-9-]+$/,f=p=>s.test(`${p}`),c=o.key.toLowerCase()!=="id";return!(!o.accessor||typeof o.accessor=="string")||!c?o:(o.multiple?n[o.key]:[n[o.key]]).every(p=>f(o.accessor?p[o.accessor]:p))?{...o,canRelation:!0}:o}return o});var Ks=/(image|photo|avatar|cover|thumbnail|icon)/i,$a=e=>e.map(r=>r.type==="url"&&Ks.test(r.key)?{...r,type:"image"}:r);var xa=(e,t)=>e.map(n=>{let a=$r(n,t);return a?{...n,relation:!0,type:"relation",resource:a}:n});var ka=(e,t,r,n,a)=>e.map(s=>{if(s.relation&&s.type==="relation"&&!s.resource){let f=s.accessor?n[s.key][s.accessor]:n[s.key],c=a(s.key,f,n,a);if(c&&c.type!=="relation")return{...s,fieldable:!0,relation:!1,type:c.type,canRelation:!0}}return s});var Pa=[$a,xa,ka,Ca];var Me=Q($("react")),Rt=Q($("prism-react-renderer")),Ea=Q($("prism-react-renderer/themes/vsDark")),Fr=({code:e,wrapperProps:t})=>((0,Me.useEffect)(()=>{var n;let r=document.createElement("style");r.appendChild(document.createTextNode(`
                #code-highlight::-webkit-scrollbar {-webkit-appearance: none; height: 7px; width: 7px;}
                #code-highlight::-webkit-scrollbar-thumb {background-color: #666b7a;}
                #code-highlight::-webkit-scrollbar-corner {background-color: rgb(30, 30, 30);}
                `)),(n=document.getElementById("code-highlight"))==null||n.appendChild(r)},[]),Me.default.createElement("div",{id:"code-highlight",style:{maxHeight:"75vh",height:"100%",overflow:"auto",backgroundColor:"rgb(30, 30, 30)"},...t!=null?t:{}},Me.default.createElement(Rt.default,{...Rt.defaultProps,theme:Ea.default,code:e,language:"tsx"},({className:r,style:n,tokens:a,getLineProps:o,getTokenProps:s})=>Me.default.createElement("pre",{className:r,style:{...n,padding:"14px 14px 14px 14px",margin:"0",width:"100%",boxSizing:"border-box"}},a.map((f,c)=>Me.default.createElement("div",{key:c,...o({line:f,key:c})},f.map((m,y)=>Me.default.createElement("span",{key:y,...s({token:m,key:y})}))))))));var ve=Q($("react")),_s=Q(be()),Dt=$("@aliemir/react-live");var wa=[["react","React",ve.default],["@pankod/refine-core","RefineCore",_s]],Nr=ve.default.createContext({}),qr=({fetchError:e,code:t,additionalScope:r,errorComponent:n})=>{var f;let a=(f=t&&br(Cr(t,[...wa,...r!=null?r:[]].reduce((c,[m,y,h,p])=>p?c:{...c,[m]:y},{}))))!=null?f:"",o=ve.default.useMemo(()=>({React:ve.default,...ve.default,...[...wa,...r!=null?r:[]].reduce((c,[m,y,h])=>({...c,[y]:h}),{})}),[r]),s=ve.default.useMemo(()=>()=>{let{error:m}=ve.default.useContext(Nr);return n?ve.default.createElement(n,{error:m?`<p>An error occured while rendering the generated component.You can check the generated code from the below "Show Code" button and fix the error manually.</p>
                                    <p>If you think this is a bug, please report the issue at <a target="_blank" rel="noopener noreferrer" href="https://github.com/refinedev/refine/issues">https://github.com/refinedev/refine/issues</a></p>
                                    <p>Exception:</p>
                                    <code>${m}</code>`:typeof e=="string"?e:e?`<p>Something went wrong while fetching the resource data.</p>
                                    <p>To learn more about the Inferencer, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`:void 0}):null},[n,e]);return ve.default.createElement(Dt.LiveProvider,{Context:Nr,code:a,scope:o,noInline:!0},!e&&ve.default.createElement(Dt.LivePreview,{Context:Nr}),ve.default.createElement(s,null))};var Ge=Q($("react")),Mt=Q(be());var Ia=(e,t,r)=>{let{resource:n,resourceName:a,id:o,resources:s}=(0,Mt.useResource)({resourceNameOrRouteName:t}),f=r!=null?r:o,c=(0,Mt.useDataProvider)(),[m,y]=Ge.default.useState(void 0),[h,p]=Ge.default.useState(void 0),[d,g]=Ge.default.useState(!0),[i,b]=Ge.default.useState(!1),C=Ge.default.useCallback(async l=>{var P,S;let x=(P=pt(n))!=null?P:fr(a,void 0,s),k=c(x);b(!0),y(void 0);try{if(e==="list"||e==="create"){let w=(S=(await k.getList({resource:a})).data)==null?void 0:S[0];w||y(`<p>No records/data found for resource "${a}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),p(w),setTimeout(()=>{b(!1)},500)}if((e==="edit"||e==="show")&&l){let w=(await k.getOne({resource:a,id:l})).data;w||y(`<p>No records/data found for resource "${a}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),p(w),setTimeout(()=>{b(!1)},500)}}catch(u){console.warn("An error occured while fetching the resource data. Please check the error message below:",u),y(`<p>Something went wrong while fetching the resource data.</p>
                    <p>Please check your data provider and API for resource "${a}".</p>
                    <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),setTimeout(()=>{b(!1)},500)}},[e,c,n,a,s]);return Ge.default.useEffect(()=>{g(!1),!i&&!h&&C(f)},[C,f]),{data:h,loading:i,initial:d,error:m}};var it=Q($("react")),Sa=Q(be());var Ar=$("lodash"),Fa=({record:e,fields:t,infer:r})=>{let n=(0,Sa.useDataProvider)(),[a,o]=it.default.useState([]),[s,f]=it.default.useState(!0),[c,m]=it.default.useState(!1),y=it.default.useCallback(async h=>{console.groupCollapsed("@pankod/refine-inferencer is trying to detect relations");let p=[];m(!0);try{let d=h.map(async i=>{if(i&&(i.relation||i.canRelation)&&e){let b=pt(i.resource),C=n(b),l=Array.isArray(i.accessor)?void 0:i.multiple?e[i.key].map(x=>i.accessor?(0,Ar.get)(x,i.accessor):x)[0]:i.accessor?(0,Ar.get)(e[i.key],i.accessor):e[i.key];if(l&&i.resource)try{let{data:x}=await C.getOne({resource:i.resource.name,id:l});p.push({status:"success",resource:i.resource.name,field:i.key});let k=r("__",x,{},r);return{...i,relationInfer:k}}catch{return p.push({status:"error",resource:i.resource.name,field:i.key}),{...i,relationInfer:null}}if(l){let x,k;try{let{data:u}=await C.getOne({resource:ge(ce(i.key)),id:l});p.push({status:"success",resource:ge(ce(i.key)),field:i.key}),x=u,k=!0}catch{p.push({status:"error",resource:ge(ce(i.key)),field:i.key});try{let{data:w}=await C.getOne({resource:oe(ce(i.key)),id:l});p.push({status:"success",resource:oe(ce(i.key)),field:i.key}),x=w,k=!1}catch{return p.push({status:"error",resource:oe(ce(i.key)),field:i.key}),{...i,relationInfer:null}}}let P=r("__",x,{},r),S=ce(i.key);return{...i,relation:!0,type:"relation",resource:{name:k?ge(S):oe(S)},fieldable:!1,canRelation:void 0,relationInfer:P}}return{...i,relationInfer:null}}return i}),g=await Promise.all(d);o(g.filter(i=>i)),setTimeout(()=>{m(!1)},500)}catch{setTimeout(()=>{m(!1)},500)}setTimeout(()=>{console.log(`Tried to detect relations with ${p.length} attempts and succeeded with ${p.filter(d=>d.status==="success").length} attempts.`),console.groupEnd()},500)},[n,e]);return it.default.useEffect(()=>{f(!1),!c&&t&&t.length>0&&a.length===0&&y(t)},[y,c,t,y]),{fields:a,loading:c,initial:s}};var Te=({type:e,additionalScope:t=[],customElements:r=[],fieldTransformers:n=[],renderer:a,loadingComponent:o,errorComponent:s,codeViewerComponent:f})=>{let c=ia([...ba,...r]),m=sa([...Pa,...n]),y=({resourceName:p,fieldTransformer:d,id:g})=>{var v;let{resource:i,resources:b}=(0,Lr.useResource)({resourceNameOrRouteName:p}),{resource:C}=(0,Lr.useResource)(),{data:l,loading:x,initial:k,error:P}=Ia(e,p!=null?p:i==null?void 0:i.name,g),S=$e.default.useMemo(()=>{if(l){let E=Object.keys(l).map(R=>{let M=l[R];return c(R,M,l,c)}).filter(Boolean),q=m(E,b,i,l,c);return d?q.flatMap(R=>{let M=d(R);return M?[M]:[]}):q}return[]},[l,b,i,d]),{fields:u,loading:w}=Fa({record:l,fields:S,infer:c}),I=$e.default.useMemo(()=>!x&&!w&&!k?a({resource:i,resources:b,fields:u,infer:c,isCustomPage:i.name!==C.name,id:g}):"",[i,b,u,x,w]);return $e.default.createElement($e.default.Fragment,null,o&&(x||w)&&$e.default.createElement(o,null),!x&&!w&&$e.default.createElement($e.default.Fragment,null,$e.default.createElement(qr,{fetchError:!x&&P?P:!x&&!k&&!l,code:xr(I,Ce((v=i.label)!=null?v:i.name,e)),errorComponent:s,additionalScope:t}),f&&$e.default.createElement(f,{code:kr(I),loading:x||w})))};return({name:p,resource:d,fieldTransformer:g,id:i})=>$e.default.createElement(y,{fieldTransformer:g,resourceName:d!=null?d:p,key:d!=null?d:p,id:i})};var Tt=Q($("react")),Oe=({error:e})=>e?Tt.default.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px",position:"relative"}},Tt.default.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},Tt.default.createElement("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},dangerouslySetInnerHTML:{__html:e!=null?e:""}}))):null;var st=Q($("react")),Ve=()=>{let[e,t]=st.default.useState(0);return st.default.useEffect(()=>{if(typeof window<"u"){let r=setInterval(()=>{t(n=>n===3?0:n+1)},300);return()=>{clearInterval(r)}}return()=>{}},[]),st.default.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"120px",position:"relative"}},st.default.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},st.default.createElement("span",{style:{fontSize:"1rem",fontWeight:600}},"loading",".".repeat(e))))};var W=Q($("react")),We=$("@tabler/icons");var Gs=({visible:e,onClose:t,children:r})=>e?W.default.createElement("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,backgroundColor:"rgba(0, 0, 0, 0.5)"}},W.default.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80%",height:"80%",backgroundColor:"#fff",maxWidth:"700px",borderRadius:"4px",padding:"16px",paddingTop:"32px"}},W.default.createElement("div",{style:{position:"absolute",top:4,right:6,width:"32px",height:"32px",fontSize:"24px",lineHeight:"32px",cursor:"pointer",textAlign:"center"},onClick:t},"\xD7"),r)):null,Qe=({code:e,loading:t})=>{let r=W.default.useMemo(()=>vr(e!=null?e:""),[e]),n=W.default.useRef(null),[a,o]=W.default.useState(!1),[s,f]=W.default.useState(!1),c=W.default.useCallback(()=>{f(!0)},[]),m=W.default.useCallback(()=>{f(!1)},[]);if(t)return null;let y=()=>{var h,p,d,g;(h=n==null?void 0:n.current)==null||h.select(),(p=n==null?void 0:n.current)==null||p.setSelectionRange(0,Number.MAX_SAFE_INTEGER),typeof navigator<"u"&&(navigator.clipboard.writeText((g=(d=n==null?void 0:n.current)==null?void 0:d.value)!=null?g:""),o(!0),setTimeout(()=>{o(!1)},1e3))};return r?W.default.createElement(W.default.Fragment,null,W.default.createElement("div",{style:{position:"fixed",bottom:"12px",right:"64px"}},W.default.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",gap:"12px"}},W.default.createElement("button",{style:{backgroundColor:"#fff",border:"1px solid #e2e8f0",borderRadius:"4px",padding:"8px 16px",cursor:"pointer",display:"flex",fontFamily:"sans-serif",alignItems:"center"},onClick:c},W.default.createElement(We.IconCode,{size:18}),W.default.createElement("span",{style:{marginLeft:"8px",fontSize:"14px",color:"#666B7A"}},"Show Code")),W.default.createElement("a",{href:"https://github.com/refinedev/refine/discussions/3046",target:"_blank",rel:"noreferrer",style:{backgroundColor:"#fff",border:"1px solid #e2e8f0",borderRadius:"4px",padding:"8px 16px",cursor:"pointer",display:"flex",alignItems:"center",textDecoration:"none",color:"#666B7A",fontFamily:"sans-serif"}},W.default.createElement(We.IconMessageCircle,{size:18}),W.default.createElement("span",{style:{marginLeft:"8px",fontSize:"14px",color:"#666B7A"}},"Give Feedback")))),W.default.createElement("div",{style:{height:"50px"}}),W.default.createElement(Gs,{visible:s,onClose:m},W.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",width:"100%",height:"100%"}},W.default.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}},W.default.createElement(Fr,{code:r,wrapperProps:{style:{width:"100%",maxHeight:"75vh",height:"100%",overflow:"auto",backgroundColor:"rgb(30, 30, 30)"}}}),W.default.createElement("textarea",{ref:n,defaultValue:(r!=null?r:"").replace(/\\n/g,`\r
`),id:"code-input",style:{padding:0,margin:0,width:0,height:0,opacity:0,border:"none",display:"block"}})),W.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center",paddingTop:"8px",width:"100%",height:"100%"}},W.default.createElement("button",{style:{backgroundColor:"#fff",border:"1px solid #e2e8f0",borderRadius:"4px",padding:"8px 16px",cursor:"pointer",display:"flex",alignItems:"center"},onClick:y},a?W.default.createElement(We.IconCheck,{size:18}):W.default.createElement(We.IconCopy,{size:18}),W.default.createElement("span",{style:{marginLeft:"8px",fontSize:"14px",color:"#666B7A"}},a?"Copied":"Copy")))))):null};var Na=({resource:e,fields:t,isCustomPage:r,id:n})=>{var u,w,I;let a=Ce((u=e.label)!=null?u:e.name,"show"),o="record",s=[["React","react",!0],["useShow","@pankod/refine-core"],["useResource","@pankod/refine-core"],["useNavigation","@pankod/refine-core"]],c=t.filter(v=>(v==null?void 0:v.relation)&&!(v!=null&&v.fieldable)&&(v==null?void 0:v.resource)).filter(Boolean).map(v=>{if((v==null?void 0:v.relation)&&!v.fieldable&&v.resource){if(v.multiple){s.push(["useMany","@pankod/refine-core"]);let E=F(o,v.key);return v.accessor&&(E=`${F(o,v.key)}?.map((item: any) => ${F("item",void 0,v.accessor)})`),`
                const { data: ${U(v.key,"Data")}, isLoading: ${U(v.key,"IsLoading")} } =
                useMany({
                    resource: "${v.resource.name}",
                    ids: ${E} || [],
                    queryOptions: {
                        enabled: !!${o},
                    },
                });
                `}return s.push(["useOne","@pankod/refine-core"]),`
                const { data: ${U(v.key,"Data")}, isLoading: ${U(v.key,"IsLoading")} } =
                useOne({
                    resource: "${v.resource.name}",
                    id: ${F(o,v.key,v.accessor,!1)} || "",
                    queryOptions: {
                        enabled: !!${o},
                    },
                });
            `}}).filter(Boolean),m=v=>{if(v.relation&&v.resource){let E=U(v.key,"Data"),q=U(v.key,"IsLoading");return v.multiple?L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <ul>
                    {${q} ? <>Loading...</> : (
                        <>
                        ${(()=>{var T;if(v.relationInfer)if((T=v.relationInfer)!=null&&T.accessor){if(Array.isArray(v.relationInfer.accessor))return"";{let R=U(v.key),M=F(R,void 0,v.relationInfer.accessor);return L`
                                            {${E}?.data?.map((${R}: any) => <li key={${M}}>{${M}}</li>)}
                                        `}}else return"";else return""})()}
                        </>
                    )}
                    </ul>
                </div>
                `:L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <div>
                    {${q} ? <>Loading...</> : (
                        <>
                        ${(()=>{var T;return v.relationInfer?(T=v.relationInfer)!=null&&T.accessor?Array.isArray(v.relationInfer.accessor)?`{${F(`${E}?.data`,void 0,v.relationInfer.accessor,' + " " + ')}}`:`{${E}?.data?.${v.relationInfer.accessor}}`:`{${E}?.data}`:`{${E}?.data?.id}`})()}
                        </>
                    )}
                    </div>
                </div>
                `}},y=v=>{if(v.type==="text"){if(v.multiple){let E=F("item",void 0,v.accessor);return L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <ul>
                        {${F(o,v.key)}?.map((item: any) => (
                            <li key={${E}}>
                                {${E}}
                            </li>
                        ))}
                    </ul>
                </div>
            `}return L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <div>
                    {${F(o,v.key,v.accessor)}}
                    </div>
                </div>
            `}},h=v=>{if(v.type==="image"){if(v.multiple){let E=F("item",void 0,v.accessor);return L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <ul>
                    {${F(o,v.key)}?.map((item: any) => (
                        <li key={${E}}>
                            <img style={{ maxWidth: 200 }} src={${E}}/>
                        </li>
                    ))}
                    </ul>
                </div>
            `}return L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <img src={{ maxWidth: 200 }} src={${F(o,v.key,v.accessor," + ")}} />
                </div>
                `}},p=v=>{if(v.type==="email"){if(v.multiple){let E=F("item",void 0,v.accessor);return L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <ul>
                        {${F(o,v.key)}?.map((item: any) => (
                            <li key={${E}}>
                                <a href={"mailto:" + ${E}}>{${E}}</a>
                            </li>
                        ))}
                    </ul>
                </div>
            `}return L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <div>
                        <a href={"mailto:" + ${F(o,v.key,v.accessor," + ")}}>
                            {${F(o,v.key,v.accessor," + ")}}
                        </a>
                    </div>
                </div>
            `}},d=v=>{if(v.type==="url"){if(v.multiple){let E=F("item",void 0,v.accessor);return L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <ul>
                        {${F(o,v.key)}?.map((item: any) => (
                            <li key={${E}}>
                                <a href={${E}}>{${E}}</a>
                            </li>
                        ))}
                    </ul>
                </div>
            `}return L`
            <div style={{ marginTop: "6px" }}>
                <h5>${A(v.key)}</h5>
                <div>
                    <a href={${F(o,v.key,v.accessor," + ")}} target="_blank" rel="noreferrer">
                        {${F(o,v.key,v.accessor," + ")}}
                    </a>
                </div>
            </div>
            `}},g=v=>{if(v.type==="boolean"){if(v.multiple){let E=F("item",void 0,v.accessor);return L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <ul>
                        {${F(o,v.key)}?.map((item: any) => (
                            <li key={${E}}>
                                {${E} ? "Yes" : "No"}
                            </li>
                        ))}
                    </ul>
                </div>
            `}return L`
            <div style={{ marginTop: "6px" }}>
                <h5>${A(v.key)}</h5>
                <div>
                {${F(o,v.key,v.accessor," && ")} ? "Yes" : "No"}
                </div>
            </div>
            `}},i=v=>{if(v.type==="date"){if(v.multiple){let E=F("item",void 0,v.accessor);return L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <ul>
                    {${F(o,v.key)}?.map((item: any) => (
                        <li key={${E}}>
                            {(new Date(${E})).toLocaleString(undefined, { timeZone: "UTC" })}
                        </li>
                    ))}
                    </ul>
                </div>
            `}return L`
            <div style={{ marginTop: "6px" }}>
                <h5>${A(v.key)}</h5>
                <div>
                    {(new Date(${F(o,v.key,v.accessor," + ' ' + ")})).toLocaleString(undefined, { timeZone: "UTC" })}
                </div>
            </div>
            `}},b=v=>{if(v.type==="richtext")return L`
            <div style={{ marginTop: "6px" }}>
                <h5>${A(v.key)}</h5>
                <p>
                {${F(o,v.key,v.accessor,' + " " + ')}}
                </p>
            </div>
            `},C=v=>{if(v.type==="number"){if(v.multiple){let E=F("item",void 0,v.accessor);return L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <ul>
                        {${F(o,v.key)}?.map((item: any) => (
                        <li key={${E}}>
                            {${E}}
                        </li>
                        ))}
                    </ul>
                </div>
                `}return L`
                <div style={{ marginTop: "6px" }}>
                    <h5>${A(v.key)}</h5>
                    <div>
                    {${F(o,v.key,v.accessor,' + " " + ')} ?? ""}
                    </div>
                </div>
            `}},l=v=>{if(v)return L`
                ${v}
            `},x=t.map(v=>{switch(v==null?void 0:v.type){case"text":return l(y(v));case"number":return l(C(v));case"richtext":return l(b(v));case"email":return l(p(v));case"image":return l(h(v));case"date":return l(i(v));case"boolean":return l(g(v));case"url":return l(d(v));case"relation":return l(m(v));default:return}}),{canEdit:k,list:P}=e!=null?e:{},S=!!P;return qe(s),L`
    ${Ne(s)}
    
    export const ${a} = () => {
        const { edit, list } = useNavigation();
        ${r?"":"const { id } = useResource();"}
        const { queryResult } = useShow(${r?`{ 
                    resource: "${e.name}", 
                    id: ${n}
                }`:""});
        const { data, isLoading } = queryResult;

        const ${o} = data?.data;
    
        ${c}

        return (
            <div style={{ padding: "16px" }}>
            <div style={{ display: "flex", alignItems: "center", justifyContent: "space-between" }}>
                <h1>
                ${A(oe((w=e.label)!=null?w:e.name))}
                </h1>
                <div style={{ display: "flex", gap: "8px" }}>
                ${S?L`<button onClick={() => list("${e.name}")}>${A(ge((I=e.label)!=null?I:e.name)+" list")}</button>`:""}
                ${k?L`<button onClick={() => edit("${e.name}", ${r?`"${n}"`:"id ?? ''"})}>Edit</button>`:""}
                </div>
            </div>
                <div>
                    ${x.join("")}
                </div>
            </div>
        );
    };
    `},Rr=Te({type:"show",additionalScope:[],codeViewerComponent:Qe,loadingComponent:Ve,errorComponent:Oe,renderer:Na});var al=Q(Ra());var Ze=e=>Array.isArray(e.accessor)||e.multiple?`accessorKey: "${e.key}"`:e.accessor?`accessorKey: "${ae(e.key,void 0,e.accessor)}"`:`accessorKey: "${e.key}"`,Da=({resource:e,fields:t,isCustomPage:r})=>{var P,S;let n=Ce((P=e.label)!=null?P:e.name,"list"),a="tableData?.data",o=[["React","react",!0],["IResourceComponentsProps","@pankod/refine-core"],["useNavigation","@pankod/refine-core"],["useTable","@pankod/refine-react-table"],["ColumnDef","@pankod/refine-react-table"],["flexRender","@pankod/refine-react-table"]],s=t.filter(u=>(u==null?void 0:u.relation)&&!(u!=null&&u.fieldable)&&(u==null?void 0:u.resource)),f=s.filter(Boolean).map(u=>{if((u==null?void 0:u.relation)&&!u.fieldable&&u.resource){o.push(["GetManyResponse","@pankod/refine-core"]),o.push(["useMany","@pankod/refine-core"]);let w="";return u.multiple?w=`[].concat(...(${a}?.map((item) => ${F("item",u.key,u.accessor,!1)}) ?? []))`:w=`${a}?.map((item) => ${F("item",u.key,u.accessor,!1)}) ?? []`,`
                const { data: ${U(u.key,"Data")} } =
                useMany({
                    resource: "${u.resource.name}",
                    ids: ${w},
                    queryOptions: {
                        enabled: !!${a},
                    },
                });
                `}}).filter(Boolean),c=s==null?void 0:s.map(u=>{if(u&&u.resource)return U(u.key,"Data")}).filter(Boolean),m=u=>{var w;if(u.relation&&u.resource){let I=`${U(u.key,"Data")}?.data`;if(Array.isArray(u.accessor))return;let v=`id: "${u.key}"`,E=`header: "${A(u.key)}"`,q=Ze(u),T="";if(u.multiple){let R="item";u!=null&&u.relationInfer&&(R=F("item",void 0,u.relationInfer.accessor)),T=`cell: function render({ getValue, table }) {
                    const meta = table.options.meta as {
                        ${U(u.key,"Data")}: GetManyResponse;
                    };

                    ${u!=null&&u.accessor?"try {":""}

                    const ${U(u.key,"")} = getValue<any[]>()?.map((item) => {
                        return meta.${U(u.key,"Data")}?.data?.find(
                            (resourceItems) => resourceItems.id === ${F("item",void 0,u.accessor)}
                        );
                    })


                    return (
                        <ul>
                            {${U(u.key,"")}?.map((item, index) => (
                                <li key={index}>
                                    {${R}}
                                </li>
                            ))}
                        </ul>
                    )
                    ${u!=null&&u.accessor?" } catch (error) { return null; }":""}
                }
            `}else u!=null&&u.relationInfer?T=`cell: function render({ getValue, table }) {
                        const meta = table.options.meta as {
                            ${U(u.key,"Data")}: GetManyResponse;
                        };

                        ${u!=null&&u.accessor?"try {":""}

                        const ${U(u.key,"")} = meta.${I}?.find(
                            (item) => item.id === getValue<any>(),
                        );

                        return ${F(U(u.key),void 0,(w=u==null?void 0:u.relationInfer)==null?void 0:w.accessor)} ?? "Loading...";

                        ${u!=null&&u.accessor?" } catch (error) { return null; }":""}
                    },`:T="";return`
                {
                    ${v},
                    ${E},
                    ${q},
                    ${T}
                }
            `}},y=u=>{if(u.type==="image"){let w=`id: "${u.key}"`,I=Ze(u),v=`header: "${A(u.key)}"`,E=L`
                cell: function render({ getValue }) {
                    ${u!=null&&u.accessor?"try {":""}
                        return <img style={{ maxWidth: "100px" }} src={${F("getValue<any>()",void 0,Array.isArray(u.accessor)?u.accessor:void 0," + ")}} />
                    ${u!=null&&u.accessor?" } catch (error) { return null; }":""}
                }
            `;if(u.multiple){let q=F("item",void 0,u.accessor," + ");E=`
                    cell: function render({ getValue }) {
                        ${u!=null&&u.accessor?"try {":""}
                            return (
                                <ul>
                                    {getValue<any[]>()?.map((item, index) => (
                                        <li key={index}><img src={${q}} style={{ height: "50px", maxWidth: "100px" }} /></li>
                                    ))}
                                </ul>
                            )
                        ${u!=null&&u.accessor?" } catch (error) { return null; }":""}
                    }
                `}return`
                {
                    ${w},
                    ${I},
                    ${v},
                    ${E}
                }
            `}},h=u=>{if(u.type==="email"){let w=`id: "${u.key}"`,I=Ze(u),v=`header: "${A(u.key)}"`,E=L`
                cell: function render({ getValue }) {
                    return <a href={"mailto:" + ${F("getValue<any>()",void 0,Array.isArray(u.accessor)?u.accessor:void 0,' + " " + ')}}>{${F("getValue<any>()",void 0,Array.isArray(u.accessor)?u.accessor:void 0,' + " " + ')}}</a>
                }
            `;return u.multiple&&(E=`
                    cell: function render({ getValue }) {
                        return (
                            <ul>
                                {getValue<any[]>()?.map((item, index) => (
                                    <li key={index}>
                                        {${F("item",void 0,u.accessor," + ")}}
                                    </li>
                                ))}
                            </ul>
                        )
                    }
                `),`
                {
                    ${w},
                    ${I},
                    ${v},
                    ${E}
                }
            `}},p=u=>{if(u.type==="url"){let w=`id: "${u.key}"`,I=Ze(u),v=`header: "${A(u.key)}"`,E=L`
                cell: function render({ getValue }) {
                    return <a href={${F("getValue<any>()",void 0,Array.isArray(u.accessor)?u.accessor:void 0," + ")}}>{${F("getValue<any>()",void 0,Array.isArray(u.accessor)?u.accessor:void 0," + ")}}</a>
                }
            `;return u.multiple&&(E=`
                    cell: function render({ getValue }) {
                        return (
                            <ul>
                                {getValue<any[]>()?.map((item, index) => (
                                    <li key={index}>
                                        {${F("item",void 0,u.accessor," + ")}}
                                    </li>
                                ))}
                            </ul>
                        )
                    }
                `),`
                {
                    ${w},
                    ${I},
                    ${v},
                    ${E}
                }
            `}},d=u=>{if((u==null?void 0:u.type)==="boolean"){let w=`id: "${u.key}"`,I=Ze(u),v=`header: "${A(u.key)}"`,E=L`
                cell: function render({ getValue }) {
                    return ${F("getValue<any>()",void 0,Array.isArray(u.accessor)?u.accessor:void 0," + ")} ? "yes" : "no"
                }
            `;return u.multiple&&(E=`
                    cell: function render({ getValue }) {
                        return (
                            <ul>
                                {getValue<any[]>()?.map((item, index) => (
                                    <li key={index}>
                                        {${F("item",void 0,u.accessor," + ")} ? "yes" : "no"}
                                    </li>
                                ))}
                            </ul>
                        );
                    }
                `),`
                {
                    ${w},
                    ${I},
                    ${v},
                    ${E}
                }
            `}},g=u=>{if(u.type==="date"){let w=`id: "${u.key}"`,I=Ze(u),v=`header: "${A(u.key)}"`,E=L`
                cell: function render({ getValue }) {
                    return (new Date(${F("getValue<any>()",void 0,Array.isArray(u.accessor)?u.accessor:void 0,' + " " + ')})).toLocaleString(undefined, { timeZone: "UTC" })
                }
            `;return u.multiple&&(E=`
                    cell: function render({ getValue }) {
                        return (
                            <ul>
                                {getValue<any[]>()?.map((item, index) => (
                                    <li key={index}>
                                    {(new Date(${F("item",void 0,u.accessor," + ")})).toLocaleString(undefined, { timeZone: "UTC" })}
                                    </li>
                                ))}
                            </ul>
                        )
                    }
                `),`
                {
                    ${w},
                    ${I},
                    ${v},
                    ${E}
                }
            `}},i=u=>{if(u&&(u.type==="text"||u.type==="number"||u.type==="richtext")){let w=`id: "${u.key}"`,I=Ze(u),v=`header: "${A(u.key)}"`,E="";return u.multiple&&(E=`
                    cell: function render({ getValue }) {
                        return (
                            <ul>
                                {getValue<any[]>()?.map((item, index) => (
                                    <li key={index}>
                                        {${F("item",void 0,u.accessor,' + " " + ')}}
                                    </li>
                                ))}
                            </ul>
                        )
                    }
                `),!u.multiple&&Array.isArray(u.accessor)&&(E=`
                    cell: function render({ getValue }) {
                        return (
                            <>{${F("getValue<any>()",u.key,u.accessor)}}</>
                        );
                    }
                `),`
                {
                    ${w},
                    ${I},
                    ${v},
                    ${E}
                }
            `}},{canEdit:b,canShow:C,canCreate:l}=e!=null?e:{},x=b||C?L`
    {
        id: "actions",
        accessorKey: "id",
        header: "Actions",
        cell: function render({ getValue }) {
            return (
                <div
                    style={{
                        display: "flex",
                        flexDirection: "row",
                        flexWrap: "wrap",
                        gap: "4px",
                    }}
                >
                ${C?L`
                    <button
                        onClick={() => {
                            show("${e.name}", getValue() as string);
                        }}
                    >
                        Show
                    </button>
                    `:""}
                    ${b?L`
                            <button
                            onClick={() => {
                                edit("${e.name}", getValue() as string);
                            }}
                        >
                            Edit
                        </button>
                    `:""}
                </div>
            );
        },
    },
        `:"",k=t.map(u=>{switch(u==null?void 0:u.type){case"text":case"number":case"richtext":return i(u);case"email":return h(u);case"image":return y(u);case"date":return g(u);case"boolean":return d(u);case"url":return p(u);case"relation":return m(u);default:return}});return qe(o),L`
    ${Ne(o)}
    
    export const ${n}: React.FC<IResourceComponentsProps> = () => {
        const columns = React.useMemo<ColumnDef<any>[]>(() => [
            ${[...k,x].filter(Boolean).join(",")}
        ], []);

        ${b||C?L`
        const { ${b?"edit,":""} ${C?"show,":""} ${l?"create,":""} } = useNavigation();
        `:""}

        const {
            getHeaderGroups,
            getRowModel,
            setOptions,
            refineCore: {
                tableQueryResult: { data: tableData },
            },
            getState,
            setPageIndex,
            getCanPreviousPage,
            getPageCount,
            getCanNextPage,
            nextPage,
            previousPage,
            setPageSize,
            getColumn,
        } = useTable({
            columns,
            ${r?`
            refineCoreProps: {
                resource: "${e.name}",
            }
            `:""}
            
        });

        ${f}

        setOptions((prev) => ({
            ...prev,
            meta: {
                ...prev.meta,
                ${c.join(", ")}
            },
        }));

        return (
            <div style={{ padding: "16px" }}>
            <div style={{ display: "flex", alignItems: "center", justifyContent: "space-between" }}>
                <h1>${A((S=e.label)!=null?S:e.name)}</h1>
                ${l?L`<button onClick={() => create("${e.name}")}>Create</button>`:""}
            </div>
                <div style={{ maxWidth: "100%", overflowY: "scroll" }}>
                    <table>
                        <thead>
                            {getHeaderGroups().map((headerGroup) => (
                                <tr key={headerGroup.id}>
                                    {headerGroup.headers.map((header) => (
                                        <th key={header.id}>
                                            {!header.isPlaceholder && (
                                                flexRender(
                                                    header.column.columnDef
                                                        .header,
                                                    header.getContext(),
                                                )
                                            )}
                                        </th>
                                    ))}
                                </tr>
                            ))}
                        </thead>
                        <tbody>
                            {getRowModel().rows.map((row) => (
                                <tr key={row.id}>
                                    {row.getVisibleCells().map((cell) => (
                                        <td key={cell.id}>
                                            {flexRender(
                                                cell.column.columnDef.cell,
                                                cell.getContext(),
                                            )}
                                        </td>
                                    ))}
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
                <div style={{ marginTop: "12px" }}>
                    <button
                        onClick={() => setPageIndex(0)}
                        disabled={!getCanPreviousPage()}
                    >
                        {"<<"}
                    </button>
                    <button
                        onClick={() => previousPage()}
                        disabled={!getCanPreviousPage()}
                    >
                        {"<"}
                    </button>
                    <button onClick={() => nextPage()} disabled={!getCanNextPage()}>
                        {">"}
                    </button>
                    <button
                        onClick={() => setPageIndex(getPageCount() - 1)}
                        disabled={!getCanNextPage()}
                    >
                        {">>"}
                    </button>
                    <span>
                        Page
                        <strong>
                            {getState().pagination.pageIndex + 1} of{" "}
                            {getPageCount()}
                        </strong>
                    </span>
                    <span>
                        | Go to page:
                        <input
                            type="number"
                            defaultValue={getState().pagination.pageIndex + 1}
                            onChange={(e) => {
                                const page = e.target.value
                                    ? Number(e.target.value) - 1
                                    : 0;
                                setPageIndex(page);
                            }}
                        />
                    </span>{" "}
                    <select
                        value={getState().pagination.pageSize}
                        onChange={(e) => {
                            setPageSize(Number(e.target.value));
                        }}
                    >
                        {[10, 20, 30, 40, 50].map((pageSize) => (
                            <option key={pageSize} value={pageSize}>
                                Show {pageSize}
                            </option>
                        ))}
                    </select>
                </div>
            </div>   
        );
    };
    `},Mr=Te({type:"list",additionalScope:[["@pankod/refine-react-table","RefineReactTable",al]],codeViewerComponent:Qe,loadingComponent:Ve,errorComponent:Oe,renderer:Da});var fl=Q(be()),gl=Q(Vr());var Ua=({resource:e,fields:t,isCustomPage:r})=>{var p,d,g;let n=Ce((p=e.label)!=null?p:e.name,"create"),a=[["React","react",!0],["useNavigation","@pankod/refine-core"],["useForm","@pankod/refine-react-hook-form"]],s=t.filter(i=>(i==null?void 0:i.relation)&&!(i!=null&&i.fieldable)&&(i==null?void 0:i.resource)).filter(Boolean).map(i=>{if((i==null?void 0:i.relation)&&!i.fieldable&&i.resource)return a.push(["useSelect","@pankod/refine-core"]),`
                const { options: ${U(i.key,"Options")} } =
                useSelect({
                    resource: "${i.resource.name}",
                    ${gt(i)}
                });
            `}).filter(Boolean),f=i=>{if(i.relation&&i.resource){a.push(["useSelect","@pankod/refine-core"]);let b=U(i.key,"Options");return L`
            <label>
                <span style={{ marginRight: "8px" }}>
                    ${A(i.key)}
                </span>
                <select
                    placeholder="Select ${oe(i.resource.name)}"
                    {...register("${ae(i.key,void 0,i.accessor)}", {
                        required: ${i.multiple?"false":'"This field is required"'},
                    })}
                >
                    {${b}?.map((option) => (
                        <option value={option.value} key={option.value}>
                            {option.label}
                        </option>
                    ))}
                </select>
                <span style={{ color: "red" }}>
                    {${F("(errors as any)",i.key,i.accessor,!1)}?.message as string}
                </span>
            </label>
            `}},c=i=>{if(i.type==="text"||i.type==="url"||i.type==="email"||i.type==="number"||i.type==="date"||i.type==="richtext"){if(ft(i.key)||i.multiple)return;let b=i.type==="richtext"?"textarea":"input";return L`
                <label>
                    <span style={{ marginRight: "8px" }}>
                        ${A(i.key)}
                    </span>
                    <${b}
                        ${i.type!=="date"&&i.type!=="richtext"?`type="${i.type}"`:""}
                        ${b==="textarea"?`
                            rows={5}
                            cols={33}
                            style={{ verticalAlign: "top" }}
                        `:""}
                        {...register("${ae(i.key,void 0,i.accessor)}", {
                            required: "This field is required",
                        })}

                    />
                    <span style={{ color: "red" }}>
                        {${F("(errors as any)",i.key,i.accessor,!1)}?.message as string}
                    </span>
                </label>
            `}},m=i=>{if(i.type==="boolean")return i.multiple?void 0:L`
                <label>
                    <span style={{ marginRight: "8px" }}>
                        ${A(i.key)}
                    </span>
                    <input
                        type="checkbox"
                        {...register("${ae(i.key,void 0,i.accessor)}", {
                            required: "This field is required",
                        })}
                    />
                    <span style={{ color: "red" }}>
                        {${F("errors",i.key,i.accessor,!1)}?.message as string}
                    </span>
                </label>
            `},y=t.map(i=>{switch(i==null?void 0:i.type){case"text":case"number":case"email":case"url":case"richtext":case"date":return c(i);case"boolean":return m(i);case"relation":return f(i);default:return}}),h=!!e.list;return qe(a),L`
    ${Ne(a)}
    
    export const ${n} = () => {
        ${h?`
        const { list } = useNavigation();
        `:""}
        const {
            refineCore: { onFinish, formLoading },
            register,
            handleSubmit,
            resetField,
            formState: { errors },
        } = useForm(
            ${r?`
            { 
                refineCoreProps: {
                    resource: "${e.name}",
                    action: "create",
                }
            }`:""}
        );
    
        ${s}

        return (
            <div style={{ padding: "16px" }}>
                <div style={{ display: "flex", justifyContent: ${h?'"space-between"':'"flex-start"'} }}>
                    <h1>
                        ${A(oe((d=e.label)!=null?d:e.name)+" Create")}
                    </h1>
                    ${h?L`
                            <div>
                        <button
                                onClick={() => {
                                    list("${e.name}");
                                }}
                        >
                            ${A(ge((g=e.label)!=null?g:e.name)+" List")}
                        </button>
                        </div>
                    `:""}
                </div>
                <form onSubmit={handleSubmit(onFinish)}>
                    <div style={{ display: "flex", flexDirection: "column", gap: "8px" }}>
                        ${y.join("")}
                        <div>
                            <input type="submit" value="Save" />
                        </div>
                    </div>
                </form>
            </div>
        );
    };
    `},Wr=Te({type:"create",additionalScope:[["@pankod/refine-core","RefineCore",fl],["@pankod/refine-react-hook-form","RefineReactHookForm",gl]],codeViewerComponent:Qe,loadingComponent:Ve,errorComponent:Oe,renderer:Ua});var vl=Q(be()),yl=Q(Vr());var za=({resource:e,fields:t,isCustomPage:r,id:n})=>{var g,i,b,C;let a=Ce((g=e.label)!=null?g:e.name,"edit"),o=U((i=e.label)!=null?i:e.name,"Data"),s=[["React","react",!0],["useNavigation","@pankod/refine-core"],["useForm","@pankod/refine-react-hook-form"]],c=t.filter(l=>(l==null?void 0:l.relation)&&!(l!=null&&l.fieldable)&&(l==null?void 0:l.resource)).filter(Boolean).map(l=>{if((l==null?void 0:l.relation)&&!l.fieldable&&l.resource){s.push(["useSelect","@pankod/refine-core"]);let x=F(o,l.key,l.accessor,!1);return l.multiple&&l.accessor&&(x=`${F(o,l.key)}?.map((item: any) => ${F("item",void 0,l.accessor)})`),`
                const { options: ${U(l.key,"Options")} } =
                useSelect({
                    resource: "${l.resource.name}",
                    defaultValue: ${x},
                    ${gt(l)}
                });

                React.useEffect(() => {
                    resetField("${ae(l.key,void 0,l.accessor)}");
                }, [${U(l.key,"Options")}]);
            `}}).filter(Boolean),m=l=>{if(l.relation&&l.resource){s.push(["useSelect","@pankod/refine-core"]);let x=U(l.key,"Options");return L`
            <label>
                <span style={{ marginRight: "8px" }}>${A(l.key)}</span>
                <select
                    placeholder="Select ${oe(l.resource.name)}"
                    {...register("${ae(l.key,void 0,l.accessor)}", {
                        required: ${l.multiple?"false":'"This field is required"'},
                    })}
                >
                    {${x}?.map((option) => (
                        <option value={option.value} key={option.value}>
                            {option.label}
                        </option>
                    ))}
                </select>
                <span style={{ color: "red" }}>
                    {${F("(errors as any)",l.key,l.accessor,!1)}?.message as string}
                </span>
            </label>
            `}},y=l=>{if(l.type==="text"||l.type==="url"||l.type==="email"||l.type==="number"||l.type==="date"||l.type==="richtext"){if(l.multiple){let k=ae(l.key,"${index}",l.accessor),P=F(F("(errors as any)",l.key,void 0,!1)+"?.[index]",void 0,l.accessor);return`
                    <>
                        {${F(o,l.key)}?.map((item: any, index: number) => (
                            <label key={index}>
                                <span style={{ marginRight: "8px" }}>
                                    ${A(l.key)} #{index + 1}
                                </span>
                                <input ${l.type!=="richtext"?`
                                type="${l.type!=="date"?l.type:"text"}"
                                `:""} {...register(\`${k}\`, { required: "This field is required", })} />
                                <span style={{color: "red"}}>
                                {${F(P,"message")} as string}
                                </span>
                            </label>
                        ))}
                    </>
                `}let x=l.type==="richtext"?"textarea":"input";return L`
            <label>
                <span style={{ marginRight: "8px" }}>${A(l.key)}</span>
                <${x}
                ${ft(l.key)?"disabled":""}
                ${l.type!=="date"&&l.type!=="richtext"?`type="${l.type}"`:""}
                ${x==="textarea"?`
                    rows={5}
                    cols={33}
                    style={{ verticalAlign: "top" }}
                `:""}
                {...register("${ae(l.key,void 0,l.accessor)}", {
                    required: "This field is required",
                })}
                />
                <span style={{ color: "red" }}>
                {${F("(errors as any)",l.key,l.accessor,!1)}?.message as string}
                </span>
            </label>
            `}},h=l=>{if(l.type==="boolean"){if(l.multiple){let x=ae(l.key,void 0,l.accessor),k=F("(errors as any)",l.key,void 0,!1)+"?.[index]";return`
                    <>
                        {${F(o,l.key)}?.map((item: any, index: number) => (
                            <label key={index}>
                            <span style={{ marginRight: "8px" }}>
                            ${A(l.key)} #{index + 1}
                            </span>
                            <input
                                type="checkbox"
                                {...register(\`${x}.\${index}\`, {
                                    required: "This field is required",
                                })}
                            />
                            <span style={{ color: "red" }}>
                                {${k}?.message as string}
                            </span>
                        ))}
                    </>
                `}return L`
            <label>
                <span style={{ marginRight: "8px" }}>${A(l.key)}</span>
                <input type="checkbox" {...register("${ae(l.key,void 0,l.accessor)}", {
                    required: "This field is required",
                })} />
                <span style={{ color: "red" }}>
                    {${F("errors",l.key,l.accessor,!1)}?.message as string}
                </span>
            </label>
            `}},p=t.map(l=>{switch(l==null?void 0:l.type){case"text":case"number":case"email":case"url":case"richtext":case"date":return y(l);case"boolean":return h(l);case"relation":return m(l);default:return}}),d=!!e.list;return qe(s),L`
    ${Ne(s)}
    
    export const ${a} = () => {
        ${d?`
        const { list } = useNavigation();
        `:""}
        const {
            refineCore: { onFinish, formLoading, queryResult },
            register,
            handleSubmit,
            resetField,
            formState: { errors },
        } = useForm(
            ${r?`
            { 
                refineCoreProps: {
                    resource: "${e.name}",
                    id: ${n},
                    action: "edit",
                }
            }`:""}
        );
    
        const ${o} = queryResult?.data?.data;
    
        ${c}

        return (
            <div style={{ padding: "16px" }}>
                <div style={{ display: "flex", justifyContent: ${d?'"space-between"':'"flex-start"'} }}>
                    <h1>
                        ${A(oe((b=e.label)!=null?b:e.name)+" Edit")}
                    </h1>
                    ${d?L`
                    <div>
                        <button
                                onClick={() => {
                                    list("${e.name}");
                                }}
                        >
                            ${A(ge((C=e.label)!=null?C:e.name)+" List")}
                        </button>
                    </div>
                    `:""}
                </div>
                <form onSubmit={handleSubmit(onFinish)}>
                    <div style={{ display: "flex", flexDirection: "column", gap: "8px" }}>
                        ${p.join("")}
                        <div>
                            <input type="submit" value="Save" />
                        </div>
                    </div>
                </form>
            </div>
        );
    };
    `},Qr=Te({type:"edit",additionalScope:[["@pankod/refine-core","RefineCore",vl],["@pankod/refine-react-hook-form","RefineReactHookForm",yl]],codeViewerComponent:Qe,loadingComponent:Ve,errorComponent:Oe,renderer:za});var id=({action:e,id:t,...r})=>{let{useParams:n}=(0,Ha.useRouterContext)(),{action:a,id:o}=n();switch(e!=null?e:a){case"show":return yt.default.createElement(Rr,{...r,id:t!=null?t:o});case"create":return yt.default.createElement(Wr,{...r,id:t!=null?t:o});case"edit":return yt.default.createElement(Qr,{...r,id:t!=null?t:o});default:return yt.default.createElement(Mr,{...r,id:t!=null?t:o})}};})();
//# sourceMappingURL=headless.js.map