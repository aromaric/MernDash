(()=>{var an=Object.create;var ur=Object.defineProperty;var nn=Object.getOwnPropertyDescriptor;var on=Object.getOwnPropertyNames;var sn=Object.getPrototypeOf,ln=Object.prototype.hasOwnProperty;var y=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var un=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var cn=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of on(t))!ln.call(e,n)&&n!==r&&ur(e,n,{get:()=>t[n],enumerable:!(a=nn(t,n))||a.enumerable});return e};var j=(e,t,r)=>(r=e!=null?an(sn(e)):{},cn(t||!e||!e.__esModule?ur(r,"default",{value:e,enumerable:!0}):r,e));var _e=un((fs,Bt)=>{var dn=Object.create,ot=Object.defineProperty,mn=Object.getOwnPropertyDescriptor,fn=Object.getOwnPropertyNames,pn=Object.getPrototypeOf,vn=Object.prototype.hasOwnProperty,gn=(e,t)=>{for(var r in t)ot(e,r,{get:t[r],enumerable:!0})},at=(e,t,r,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of fn(t))!vn.call(e,n)&&n!==r&&ot(e,n,{get:()=>t[n],enumerable:!(a=mn(t,n))||a.enumerable});return e},yn=(e,t,r)=>(at(e,t,"default"),r&&at(r,t,"default")),I=(e,t,r)=>(r=e!=null?dn(pn(e)):{},at(t||!e||!e.__esModule?ot(r,"default",{value:e,enumerable:!0}):r,e)),hn=e=>at(ot({},"__esModule",{value:!0}),e),Lt={};gn(Lt,{AuthPage:()=>ki,Authenticated:()=>ji,CanAccess:()=>Hi,ErrorComponent:()=>qi,LayoutWrapper:()=>zi,LoginPage:()=>ga,ReadyPage:()=>ya,Refine:()=>Bi,RouteChangeHandler:()=>ba,UndoableQueue:()=>ha,createTreeView:()=>_r,file2Base64:()=>Gn,getDefaultFilter:()=>Yn,getDefaultSortOrder:()=>Zn,getNextPageParam:()=>Gr,getPreviousPageParam:()=>Jr,handleUseParams:()=>Jn,importCSVMapper:()=>Br,parseTableParams:()=>At,parseTableParamsFromQuery:()=>_n,routeGenerator:()=>Mt,setInitialFilters:()=>qt,setInitialSorters:()=>$t,stringifyTableParams:()=>St,unionFilters:()=>ze,unionSorters:()=>It,useApiUrl:()=>ho,useAuthenticated:()=>Kr,useBreadcrumb:()=>Si,useCan:()=>pa,useCanWithoutCache:()=>ci,useCancelNotification:()=>Oe,useCheckError:()=>oe,useCreate:()=>Ot,useCreateMany:()=>ra,useCustom:()=>Po,useCustomMutation:()=>Eo,useDataProvider:()=>Z,useDelete:()=>mo,useDeleteMany:()=>yo,useExport:()=>Zo,useForgotPassword:()=>Wr,useForm:()=>Yo,useGetIdentity:()=>Rr,useGetLocale:()=>Wo,useHandleNotification:()=>re,useImport:()=>ti,useInfiniteList:()=>Io,useInvalidate:()=>$e,useIsExistAuthentication:()=>Bn,useList:()=>Tt,useLiveMode:()=>oa,useLog:()=>dt,useLogList:()=>Pi,useLogin:()=>Nt,useLogout:()=>Or,useMany:()=>Xr,useMenu:()=>Ii,useModal:()=>ri,useMutationMode:()=>We,useNavigation:()=>ue,useNotification:()=>Ce,useOne:()=>Rt,usePermissions:()=>wn,usePublish:()=>qe,useRedirectionAfterSubmission:()=>da,useRefineContext:()=>lt,useRegister:()=>Qr,useResource:()=>_,useResourceSubscription:()=>He,useResourceWithRoute:()=>ye,useRouterContext:()=>V,useSelect:()=>fi,useSetLocale:()=>Qo,useShow:()=>Jo,useSubscription:()=>Lo,useSyncWithLocation:()=>ca,useTable:()=>gi,useTitle:()=>Vo,useTranslate:()=>Q,useUpdate:()=>ta,useUpdateMany:()=>vo,useUpdatePassword:()=>Ur,useWarnAboutChange:()=>Ut,userFriendlyResourceName:()=>Ft});Bt.exports=hn(Lt);yn(Lt,y("@tanstack/react-query"),Bt.exports);var Se=I(y("react")),bn=y("react"),Tr=I(y("react")),Pn=y("@tanstack/react-query"),te=Tr.default.createContext({}),Cn=({children:e,isProvided:t,...r})=>{let{replace:a}=ue(),n=(0,Pn.useQueryClient)(),o=()=>{n.invalidateQueries(["useAuthenticated"]),n.invalidateQueries(["getUserIdentity"]),n.invalidateQueries(["usePermissions"])},i=async f=>{var v;try{let u=await((v=r.login)==null?void 0:v.call(r,f));return o(),Promise.resolve(u)}catch(u){return Promise.reject(u)}},m=async f=>{var v;try{let u=await((v=r.register)==null?void 0:v.call(r,f));return o(),Promise.resolve(u)}catch(u){return Promise.reject(u)}},l=async f=>{var v;try{let u=await((v=r.logout)==null?void 0:v.call(r,f));return o(),Promise.resolve(u)}catch(u){return Promise.reject(u)}},c=async f=>{var v;try{return await((v=r.checkAuth)==null?void 0:v.call(r,f)),Promise.resolve()}catch(u){return u!=null&&u.redirectPath&&a(u.redirectPath),Promise.reject(u)}};return Tr.default.createElement(te.Provider,{value:{...r,login:i,logout:l,checkAuth:c,register:m,isProvided:t}},e)},En=y("@tanstack/react-query"),wn=e=>{let{getPermissions:t}=(0,bn.useContext)(te);return(0,En.useQuery)(["usePermissions"],t!=null?t:()=>Promise.resolve(void 0),{enabled:!!t,...e})},xn=I(y("react")),Sn=y("@tanstack/react-query"),Rr=({queryOptions:e}={})=>{let{getUserIdentity:t}=xn.default.useContext(te);return(0,Sn.useQuery)(["getUserIdentity"],t!=null?t:()=>Promise.resolve({}),{enabled:!!t,retry:!1,...e})},In=I(y("react")),qn=y("@tanstack/react-query"),Or=({mutationOptions:e}={})=>{let{push:t}=ue(),{logout:r}=In.default.useContext(te),{open:a}=Ce();return(0,qn.useMutation)(["useLogout"],r,{onSuccess:(n,o)=>{var i;let m=(i=o==null?void 0:o.redirectPath)!=null?i:n;if(m!==!1){if(m){t(m);return}t("/login")}},onError:n=>{a==null||a({key:"useLogout-error",type:"error",message:(n==null?void 0:n.name)||"Logout Error",description:(n==null?void 0:n.message)||"Something went wrong during logout"})},...e})},$n=I(y("react")),Dn=y("@tanstack/react-query"),Ln=I(y("qs")),Nt=({mutationOptions:e}={})=>{let{replace:t}=ue(),{login:r}=$n.default.useContext(te),{useLocation:a}=V(),{search:n}=a(),{close:o,open:i}=Ce(),{to:m}=Ln.default.parse(n,{ignoreQueryPrefix:!0});return(0,Dn.useMutation)(["useLogin"],r,{onSuccess:l=>{if(m)return t(m);l!==!1&&t(typeof l=="string"?l:"/"),o==null||o("login-error")},onError:l=>{i==null||i({message:(l==null?void 0:l.name)||"Login Error",description:(l==null?void 0:l.message)||"Invalid credentials",key:"login-error",type:"error"})},...e})},Nn=I(y("react")),kn=y("@tanstack/react-query"),Qr=({mutationOptions:e}={})=>{let{replace:t}=ue(),{register:r}=Nn.default.useContext(te),{close:a,open:n}=Ce();return(0,kn.useMutation)(["useRegister"],r,{onSuccess:o=>{o!==!1&&t(o||"/"),a==null||a("register-error")},onError:o=>{n==null||n({message:(o==null?void 0:o.name)||"Register Error",description:(o==null?void 0:o.message)||"Error while registering",key:"register-error",type:"error"})},...e})},An=I(y("react")),Fn=y("@tanstack/react-query"),Wr=({mutationOptions:e}={})=>{let{replace:t}=ue(),{forgotPassword:r}=An.default.useContext(te),{close:a,open:n}=Ce();return(0,Fn.useMutation)(["useForgotPassword"],r,{onSuccess:o=>{o!==!1&&o&&t(o),a==null||a("forgot-password-error")},onError:o=>{n==null||n({message:(o==null?void 0:o.name)||"Forgot Password Error",description:(o==null?void 0:o.message)||"Error while resetting password",key:"forgot-password-error",type:"error"})},...e})},Mn=I(y("react")),Tn=y("@tanstack/react-query"),Rn=I(y("qs")),Ur=({mutationOptions:e}={})=>{let{replace:t}=ue(),{updatePassword:r}=Mn.default.useContext(te),{close:a,open:n}=Ce(),{useLocation:o}=V(),{search:i}=o(),m=Rn.default.parse(i,{ignoreQueryPrefix:!0});return(0,Tn.useMutation)(["useUpdatePassword"],async l=>r==null?void 0:r({...m,...l}),{onSuccess:l=>{l!==!1&&l&&t(l),a==null||a("update-password-error")},onError:l=>{n==null||n({message:(l==null?void 0:l.name)||"Update Password Error",description:(l==null?void 0:l.message)||"Error while updating password",key:"update-password-error",type:"error"})},...e})},On=y("react"),Qn=y("@tanstack/react-query"),Kr=e=>{let{checkAuth:t}=(0,On.useContext)(te);return(0,Qn.useQuery)(["useAuthenticated",e],async()=>{var r;return(r=await(t==null?void 0:t(e)))!=null?r:{}},{retry:!1})},Wn=I(y("react")),Un=y("@tanstack/react-query"),oe=()=>{let{checkError:e}=Wn.default.useContext(te),{mutate:t}=Or();return(0,Un.useMutation)(["useCheckError"],e,{onError:r=>{t({redirectPath:r})}})},Kn=y("react"),Bn=()=>{let{isProvided:e}=(0,Kn.useContext)(te);return e||!1},zn=y("@tanstack/react-query"),bt=e=>e/1e3,Vn=I(y("lodash/zip")),jn=I(y("lodash/fromPairs")),Br=(e,t=r=>r)=>{let[r,...a]=e;return a.map(n=>(0,jn.default)((0,Vn.default)(r,n))).map((n,o,i)=>t.call(void 0,n,o,i))},cr=I(y("pluralize")),kt=I(y("qs")),zr=I(y("lodash/unionWith")),Vr=I(y("lodash/differenceWith")),Hn=I(y("warn-once")),At=e=>{let{current:t,pageSize:r,sorter:a,filters:n}=kt.default.parse(e.substring(1));return{parsedCurrent:t&&Number(t),parsedPageSize:r&&Number(r),parsedSorter:a!=null?a:[],parsedFilters:n!=null?n:[]}},_n=e=>{let t=kt.default.stringify(e);return At(`/${t}`)},St=e=>{let t={skipNulls:!0,arrayFormat:"indices",encode:!1},{pagination:r,sorter:a,filters:n,...o}=e;return kt.default.stringify({...o,...r||{},sorter:a,filters:n},t)},jr=(e,t)=>e.operator!=="and"&&e.operator!=="or"&&t.operator!=="and"&&t.operator!=="or"?("field"in e?e.field:void 0)==("field"in t?t.field:void 0)&&e.operator==t.operator:("key"in e?e.key:void 0)==("key"in t?t.key:void 0)&&e.operator==t.operator,Hr=(e,t)=>e.field==t.field,ze=(e,t,r=[])=>(t.filter(a=>(a.operator==="or"||a.operator==="and")&&!a.key).length>1&&(0,Hn.default)(!0,`[conditionalFilters]: You have created multiple Conditional Filters at the top level, this requires the key parameter. 
For more information, see https://refine.dev/docs/advanced-tutorials/data-provider/handling-filters/#top-level-multiple-conditional-filters-usage`),(0,zr.default)(e,t,r,jr).filter(a=>a.value!==void 0&&a.value!==null&&(a.operator!=="or"||a.operator==="or"&&a.value.length!==0)&&(a.operator!=="and"||a.operator==="and"&&a.value.length!==0))),It=(e,t)=>(0,zr.default)(e,t,Hr).filter(r=>r.order!==void 0&&r.order!==null),qt=(e,t)=>[...(0,Vr.default)(t,e,jr),...e],$t=(e,t)=>[...(0,Vr.default)(t,e,Hr),...e],Zn=(e,t)=>{if(!t)return;let r=t.find(a=>a.field===e);if(r)return r.order},Yn=(e,t,r="eq")=>{let a=t==null?void 0:t.find(n=>{if(n.operator!=="or"&&n.operator!=="and"&&"field"in n){let{operator:o,field:i}=n;return i===e&&o===r}});if(a)return a.value||[]},Gn=e=>new Promise((t,r)=>{let a=new FileReader,n=()=>{a.result&&(a.removeEventListener("load",n,!1),t(a.result))};a.addEventListener("load",n,!1),a.readAsDataURL(e.originFileObj),a.onerror=o=>(a.removeEventListener("load",n,!1),r(o))}),Ft=(e="",t)=>{let r=Ve(e);return t==="singular"?cr.default.singular(r):cr.default.plural(r)},Jn=(e={})=>e!=null&&e.id?{...e,id:decodeURIComponent(e.id)}:e,ie=(e,t,r)=>{let a=t||"default",n={all:[a],resourceAll:[a,e||""],list:o=>[...n.resourceAll,"list",{...o,...r}],many:o=>[...n.resourceAll,"getMany",o&&o.map(String),{...r}].filter(i=>i!==void 0),detail:o=>[...n.resourceAll,"detail",o==null?void 0:o.toString(),{...r}],logList:o=>["logList",e,o,r].filter(i=>i!==void 0)};return n},Xn=(e,t)=>!e||!t?!1:!!e.find(r=>r===t),eo=e=>t=>e.parentName?t.name===e.parentName:!1,Mt=(e,t)=>{var r,a,n,o,i;let m,l=(a=(r=e.options)==null?void 0:r.route)!=null?a:e.name;if(e.parentName){let c=t.find(eo(e));c!=null&&c.parentName?m=`${Mt(c,t)}/${l}`:e.parentName&&(m=`${(i=(o=(n=c==null?void 0:c.options)==null?void 0:n.route)!=null?o:c==null?void 0:c.name)!=null?i:e.parentName}/${l}`)}else m=l;return m},_r=e=>{var t,r,a;let n=[],o={},i={},m,l;for(let c=0;c<e.length;c++){m=e[c];let f=(a=(r=m.route)!=null?r:(t=m.options)==null?void 0:t.route)!=null?a:"";o[f]=m,o[f].children=[],i[m.name]=m,i[m.name].children=[]}for(let c in o)o.hasOwnProperty(c)&&(l=o[c],l.parentName&&i[l.parentName]?i[l.parentName].children.push(l):n.push(l));return n},Ve=e=>(e=e.replace(/([a-z]{1})([A-Z]{1})/g,"$1-$2"),e=e.replace(/([A-Z]{1})([A-Z]{1})([a-z]{1})/g,"$1-$2$3"),e=e.toLowerCase().replace(/[_-]+/g," ").replace(/\s{2,}/g," ").trim(),e=e.charAt(0).toUpperCase()+e.slice(1),e),Zr=I(y("react")),to=I(y("react")),Yr=({children:e})=>to.default.createElement("div",null,e),ge={mutationMode:"pessimistic",syncWithLocation:!1,undoableTimeout:5e3,warnWhenUnsavedChanges:!1,liveMode:"off",redirect:{afterCreate:"list",afterClone:"list",afterEdit:"list"}},Pe=Zr.default.createContext({hasDashboard:!1,mutationMode:"pessimistic",warnWhenUnsavedChanges:!1,syncWithLocation:!1,undoableTimeout:5e3,Title:void 0,Sider:void 0,Header:void 0,Footer:void 0,Layout:Yr,OffLayoutArea:void 0,liveMode:"off",onLiveEvent:void 0,options:ge}),ro=({hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,undoableTimeout:n,children:o,DashboardPage:i,Title:m,Layout:l=Yr,Header:c,Sider:f,Footer:v,OffLayoutArea:u,LoginPage:d=ga,catchAll:p,liveMode:s="off",onLiveEvent:h,options:b})=>Zr.default.createElement(Pe.Provider,{value:{hasDashboard:e,mutationMode:t,warnWhenUnsavedChanges:r,syncWithLocation:a,Title:m,undoableTimeout:n,Layout:l,Header:c,Sider:f,Footer:v,OffLayoutArea:u,DashboardPage:i,LoginPage:d,catchAll:p,liveMode:s,onLiveEvent:h,options:b}},o),ao=({options:e,disableTelemetry:t,liveMode:r,mutationMode:a,reactQueryClientConfig:n,reactQueryDevtoolConfig:o,syncWithLocation:i,undoableTimeout:m,warnWhenUnsavedChanges:l}={})=>{var c,f,v,u,d,p,s,h,b,g,P,C,E,S,w,x,$,q,L,F,O,D,k,N;let Y={breadcrumb:e==null?void 0:e.breadcrumb,mutationMode:(f=(c=e==null?void 0:e.mutationMode)!=null?c:a)!=null?f:ge.mutationMode,undoableTimeout:(u=(v=e==null?void 0:e.undoableTimeout)!=null?v:m)!=null?u:ge.undoableTimeout,syncWithLocation:(p=(d=e==null?void 0:e.syncWithLocation)!=null?d:i)!=null?p:ge.syncWithLocation,warnWhenUnsavedChanges:(h=(s=e==null?void 0:e.warnWhenUnsavedChanges)!=null?s:l)!=null?h:ge.warnWhenUnsavedChanges,liveMode:(g=(b=e==null?void 0:e.liveMode)!=null?b:r)!=null?g:ge.liveMode,redirect:{afterCreate:(C=(P=e==null?void 0:e.redirect)==null?void 0:P.afterCreate)!=null?C:ge.redirect.afterCreate,afterClone:(S=(E=e==null?void 0:e.redirect)==null?void 0:E.afterClone)!=null?S:ge.redirect.afterClone,afterEdit:(x=(w=e==null?void 0:e.redirect)==null?void 0:w.afterEdit)!=null?x:ge.redirect.afterEdit}},ae=(q=($=e==null?void 0:e.disableTelemetry)!=null?$:t)!=null?q:!1,le={clientConfig:(O=(F=(L=e==null?void 0:e.reactQuery)==null?void 0:L.clientConfig)!=null?F:n)!=null?O:{},devtoolConfig:(N=(k=(D=e==null?void 0:e.reactQuery)==null?void 0:D.devtoolConfig)!=null?k:o)!=null?N:{}};return{optionsWithDefaults:Y,disableTelemetryWithDefault:ae,reactQueryWithDefaults:le}},no=({redirectFromProps:e,action:t,redirectOptions:r})=>{if(e||e===!1)return e;switch(t){case"clone":return r.afterClone;case"create":return r.afterCreate;case"edit":return r.afterEdit}},dr=async(e,t,r)=>{let a=[];for(let[n,o]of e.entries())try{let i=await o();a.push(t(i,n))}catch(i){a.push(r(i,n))}return a},A=(e,t,r)=>{var a;if(t)return t;let n=r==null?void 0:r.find(o=>o.name===e);return(a=n==null?void 0:n.options)!=null&&a.dataProviderName?n.options.dataProviderName:"default"},it=async e=>({data:(await Promise.all(e)).map(t=>t.data)}),Gr=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.next)return r.next;let a=(t==null?void 0:t.current)||1,n=(t==null?void 0:t.pageSize)||10,o=Math.ceil((e.total||0)/n);return a<o?Number(a)+1:void 0},Jr=e=>{let{pagination:t,cursor:r}=e;if(r!=null&&r.prev)return r.prev;let a=(t==null?void 0:t.current)||1;return a===1?void 0:a-1},Tt=({resource:e,config:t,queryOptions:r,successNotification:a,errorNotification:n,metaData:o,liveMode:i,onLiveEvent:m,liveParams:l,dataProviderName:c})=>{let{resources:f}=_(),v=Z(),u=ie(e,A(e,c,f),o),{getList:d}=v(A(e,c,f)),p=Q(),{mutate:s}=oe(),h=re(),b=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return He({resource:e,types:["*"],params:{metaData:o,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...l},channel:`resources/${e}`,enabled:b,liveMode:i,onLiveEvent:m}),(0,zn.useQuery)(u.list(t),({queryKey:g,pageParam:P,signal:C})=>{let{hasPagination:E,...S}=t||{};return d({resource:e,...S,hasPagination:E,metaData:{...o,queryContext:{queryKey:g,pageParam:P,signal:C}}})},{...r,onSuccess:g=>{var P;(P=r==null?void 0:r.onSuccess)==null||P.call(r,g);let C=typeof a=="function"?a(g,{metaData:o,config:t},e):a;h(C)},onError:g=>{var P;s(g),(P=r==null?void 0:r.onError)==null||P.call(r,g);let C=typeof n=="function"?n(g,{metaData:o,config:t},e):n;h(C,{key:`${e}-useList-notification`,message:p("notifications.error",{statusCode:g.statusCode},`Error (status code: ${g.statusCode})`),description:g.message,type:"error"})}})},oo=y("@tanstack/react-query"),Rt=({resource:e,id:t,queryOptions:r,successNotification:a,errorNotification:n,metaData:o,liveMode:i,onLiveEvent:m,liveParams:l,dataProviderName:c})=>{let{resources:f}=_(),v=Z(),u=ie(e,A(e,c,f),o),{getOne:d}=v(A(e,c,f)),p=Q(),{mutate:s}=oe(),h=re();return He({resource:e,types:["*"],channel:`resources/${e}`,params:{ids:t?[t]:[],id:t,metaData:o,subscriptionType:"useOne",...l},enabled:r==null?void 0:r.enabled,liveMode:i,onLiveEvent:m}),(0,oo.useQuery)(u.detail(t),({queryKey:b,pageParam:g,signal:P})=>d({resource:e,id:t,metaData:{...o,queryContext:{queryKey:b,pageParam:g,signal:P}}}),{...r,onSuccess:b=>{var g;(g=r==null?void 0:r.onSuccess)==null||g.call(r,b);let P=typeof a=="function"?a(b,{id:t,metaData:o},e):a;h(P)},onError:b=>{var g;s(b),(g=r==null?void 0:r.onError)==null||g.call(r,b);let P=typeof n=="function"?n(b,{id:t,metaData:o},e):n;h(P,{key:`${t}-${e}-getOne-notification`,message:p("notifications.error",{statusCode:b.statusCode},`Error (status code: ${b.statusCode})`),description:b.message,type:"error"})}})},io=y("@tanstack/react-query"),Xr=({resource:e,ids:t,queryOptions:r,successNotification:a,errorNotification:n,metaData:o,liveMode:i,onLiveEvent:m,liveParams:l,dataProviderName:c})=>{let{resources:f}=_(),v=Z(),u=ie(e,A(e,c,f),o),{getMany:d,getOne:p}=v(A(e,c,f)),s=Q(),{mutate:h}=oe(),b=re(),g=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return He({resource:e,types:["*"],params:{ids:t!=null?t:[],metaData:o,subscriptionType:"useMany",...l},channel:`resources/${e}`,enabled:g,liveMode:i,onLiveEvent:m}),(0,io.useQuery)(u.many(t),({queryKey:P,pageParam:C,signal:E})=>d?d({resource:e,ids:t,metaData:{...o,queryContext:{queryKey:P,pageParam:C,signal:E}}}):it(t.map(S=>p({resource:e,id:S,metaData:{...o,queryContext:{queryKey:P,pageParam:C,signal:E}}}))),{...r,onSuccess:P=>{var C;(C=r==null?void 0:r.onSuccess)==null||C.call(r,P);let E=typeof a=="function"?a(P,t,e):a;b(E)},onError:P=>{var C;h(P),(C=r==null?void 0:r.onError)==null||C.call(r,P);let E=typeof n=="function"?n(P,t,e):n;b(E,{key:`${t[0]}-${e}-getMany-notification`,message:s("notifications.error",{statusCode:P.statusCode},`Error (status code: ${P.statusCode})`),description:P.message,type:"error"})}})},mr=y("@tanstack/react-query"),rt=I(y("react")),Pt=I(y("lodash/isEqual")),ea=rt.default.createContext({notifications:[],notificationDispatch:()=>!1}),so=[],lo=(e,t)=>{switch(t.type){case"ADD":return[...e.filter(r=>!((0,Pt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource)),{...t.payload,isRunning:!0}];case"REMOVE":return e.filter(r=>!((0,Pt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource));case"DECREASE_NOTIFICATION_SECOND":return e.map(r=>(0,Pt.default)(r.id,t.payload.id)&&r.resource==t.payload.resource?{...r,seconds:t.payload.seconds-1e3}:r);default:return e}},uo=({children:e})=>{let[t,r]=(0,rt.useReducer)(lo,so),a={notifications:t,notificationDispatch:r};return rt.default.createElement(ea.Provider,{value:a},e,typeof window<"u"&&t.map(n=>rt.default.createElement(ha,{key:`${n.id}-${n.resource}-queue`,notification:n})))},fr=I(y("pluralize")),ta=({mutationOptions:e}={})=>{let{resources:t}=_(),r=(0,mr.useQueryClient)(),a=Z(),{mutationMode:n,undoableTimeout:o}=We(),i=Q(),{mutate:m}=oe(),l=qe(),{log:c}=dt(),{notificationDispatch:f}=Oe(),v=re(),u=$e();return(0,mr.useMutation)(({id:d,values:p,resource:s,mutationMode:h,undoableTimeout:b,onCancel:g,metaData:P,dataProviderName:C})=>{let E=h!=null?h:n,S=b!=null?b:o;return E!=="undoable"?a(A(s,C,t)).update({resource:s,id:d,variables:p,metaData:P}):new Promise((w,x)=>{let $=()=>{a(A(s,C,t)).update({resource:s,id:d,variables:p,metaData:P}).then(L=>w(L)).catch(L=>x(L))},q=()=>{x({message:"mutationCancelled"})};g&&g(q),f({type:"ADD",payload:{id:d,resource:s,cancelMutation:q,doMutation:$,seconds:S,isSilent:!!g}})})},{onMutate:async({resource:d,id:p,mutationMode:s,values:h,dataProviderName:b})=>{let g=ie(d,A(d,b,t)),P=r.getQueriesData(g.resourceAll),C=s!=null?s:n;return await r.cancelQueries(g.resourceAll,void 0,{silent:!0}),C!=="pessimistic"&&(r.setQueriesData(g.list(),E=>{if(!E)return null;let S=E.data.map(w=>{var x;return((x=w.id)==null?void 0:x.toString())===(p==null?void 0:p.toString())?{id:p,...h}:w});return{...E,data:S}}),r.setQueriesData(g.many(),E=>{if(!E)return null;let S=E.data.map(w=>{var x;return((x=w.id)==null?void 0:x.toString())===(p==null?void 0:p.toString())&&(w={id:p,...h}),w});return{...E,data:S}}),r.setQueriesData(g.detail(p),E=>E?{...E,data:{...E.data,...h}}:null)),{previousQueries:P,queryKey:g}},onSettled:(d,p,{id:s,resource:h,dataProviderName:b,invalidates:g=["list","many","detail"]})=>{u({resource:h,dataProviderName:A(h,b,t),invalidates:g,id:s}),f({type:"REMOVE",payload:{id:s,resource:h}})},onSuccess:(d,{id:p,resource:s,successNotification:h,dataProviderName:b,values:g,metaData:P},C)=>{var E;let S=fr.default.singular(s),w=typeof h=="function"?h(d,{id:p,values:g},s):h;v(w,{key:`${p}-${s}-notification`,description:i("notifications.success","Successful"),message:i("notifications.editSuccess",{resource:i(`${s}.${s}`,S)},`Successfully updated ${S}`),type:"success"}),l==null||l({channel:`resources/${s}`,type:"updated",payload:{ids:(E=d.data)!=null&&E.id?[d.data.id]:void 0},date:new Date});let x;if(C){let O=r.getQueryData(C.queryKey.detail(p));x=Object.keys(g).reduce((D,k)=>{var N;return D[k]=(N=O==null?void 0:O.data)==null?void 0:N[k],D},{})}let{fields:$,operation:q,variables:L,...F}=P||{};c==null||c.mutate({action:"update",resource:s,data:g,previousData:x,meta:{id:p,dataProviderName:A(s,b,t),...F}})},onError:(d,{id:p,resource:s,errorNotification:h,values:b},g)=>{if(g)for(let P of g.previousQueries)r.setQueryData(P[0],P[1]);if(d.message!=="mutationCancelled"){m==null||m(d);let P=fr.default.singular(s),C=typeof h=="function"?h(d,{id:p,values:b},s):h;v(C,{key:`${p}-${s}-notification`,message:i("notifications.editError",{resource:i(`${s}.${s}`,P),statusCode:d.statusCode},`Error when updating ${P} (status code: ${d.statusCode})`),description:d.message,type:"error"})}},...e})},co=y("@tanstack/react-query"),pr=I(y("pluralize")),Ot=({mutationOptions:e}={})=>{let{mutate:t}=oe(),r=Z(),a=$e(),{resources:n}=_(),o=Q(),i=qe(),{log:m}=dt(),l=re();return(0,co.useMutation)(({resource:c,values:f,metaData:v,dataProviderName:u})=>r(A(c,u,n)).create({resource:c,variables:f,metaData:v}),{onSuccess:(c,{resource:f,successNotification:v,dataProviderName:u,invalidates:d=["list","many"],values:p,metaData:s})=>{var h,b,g;let P=pr.default.singular(f),C=typeof v=="function"?v(c,p,f):v;l(C,{key:`create-${f}-notification`,message:o("notifications.createSuccess",{resource:o(`${f}.${f}`,P)},`Successfully created ${P}`),description:o("notifications.success","Success"),type:"success"}),a({resource:f,dataProviderName:A(f,u,n),invalidates:d}),i==null||i({channel:`resources/${f}`,type:"created",payload:{ids:(h=c==null?void 0:c.data)!=null&&h.id?[c.data.id]:void 0},date:new Date});let{fields:E,operation:S,variables:w,...x}=s||{};m==null||m.mutate({action:"create",resource:f,data:p,meta:{dataProviderName:A(f,u,n),id:(g=(b=c==null?void 0:c.data)==null?void 0:b.id)!=null?g:void 0,...x}})},onError:(c,{resource:f,errorNotification:v,values:u})=>{t(c);let d=pr.default.singular(f),p=typeof v=="function"?v(c,u,f):v;l(p,{key:`create-${f}-notification`,description:c.message,message:o("notifications.createError",{resource:o(`${f}.${f}`,d),statusCode:c.statusCode},`There was an error creating ${d} (status code: ${c.statusCode})`),type:"error"})},...e})},vr=y("@tanstack/react-query"),gr=I(y("pluralize")),mo=({mutationOptions:e}={})=>{let{mutate:t}=oe(),r=Z(),{resources:a}=_(),n=(0,vr.useQueryClient)(),{mutationMode:o,undoableTimeout:i}=We(),{notificationDispatch:m}=Oe(),l=Q(),c=qe(),{log:f}=dt(),v=re(),u=$e();return(0,vr.useMutation)(({id:d,mutationMode:p,undoableTimeout:s,resource:h,onCancel:b,metaData:g,dataProviderName:P,values:C})=>{let E=p!=null?p:o,S=s!=null?s:i;return E!=="undoable"?r(A(h,P,a)).deleteOne({resource:h,id:d,metaData:g,variables:C}):new Promise((w,x)=>{let $=()=>{r(A(h,P,a)).deleteOne({resource:h,id:d,metaData:g,variables:C}).then(L=>w(L)).catch(L=>x(L))},q=()=>{x({message:"mutationCancelled"})};b&&b(q),m({type:"ADD",payload:{id:d,resource:h,cancelMutation:q,doMutation:$,seconds:S,isSilent:!!b}})})},{onMutate:async({id:d,resource:p,mutationMode:s,dataProviderName:h})=>{let b=ie(p,A(p,h,a)),g=s!=null?s:o;await n.cancelQueries(b.resourceAll,void 0,{silent:!0});let P=n.getQueriesData(b.resourceAll);return g!=="pessimistic"&&(n.setQueriesData(b.list(),C=>C?{data:C.data.filter(E=>{var S;return((S=E.id)==null?void 0:S.toString())!==d.toString()}),total:C.total-1}:null),n.setQueriesData(b.many(),C=>{if(!C)return null;let E=C.data.filter(S=>{var w;return((w=S.id)==null?void 0:w.toString())!==(d==null?void 0:d.toString())});return{...C,data:E}})),{previousQueries:P,queryKey:b}},onSettled:(d,p,{id:s,resource:h,dataProviderName:b,invalidates:g=["list","many"]})=>{u({resource:h,dataProviderName:A(h,b,a),invalidates:g}),m({type:"REMOVE",payload:{id:s,resource:h}})},onSuccess:(d,{id:p,resource:s,successNotification:h,dataProviderName:b,metaData:g},P)=>{let C=gr.default.singular(s!=null?s:"");n.removeQueries(P==null?void 0:P.queryKey.detail(p));let E=typeof h=="function"?h(d,p,s):h;v(E,{key:`${p}-${s}-notification`,description:l("notifications.success","Success"),message:l("notifications.deleteSuccess",{resource:l(`${s}.${s}`,C)},`Successfully deleted a ${C}`),type:"success"}),c==null||c({channel:`resources/${s}`,type:"deleted",payload:{ids:p?[p]:[]},date:new Date});let{fields:S,operation:w,variables:x,...$}=g||{};f==null||f.mutate({action:"delete",resource:s,meta:{id:p,dataProviderName:A(s,b,a),...$}}),n.removeQueries(P==null?void 0:P.queryKey.detail(p))},onError:(d,{id:p,resource:s,errorNotification:h},b)=>{if(b)for(let g of b.previousQueries)n.setQueryData(g[0],g[1]);if(d.message!=="mutationCancelled"){t(d);let g=gr.default.singular(s!=null?s:""),P=typeof h=="function"?h(d,p,s):h;v(P,{key:`${p}-${s}-notification`,message:l("notifications.deleteError",{resource:g,statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}},...e})},fo=y("@tanstack/react-query"),po=I(y("pluralize")),ra=({mutationOptions:e}={})=>{let t=Z(),{resources:r}=_(),a=Q(),n=qe(),o=re(),i=$e();return(0,fo.useMutation)(({resource:m,values:l,metaData:c,dataProviderName:f})=>{let v=t(A(m,f,r));return v.createMany?v.createMany({resource:m,variables:l,metaData:c}):it(l.map(u=>v.create({resource:m,variables:u,metaData:c})))},{onSuccess:(m,{resource:l,successNotification:c,dataProviderName:f,invalidates:v=["list","many"],values:u})=>{let d=po.default.plural(l),p=typeof c=="function"?c(m,u,l):c;o(p,{key:`createMany-${l}-notification`,message:a("notifications.createSuccess",{resource:a(`${l}.${l}`,l)},`Successfully created ${d}`),description:a("notifications.success","Success"),type:"success"}),i({resource:l,dataProviderName:A(l,f,r),invalidates:v});let s=m==null?void 0:m.data.filter(h=>(h==null?void 0:h.id)!==void 0).map(h=>h.id);n==null||n({channel:`resources/${l}`,type:"created",payload:{ids:s},date:new Date})},onError:(m,{resource:l,errorNotification:c,values:f})=>{let v=typeof c=="function"?c(m,f,l):c;o(v,{key:`createMany-${l}-notification`,description:m.message,message:a("notifications.createError",{resource:a(`${l}.${l}`,l),statusCode:m.statusCode},`There was an error creating ${l} (status code: ${m.statusCode}`),type:"error"})},...e})},yr=y("@tanstack/react-query"),hr=I(y("pluralize")),vo=({mutationOptions:e}={})=>{let{resources:t}=_(),r=(0,yr.useQueryClient)(),a=Z(),n=Q(),{mutationMode:o,undoableTimeout:i}=We(),{mutate:m}=oe(),{notificationDispatch:l}=Oe(),c=qe(),f=re(),v=$e();return(0,yr.useMutation)(({ids:u,values:d,resource:p,onCancel:s,mutationMode:h,undoableTimeout:b,metaData:g,dataProviderName:P})=>{let C=h!=null?h:o,E=b!=null?b:i,S=a(A(p,P,t)),w=()=>S.updateMany?S.updateMany({resource:p,ids:u,variables:d,metaData:g}):it(u.map(x=>S.update({resource:p,id:x,variables:d,metaData:g})));return C!=="undoable"?w():new Promise((x,$)=>{let q=()=>{w().then(F=>x(F)).catch(F=>$(F))},L=()=>{$({message:"mutationCancelled"})};s&&s(L),l({type:"ADD",payload:{id:u,resource:p,cancelMutation:L,doMutation:q,seconds:E,isSilent:!!s}})})},{onMutate:async({resource:u,ids:d,values:p,mutationMode:s,dataProviderName:h,metaData:b})=>{let g=ie(u,A(u,h,t),b),P=s!=null?s:o;await r.cancelQueries(g.resourceAll,void 0,{silent:!0});let C=r.getQueriesData(g.resourceAll);if(P!=="pessimistic"){r.setQueriesData(g.list(),E=>{if(!E)return null;let S=E.data.map(w=>w.id!==void 0&&d.filter(x=>x!==void 0).map(String).includes(w.id.toString())?{...w,...p}:w);return{...E,data:S}}),r.setQueriesData(g.many(),E=>{if(!E)return null;let S=E.data.map(w=>w.id!==void 0&&d.filter(x=>x!==void 0).map(String).includes(w.id.toString())?{...w,...p}:w);return{...E,data:S}});for(let E of d)r.setQueriesData(g.detail(E),S=>{if(!S)return null;let w={...S.data,...p};return{...S,data:w}})}return{previousQueries:C,queryKey:g}},onSettled:(u,d,{ids:p,resource:s,dataProviderName:h})=>{v({resource:s,invalidates:["list","many"],dataProviderName:A(s,h,t)}),p.forEach(b=>v({resource:s,invalidates:["detail"],dataProviderName:A(s,h,t),id:b})),l({type:"REMOVE",payload:{id:p,resource:s}})},onSuccess:(u,{ids:d,resource:p,successNotification:s,values:h})=>{let b=hr.default.singular(p),g=typeof s=="function"?s(u,{ids:d,values:h},p):s;f(g,{key:`${d}-${p}-notification`,description:n("notifications.success","Successful"),message:n("notifications.editSuccess",{resource:n(`${p}.${p}`,p)},`Successfully updated ${b}`),type:"success"}),c==null||c({channel:`resources/${p}`,type:"updated",payload:{ids:d.map(String)},date:new Date})},onError:(u,{ids:d,resource:p,errorNotification:s,values:h},b)=>{if(b)for(let g of b.previousQueries)r.setQueryData(g[0],g[1]);if(u.message!=="mutationCancelled"){m==null||m(u);let g=hr.default.singular(p),P=typeof s=="function"?s(u,{ids:d,values:h},p):s;f(P,{key:`${d}-${p}-updateMany-error-notification`,message:n("notifications.editError",{resource:g,statusCode:u.statusCode},`Error when updating ${g} (status code: ${u.statusCode})`),description:u.message,type:"error"})}},...e})},br=y("@tanstack/react-query"),go=I(y("pluralize")),yo=({mutationOptions:e}={})=>{let{mutate:t}=oe(),{mutationMode:r,undoableTimeout:a}=We(),n=Z(),{notificationDispatch:o}=Oe(),i=Q(),m=qe(),l=re(),c=$e(),{resources:f}=_(),v=(0,br.useQueryClient)();return(0,br.useMutation)(({resource:u,ids:d,mutationMode:p,undoableTimeout:s,onCancel:h,metaData:b,dataProviderName:g,values:P})=>{let C=p!=null?p:r,E=s!=null?s:a,S=n(A(u,g,f)),w=()=>S.deleteMany?S.deleteMany({resource:u,ids:d,metaData:b,variables:P}):it(d.map(x=>S.deleteOne({resource:u,id:x,metaData:b,variables:P})));return C!=="undoable"?w():new Promise((x,$)=>{let q=()=>{w().then(F=>x(F)).catch(F=>$(F))},L=()=>{$({message:"mutationCancelled"})};h&&h(L),o({type:"ADD",payload:{id:d,resource:u,cancelMutation:L,doMutation:q,seconds:E,isSilent:!!h}})})},{onMutate:async({ids:u,resource:d,mutationMode:p,dataProviderName:s})=>{let h=ie(d,A(d,s,f)),b=p!=null?p:r;await v.cancelQueries(h.resourceAll,void 0,{silent:!0});let g=v.getQueriesData(h.resourceAll);if(b!=="pessimistic"){v.setQueriesData(h.list(),P=>P?{data:P.data.filter(C=>C.id&&!u.map(String).includes(C.id.toString())),total:P.total-1}:null),v.setQueriesData(h.many(),P=>{if(!P)return null;let C=P.data.filter(E=>E.id?!u.map(String).includes(E.id.toString()):!1);return{...P,data:C}});for(let P of u)v.setQueriesData(h.detail(P),C=>!C||C.data.id==P?null:{...C})}return{previousQueries:g,queryKey:h}},onSettled:(u,d,{resource:p,ids:s,dataProviderName:h,invalidates:b=["list","many"]})=>{c({resource:p,dataProviderName:A(p,h,f),invalidates:b}),o({type:"REMOVE",payload:{id:s,resource:p}})},onSuccess:(u,{ids:d,resource:p,successNotification:s},h)=>{d.forEach(g=>v.removeQueries(h==null?void 0:h.queryKey.detail(g)));let b=typeof s=="function"?s(u,d,p):s;l(b,{key:`${d}-${p}-notification`,description:i("notifications.success","Success"),message:i("notifications.deleteSuccess",{resource:i(`${p}.${p}`,p)},`Successfully deleted ${p}`),type:"success"}),m==null||m({channel:`resources/${p}`,type:"deleted",payload:{ids:d},date:new Date}),d.forEach(g=>v.removeQueries(h==null?void 0:h.queryKey.detail(g)))},onError:(u,{ids:d,resource:p,errorNotification:s},h)=>{if(h)for(let b of h.previousQueries)v.setQueryData(b[0],b[1]);if(u.message!=="mutationCancelled"){t(u);let b=go.default.singular(p),g=typeof s=="function"?s(u,d,p):s;l(g,{key:`${d}-${p}-notification`,message:i("notifications.deleteError",{resource:b,statusCode:u.statusCode},`Error (status code: ${u.statusCode})`),description:u.message,type:"error"})}},...e})},ho=e=>{let t=Z(),{getApiUrl:r}=t(e);return r()},bo=y("@tanstack/react-query"),Po=({url:e,method:t,config:r,queryOptions:a,successNotification:n,errorNotification:o,metaData:i,dataProviderName:m})=>{let l=Z(),{custom:c}=l(m),{mutate:f}=oe(),v=Q(),u=re();if(c)return(0,bo.useQuery)([m,"custom",t,e,{...r,...i}],({queryKey:d,pageParam:p,signal:s})=>c({url:e,method:t,...r,metaData:{...i,queryContext:{queryKey:d,pageParam:p,signal:s}}}),{...a,onSuccess:d=>{var p;(p=a==null?void 0:a.onSuccess)==null||p.call(a,d);let s=typeof n=="function"?n(d,{...r,...i}):n;u(s)},onError:d=>{var p;f(d),(p=a==null?void 0:a.onError)==null||p.call(a,d);let s=typeof o=="function"?o(d,{...r,...i}):o;u(s,{key:`${t}-notification`,message:v("notifications.error",{statusCode:d.statusCode},`Error (status code: ${d.statusCode})`),description:d.message,type:"error"})}});throw Error("Not implemented custom on data provider.")},Co=y("@tanstack/react-query"),Eo=({mutationOptions:e}={})=>{let{mutate:t}=oe(),r=re(),a=Z(),n=Q();return(0,Co.useMutation)(({url:o,method:i,values:m,metaData:l,dataProviderName:c,config:f})=>{let{custom:v}=a(c);if(v)return v({url:o,method:i,payload:m,metaData:l,headers:{...f==null?void 0:f.headers}});throw Error("Not implemented custom on data provider.")},{onSuccess:(o,{successNotification:i,config:m,metaData:l})=>{let c=typeof i=="function"?i(o,{...m,...l}):i;r(c)},onError:(o,{errorNotification:i,method:m,config:l,metaData:c})=>{t(o);let f=typeof i=="function"?i(o,{...l,...c}):i;r(f,{key:`${m}-notification`,message:n("notifications.error",{statusCode:o.statusCode},`Error (status code: ${o.statusCode})`),description:o.message,type:"error"})},...e})},Pr=y("react"),aa=I(y("react")),wo=()=>({default:{create:()=>Promise.resolve({data:{id:1}}),createMany:()=>Promise.resolve({data:[]}),deleteOne:()=>Promise.resolve({data:{id:1}}),deleteMany:()=>Promise.resolve({data:[]}),getList:()=>Promise.resolve({data:[],total:0}),getMany:()=>Promise.resolve({data:[]}),getOne:()=>Promise.resolve({data:{id:1}}),update:()=>Promise.resolve({data:{id:1}}),updateMany:()=>Promise.resolve({data:[]}),custom:()=>Promise.resolve({data:{}}),getApiUrl:()=>""}}),Qt=aa.default.createContext(wo()),xo=({children:e,...t})=>{let r;return!t.getList||!t.getOne?r=t:r={default:t},aa.default.createElement(Qt.Provider,{value:r},e)},Z=()=>{let e=(0,Pr.useContext)(Qt);return(0,Pr.useCallback)(t=>{if(t){if(!e[t])throw new Error(`"${t}" Data provider not found`);return e[t]}if(e.default)return e.default;throw new Error('There is no "default" data provider. Please pass dataProviderName.')},[e])},So=y("@tanstack/react-query"),Io=({resource:e,config:t,queryOptions:r,successNotification:a,errorNotification:n,metaData:o,liveMode:i,onLiveEvent:m,liveParams:l,dataProviderName:c})=>{let{resources:f}=_(),v=Z(),u=ie(e,A(e,c,f),o),{getList:d}=v(A(e,c,f)),p=Q(),{mutate:s}=oe(),h=re(),b=(r==null?void 0:r.enabled)===void 0||(r==null?void 0:r.enabled)===!0;return He({resource:e,types:["*"],params:{metaData:o,pagination:t==null?void 0:t.pagination,hasPagination:t==null?void 0:t.hasPagination,sort:t==null?void 0:t.sort,filters:t==null?void 0:t.filters,subscriptionType:"useList",...l},channel:`resources/${e}`,enabled:b,liveMode:i,onLiveEvent:m}),(0,So.useInfiniteQuery)(u.list(t),({queryKey:g,pageParam:P,signal:C})=>{let{hasPagination:E,...S}=t||{},w={...t==null?void 0:t.pagination,current:P};return d({resource:e,...S,pagination:w,hasPagination:E,metaData:{...o,queryContext:{queryKey:g,pageParam:P,signal:C}}}).then(({data:x,total:$,...q})=>({data:x,total:$,pagination:w,...q}))},{getNextPageParam:g=>Gr(g),getPreviousPageParam:g=>Jr(g),...r,onSuccess:g=>{var P;(P=r==null?void 0:r.onSuccess)==null||P.call(r,g);let C=typeof a=="function"?a(g,{metaData:o,config:t},e):a;h(C)},onError:g=>{var P;s(g),(P=r==null?void 0:r.onError)==null||P.call(r,g);let C=typeof n=="function"?n(g,{metaData:o,config:t},e):n;h(C,{key:`${e}-useInfiniteList-notification`,message:p("notifications.error",{statusCode:g.statusCode},`Error (status code: ${g.statusCode})`),description:g.message,type:"error"})}})},Ct=y("react"),qo=y("@tanstack/react-query"),na=I(y("react")),je=na.default.createContext(void 0),$o=({liveProvider:e,children:t})=>na.default.createElement(je.Provider,{value:e},t),He=({resource:e,params:t,channel:r,types:a,enabled:n=!0,liveMode:o,onLiveEvent:i})=>{let m=(0,qo.useQueryClient)(),l=ie(e),c=(0,Ct.useContext)(je),{liveMode:f,onLiveEvent:v}=(0,Ct.useContext)(Pe),u=o!=null?o:f;(0,Ct.useEffect)(()=>{let d;return u&&u!=="off"&&n&&(d=c==null?void 0:c.subscribe({channel:r,params:{resource:e,...t},types:a,callback:p=>{u==="auto"&&m.invalidateQueries(l.resourceAll),i==null||i(p),v==null||v(p)}})),()=>{d&&(c==null||c.unsubscribe(d))}},[n])},Do=y("react"),oa=e=>{let{liveMode:t}=(0,Do.useContext)(Pe);return e!=null?e:t},Cr=y("react"),Lo=({params:e,channel:t,types:r=["*"],enabled:a=!0,onLiveEvent:n})=>{let o=(0,Cr.useContext)(je);(0,Cr.useEffect)(()=>{let i;return a&&(i=o==null?void 0:o.subscribe({channel:t,params:e,types:r,callback:n})),()=>{i&&(o==null||o.unsubscribe(i))}},[a])},No=y("react"),qe=()=>{let e=(0,No.useContext)(je);return e==null?void 0:e.publish},ko=y("react"),ia=I(y("react")),st=ia.default.createContext({resources:[]}),Ao=({resources:e,children:t})=>ia.default.createElement(st.Provider,{value:{resources:e}},t),_=({resourceName:e,resourceNameOrRouteName:t,recordItemId:r}={})=>{let{resources:a}=(0,ko.useContext)(st),n=ye(),{useParams:o}=V(),i=o(),m=n(t!=null?t:i.resource),l=e!=null?e:m.name,c=r!=null?r:i.id;return{resources:a,resource:m,resourceName:l,id:c,action:i.action}},Er=y("react"),ye=()=>{let{resources:e}=(0,Er.useContext)(st);return(0,Er.useCallback)(t=>{let r=e.find(a=>a.route===t);if(!r){let a=e.find(n=>n.name===t);return a!=null?a:{name:t,route:t}}return r},[e])},Fo=y("react"),Oe=()=>{let{notifications:e,notificationDispatch:t}=(0,Fo.useContext)(ea);return{notifications:e,notificationDispatch:t}},Mo=y("react"),sa=I(y("react")),Wt=(0,sa.createContext)({}),To=({open:e,close:t,children:r})=>sa.default.createElement(Wt.Provider,{value:{open:e,close:t}},r),Ce=()=>{let{open:e,close:t}=(0,Mo.useContext)(Wt);return{open:e,close:t}},Ro=y("react"),re=()=>{let{open:e}=Ce();return(0,Ro.useCallback)((t,r)=>{t!==!1&&(t?e==null||e(t):r&&(e==null||e(r)))},[])},wr=y("react"),la=I(y("react")),Qe=la.default.createContext({}),Oo=({children:e,i18nProvider:t})=>la.default.createElement(Qe.Provider,{value:{i18nProvider:t}},e),Qo=()=>{let{i18nProvider:e}=(0,wr.useContext)(Qe);return(0,wr.useCallback)(t=>e==null?void 0:e.changeLocale(t),[])},xr=y("react"),Q=()=>{let{i18nProvider:e}=(0,xr.useContext)(Qe);return(0,xr.useMemo)(()=>{function t(r,a,n){var o,i;return(i=(o=e==null?void 0:e.translate(r,a,n))!=null?o:n)!=null?i:typeof a=="string"&&typeof n>"u"?a:r}return t},[e])},Sr=y("react"),Wo=()=>{let{i18nProvider:e}=(0,Sr.useContext)(Qe);return(0,Sr.useCallback)(()=>e==null?void 0:e.getLocale(),[])},Uo=y("react"),We=()=>{let{mutationMode:e,undoableTimeout:t}=(0,Uo.useContext)(Pe);return{mutationMode:e,undoableTimeout:t}},Ir=y("react"),Dt=I(y("react")),ua=Dt.default.createContext({}),Ko=({children:e})=>{let[t,r]=(0,Dt.useState)(!1);return Dt.default.createElement(ua.Provider,{value:{warnWhen:t,setWarnWhen:r}},e)},Ut=()=>{let{warnWhenUnsavedChanges:e}=(0,Ir.useContext)(Pe),{warnWhen:t,setWarnWhen:r}=(0,Ir.useContext)(ua);return{warnWhenUnsavedChanges:e,warnWhen:Boolean(t),setWarnWhen:r!=null?r:()=>{}}},Bo=y("react"),ca=()=>{let{syncWithLocation:e}=(0,Bo.useContext)(Pe);return{syncWithLocation:e}},zo=y("react"),Vo=()=>{let{Title:e}=(0,zo.useContext)(Pe);return e},jo=y("react"),lt=()=>{let{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:n,Title:o,hasDashboard:i,mutationMode:m,syncWithLocation:l,undoableTimeout:c,warnWhenUnsavedChanges:f,DashboardPage:v,LoginPage:u,catchAll:d,options:p}=(0,jo.useContext)(Pe);return{Footer:e,Header:t,Layout:r,OffLayoutArea:a,Sider:n,Title:o,hasDashboard:i,mutationMode:m,syncWithLocation:l,undoableTimeout:c,warnWhenUnsavedChanges:f,DashboardPage:v,LoginPage:u,catchAll:d,options:p}},Ho=y("react"),_o=y("export-to-csv-fix-source-map"),Zo=({resourceName:e,sorter:t,filters:r,maxItemCount:a,pageSize:n=20,mapData:o=f=>f,exportOptions:i,metaData:m,dataProviderName:l,onError:c}={})=>{let[f,v]=(0,Ho.useState)(!1),{resources:u}=_(),d=ye(),p=Z(),{useParams:s}=V(),{resource:h}=s(),{name:b}=d(h);e&&(b=e);let g=`${Ft(b,"plural")}-${new Date().toLocaleString()}`,{getList:P}=p(A(b,l,u));return{isLoading:f,triggerExport:async()=>{v(!0);let C=[],E=1,S=!0;for(;S;)try{let{data:w,total:x}=await P({resource:b,filters:r,sort:t,pagination:{current:E,pageSize:n},metaData:m});E++,C.push(...w),a&&C.length>=a&&(C=C.slice(0,a),S=!1),x===C.length&&(S=!1)}catch(w){v(!1),S=!1,c==null||c(w);return}new _o.ExportToCsv({filename:g,useKeysAsHeaders:!0,...i}).generateCsv(C.map(o)),v(!1)}}},qr=I(y("react")),Yo=({resource:e,action:t,id:r,onMutationSuccess:a,onMutationError:n,redirect:o,successNotification:i,errorNotification:m,metaData:l,mutationMode:c,liveMode:f,onLiveEvent:v,liveParams:u,undoableTimeout:d,dataProviderName:p,invalidates:s,queryOptions:h,createMutationOptions:b,updateMutationOptions:g}={})=>{var P;let{options:C}=lt(),{useParams:E}=V(),{resource:S,action:w,id:x}=E(),$=!e||e===S?r!=null?r:x:r,[q,L]=qr.default.useState($);qr.default.useEffect(()=>{$!==q&&L(r)},[r]);let F=e!=null?e:S,O=(P=t!=null?t:w==="show"?"create":w)!=null?P:"create",D=ye()(F),{mutationMode:k}=We(),N=c!=null?c:k,Y=O==="create",ae=O==="edit",le=O==="clone",K=no({redirectFromProps:o,action:O,redirectOptions:C.redirect}),T=q!==void 0&&(ae||le),W=Rt({resource:D.name,id:q!=null?q:"",queryOptions:{enabled:T,...h},liveMode:f,onLiveEvent:v,liveParams:u,metaData:l,dataProviderName:p}),{isFetching:de}=W,Ee=Ot({mutationOptions:b}),{mutate:we,isLoading:Ye}=Ee,me=ta({mutationOptions:g}),{mutate:Ge,isLoading:yt}=me,{setWarnWhen:Je}=Ut(),xe=da();return{...Y||le?{formLoading:de||Ye,mutationResult:Ee,onFinish:async ne=>{Je(!1);let pe=ve=>{xe({redirect:K,resource:D,id:ve})};return N!=="pessimistic"&&setTimeout(()=>{pe()}),new Promise((ve,ke)=>(N!=="pessimistic"&&ve(),we({values:ne,resource:D.name,successNotification:i,errorNotification:m,metaData:l,dataProviderName:p,invalidates:s},{onSuccess:(fe,he,M)=>{var B;a&&a(fe,ne,M);let Xe=(B=fe==null?void 0:fe.data)==null?void 0:B.id;pe(Xe),ve(fe)},onError:(fe,he,M)=>{if(n)return n(fe,ne,M);ke()}})))}}:{formLoading:de||yt,mutationResult:me,onFinish:async ne=>{Je(!1);let pe={id:q!=null?q:"",values:ne,resource:D.name,mutationMode:N,undoableTimeout:d,successNotification:i,errorNotification:m,metaData:l,dataProviderName:p,invalidates:s},ve=()=>{L($),xe({redirect:K,resource:D,id:q})};return N!=="pessimistic"&&setTimeout(()=>{ve()}),new Promise((ke,fe)=>(N!=="pessimistic"&&ke(),setTimeout(()=>{Ge(pe,{onSuccess:(he,M,B)=>{a&&a(he,ne,B),N==="pessimistic"&&ve(),ke(he)},onError:(he,M,B)=>{if(n)return n(he,ne,B);fe()}})})))}},queryResult:W,id:q,setId:L,redirect:(ne,pe)=>{xe({redirect:ne!==void 0?ne:ae?"list":"edit",resource:D,id:pe!=null?pe:q})}}},Go=y("react"),da=()=>{let{show:e,edit:t,list:r,create:a}=ue();return(0,Go.useCallback)(({redirect:n,resource:o,id:i})=>{if(n&&o.route)return o.canShow&&n==="show"&&i?e(o.route,i):o.canEdit&&n==="edit"&&i?t(o.route,i):o.canCreate&&n==="create"?a(o.route):r(o.route,"push")},[])},ue=()=>{let{useHistory:e}=V(),t=e(),r=ye(),a=(c,f="push")=>{f==="push"?t.push(c):t.replace(c)},n=c=>`/${r(c).route}/create`,o=(c,f)=>{let v=r(c),u=encodeURIComponent(f);return`/${v.route}/edit/${u}`},i=(c,f)=>{let v=r(c),u=encodeURIComponent(f);return`/${v.route}/clone/${u}`},m=(c,f)=>{let v=r(c),u=encodeURIComponent(f);return`/${v.route}/show/${u}`},l=c=>`/${r(c).route}`;return{create:(c,f="push")=>{a(n(c),f)},createUrl:n,edit:(c,f,v="push")=>{a(o(c,f),v)},editUrl:o,clone:(c,f,v="push")=>{a(i(c,f),v)},cloneUrl:i,show:(c,f,v="push")=>{a(m(c,f),v)},showUrl:m,list:(c,f="push")=>{a(l(c),f)},listUrl:l,push:(c,...f)=>{t.push(c,...f)},replace:(c,...f)=>{t.replace(c,...f)},goBack:()=>{t.goBack()}}},$r=I(y("react")),Jo=({resource:e,id:t,successNotification:r,errorNotification:a,metaData:n,liveMode:o,onLiveEvent:i,dataProviderName:m,queryOptions:l}={})=>{let{useParams:c}=V(),{resource:f,id:v}=c(),u=!e||e===f?t!=null?t:v:t,[d,p]=(0,$r.useState)(u);$r.default.useEffect(()=>{u!==d&&p(u)},[u]);let s=ye()(e!=null?e:f);return{queryResult:Rt({resource:s.name,id:d!=null?d:"",queryOptions:{enabled:d!==void 0,...l},successNotification:r,errorNotification:a,metaData:n,liveMode:o,onLiveEvent:i,dataProviderName:m}),showId:d,setShowId:p}},et=y("react"),Xo=y("papaparse"),ei=I(y("lodash/chunk")),ti=({resourceName:e,mapData:t=l=>l,paparseOptions:r,batchSize:a=Number.MAX_SAFE_INTEGER,onFinish:n,metaData:o,onProgress:i,dataProviderName:m}={})=>{let[l,c]=(0,et.useState)(0),[f,v]=(0,et.useState)(0),[u,d]=(0,et.useState)(!1),p=ye(),{useParams:s}=V(),{resource:h}=s(),{name:b}=p(e!=null?e:h),g=ra(),P=Ot(),C;a===1?C=P:C=g;let E=()=>{v(0),c(0),d(!1)},S=x=>{let $={succeeded:x.filter(q=>q.type==="success"),errored:x.filter(q=>q.type==="error")};n==null||n($),d(!1)};(0,et.useEffect)(()=>{i==null||i({totalAmount:f,processedAmount:l})},[f,l]);let w=({file:x})=>(E(),new Promise($=>{d(!0),(0,Xo.parse)(x,{complete:async({data:q})=>{let L=Br(q,t);if(v(L.length),a===1){let F=L.map(D=>async()=>({response:await P.mutateAsync({resource:b,values:D,successNotification:!1,errorNotification:!1,dataProviderName:m,metaData:o}),value:D})),O=await dr(F,({response:D,value:k})=>(c(N=>N+1),{response:[D.data],type:"success",request:[k]}),(D,k)=>({response:[D],type:"error",request:[L[k]]}));$(O)}else{let F=(0,ei.default)(L,a),O=F.map(k=>async()=>({response:await g.mutateAsync({resource:b,values:k,successNotification:!1,errorNotification:!1,dataProviderName:m,metaData:o}),value:k,currentBatchLength:k.length})),D=await dr(O,({response:k,currentBatchLength:N,value:Y})=>(c(ae=>ae+N),{response:k.data,type:"success",request:Y}),(k,N)=>({response:[k],type:"error",request:F[N]}));$(D)}},...r})}).then($=>(S($),$)));return{inputProps:{type:"file",accept:".csv",onChange:x=>{x.target.files&&x.target.files.length>0&&w({file:x.target.files[0]})}},mutationResult:C,isLoading:u,handleChange:w}},Et=y("react"),ri=({defaultVisible:e=!1}={})=>{let[t,r]=(0,Et.useState)(e),a=(0,Et.useCallback)(()=>r(!0),[t]),n=(0,Et.useCallback)(()=>r(!1),[t]);return{visible:t,show:a,close:n}},ai=y("react"),ma=I(y("react")),ni={useHistory:()=>!1,useLocation:()=>!1,useParams:()=>({}),Prompt:()=>null,Link:()=>null},Kt=ma.default.createContext(ni),oi=({children:e,useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:o,routes:i})=>ma.default.createElement(Kt.Provider,{value:{useHistory:t,useLocation:r,useParams:a,Prompt:n,Link:o,routes:i}},e),V=()=>{let{useHistory:e,useLocation:t,useParams:r,Prompt:a,Link:n,routes:o}=(0,ai.useContext)(Kt);return{useHistory:e,useLocation:t,useParams:r,Prompt:a,Link:n,routes:o}},ii=y("react"),si=y("@tanstack/react-query"),fa=I(y("react")),ut=fa.default.createContext({}),li=({can:e,children:t})=>fa.default.createElement(ut.Provider,{value:{can:e}},t),pa=({action:e,resource:t,params:r,queryOptions:a})=>{let{can:n}=(0,ii.useContext)(ut),{resource:o,...i}=r!=null?r:{},{icon:m,list:l,edit:c,create:f,show:v,children:u,...d}=o!=null?o:{},p=(0,si.useQuery)(["useCan",{action:e,resource:t,params:{...i,resource:d},enabled:a==null?void 0:a.enabled}],()=>{var s;return(s=n==null?void 0:n({action:e,resource:t,params:r}))!=null?s:Promise.resolve({can:!0})},{enabled:typeof n<"u",...a,retry:!1});return typeof n>"u"?{data:{can:!0}}:p},ui=y("react"),ci=()=>{let{can:e}=(0,ui.useContext)(ut);return{can:e}},Ae=y("react"),di=I(y("lodash/uniqBy")),mi=I(y("lodash/debounce")),tt=I(y("lodash/get")),fi=e=>{var t,r;let[a,n]=(0,Ae.useState)([]),[o,i]=(0,Ae.useState)([]),[m,l]=(0,Ae.useState)([]),{resource:c,sort:f,filters:v=[],optionLabel:u="title",optionValue:d="id",debounce:p=300,successNotification:s,errorNotification:h,defaultValueQueryOptions:b,queryOptions:g,fetchSize:P,pagination:C,hasPagination:E,liveMode:S,defaultValue:w=[],onLiveEvent:x,onSearch:$,liveParams:q,metaData:L,dataProviderName:F}=e,O=Array.isArray(w)?w:[w],D=(0,Ae.useCallback)(K=>{l(K.data.map(T=>({label:(0,tt.default)(T,u),value:(0,tt.default)(T,d)})))},[u,d]),k=b!=null?b:g,N=Xr({resource:c,ids:O,queryOptions:{...k,enabled:O.length>0&&((t=b==null?void 0:b.enabled)!=null?t:!0),onSuccess:K=>{var T;D(K),(T=k==null?void 0:k.onSuccess)==null||T.call(k,K)}},metaData:L,liveMode:"off",dataProviderName:F}),Y=(0,Ae.useCallback)(K=>{i(K.data.map(T=>({label:(0,tt.default)(T,u),value:(0,tt.default)(T,d)})))},[u,d]),ae=Tt({resource:c,config:{sort:f,filters:v.concat(a),pagination:{current:C==null?void 0:C.current,pageSize:(r=C==null?void 0:C.pageSize)!=null?r:P},hasPagination:E},queryOptions:{...g,onSuccess:K=>{var T;Y(K),(T=g==null?void 0:g.onSuccess)==null||T.call(g,K)}},successNotification:s,errorNotification:h,metaData:L,liveMode:S,liveParams:q,onLiveEvent:x,dataProviderName:F}),le=K=>{if($){n($(K));return}if(K)n([{field:u,operator:"contains",value:K}]);else{n([]);return}};return{queryResult:ae,defaultValueQueryResult:N,options:(0,Ae.useMemo)(()=>(0,di.default)([...o,...m],"value"),[o,m]),onSearch:(0,mi.default)(le,p)}},Ie=y("react"),Dr=I(y("qs")),Lr=I(y("lodash/differenceWith")),Nr=I(y("lodash/isEqual")),pi=[],vi=[];function gi({initialCurrent:e=1,initialPageSize:t=10,hasPagination:r=!0,initialSorter:a,permanentSorter:n=vi,defaultSetFilterBehavior:o="merge",initialFilter:i,permanentFilter:m=pi,syncWithLocation:l,resource:c,successNotification:f,errorNotification:v,queryOptions:u,liveMode:d,onLiveEvent:p,liveParams:s,metaData:h,dataProviderName:b}={}){var g;let{syncWithLocation:P}=ca(),C=l!=null?l:P,{useLocation:E,useParams:S}=V(),{search:w,pathname:x}=E(),$=oa(d),{parsedCurrent:q,parsedPageSize:L,parsedSorter:F,parsedFilters:O}=At(w),D=q||e,k=L||t,N=F.length?F:a,Y=O.length?O:i,{resource:ae}=S(),{replace:le}=ue(),K=ye()(c!=null?c:ae),[T,W]=(0,Ie.useState)($t(n,N!=null?N:[])),[de,Ee]=(0,Ie.useState)(qt(m,Y!=null?Y:[])),[we,Ye]=(0,Ie.useState)(D),[me,Ge]=(0,Ie.useState)(k),yt=({pagination:{current:M,pageSize:B},sorter:Xe,filters:lr})=>{let ht=Dr.default.parse(w==null?void 0:w.substring(1)),rn=St({pagination:{pageSize:B,current:M},sorter:Xe,filters:lr,...ht});return`${x}?${rn}`};(0,Ie.useEffect)(()=>{w===""&&(Ye(D),Ge(k),W($t(n,N!=null?N:[])),Ee(qt(m,Y!=null?Y:[])))},[w]);let Je=()=>{let{sorter:M,filters:B,pageSize:Xe,current:lr,...ht}=Dr.default.parse(w,{ignoreQueryPrefix:!0});return ht};(0,Ie.useEffect)(()=>{if(C){let M=Je(),B=St({...r?{pagination:{pageSize:me,current:we}}:{},sorter:(0,Lr.default)(T,n,Nr.default),filters:(0,Lr.default)(de,m,Nr.default),...M});return le(`${x}?${B}`,void 0,{shallow:!0})}},[C,we,me,T,de]);let xe=Tt({resource:K.name,config:{hasPagination:r,pagination:{current:we,pageSize:me},filters:ze(m,de),sort:It(n,T)},queryOptions:u,successNotification:f,errorNotification:v,metaData:h,liveMode:$,liveParams:s,onLiveEvent:p,dataProviderName:b}),ne=M=>{Ee(B=>ze(m,M,B))},pe=M=>{Ee(ze(m,M))},ve=M=>{Ee(B=>ze(m,M(B)))},ke=(M,B=o)=>{typeof M=="function"?ve(M):B==="replace"?pe(M):ne(M)},fe=M=>{W(()=>It(n,M))},he=(0,Ie.useMemo)(()=>{var M,B;return r?{current:we,setCurrent:Ye,pageSize:me,setPageSize:Ge,pageCount:me?Math.ceil(((B=(M=xe.data)==null?void 0:M.total)!=null?B:0)/me):1}:{current:void 0,setCurrent:void 0,pageSize:void 0,setPageSize:void 0,pageCount:void 0}},[r,we,me,(g=xe.data)==null?void 0:g.total]);return{tableQueryResult:xe,sorter:T,setSorter:fe,filters:de,setFilters:ke,...he,createLinkForSyncWithLocation:yt}}var kr=y("react"),wt=y("@tanstack/react-query"),va=I(y("react")),ct=va.default.createContext({}),yi=({create:e,get:t,update:r,children:a})=>va.default.createElement(ct.Provider,{value:{create:e,get:t,update:r}},a),dt=({logMutationOptions:e,renameMutationOptions:t}={})=>{let r=(0,wt.useQueryClient)(),a=(0,kr.useContext)(ct),{resources:n}=(0,kr.useContext)(st),{data:o,refetch:i,isLoading:m}=Rr({queryOptions:{enabled:!!a}}),l=(0,wt.useMutation)(async f=>{var v,u,d;let p=n.find(b=>b.name===f.resource),s=(u=(v=p==null?void 0:p.options)==null?void 0:v.auditLog)==null?void 0:u.permissions;if(s&&!Xn(s,f.action))return;let h;return m&&(h=await i()),await((d=a.create)==null?void 0:d.call(a,{...f,author:o!=null?o:h==null?void 0:h.data}))},e),c=(0,wt.useMutation)(async f=>{var v;return await((v=a.update)==null?void 0:v.call(a,f))},{onSuccess:f=>{if(f!=null&&f.resource){let v=ie(f==null?void 0:f.resource);r.invalidateQueries(v.logList())}},...t});return{log:l,rename:c}},hi=y("react"),bi=y("@tanstack/react-query"),Pi=({resource:e,action:t,meta:r,author:a,metaData:n,queryOptions:o})=>{let{get:i}=(0,hi.useContext)(ct),m=ie(e,void 0,n);return(0,bi.useQuery)(m.logList(r),()=>{var l;return(l=i==null?void 0:i({resource:e,action:t,author:a,meta:r,metaData:n}))!=null?l:Promise.resolve([])},{enabled:typeof i<"u",...o,retry:!1})},Ci=y("react"),Ei=y("@tanstack/react-query"),$e=()=>{let{resources:e}=_(),t=(0,Ei.useQueryClient)();return(0,Ci.useCallback)(({resource:r,dataProviderName:a,invalidates:n,id:o})=>{if(n===!1)return;let i=ie(r,A(r,a,e));n.forEach(m=>{switch(m){case"all":t.invalidateQueries(i.all);break;case"list":t.invalidateQueries(i.list());break;case"many":t.invalidateQueries(i.many());break;case"resourceAll":t.invalidateQueries(i.resourceAll);break;case"detail":t.invalidateQueries(i.detail(o||""));break;default:break}})},[])},wi=y("react"),xi=I(y("warn-once")),Si=()=>{var e;let{useParams:t}=V(),{i18nProvider:r}=(0,wi.useContext)(Qe),a=Q(),{resources:n,resource:o}=_(),{action:i}=t(),m=[];if(!(o!=null&&o.name))return{breadcrumbs:m};let l=c=>{var f;let v=n.find(u=>u.name===c);v&&(v.parentName&&l(v.parentName),m.push({label:(f=v.label)!=null?f:a(`${v.name}.${v.name}`,Ve(v.name)),href:v.list?`/${v.route}`:void 0,icon:v.icon}))};if(o.parentName&&l(o.parentName),m.push({label:(e=o.label)!=null?e:a(`${o.name}.${o.name}`,Ve(o.name)),href:o.list?`/${o.route}`:void 0,icon:o.icon}),i){let c=`actions.${i}`,f=a(c);typeof r<"u"&&f===c?((0,xi.default)(!0,`[useBreadcrumb]: Breadcrumb missing translate key for the "${i}" action. Please add "actions.${i}" key to your translation file.
For more information, see https://refine.dev/docs/core/hooks/useBreadcrumb/#i18n-support`),m.push({label:a(`buttons.${i}`,Ve(i))})):m.push({label:a(c,Ve(i))})}return{breadcrumbs:m}},Fe=I(y("react")),Ii=()=>{let{resources:e}=_(),t=Q(),{useLocation:r,useParams:a}=V(),n=r(),o=a(),{hasDashboard:i}=lt(),m=Fe.default.useMemo(()=>{let u=e.find(p=>(n==null?void 0:n.pathname)===`/${p.route}`);u||(u=e.find(p=>(o==null?void 0:o.resource)===p.route));let d;return u!=null&&u.route?d=`/${u==null?void 0:u.route}`:n.pathname==="/"?d="/":d=n==null?void 0:n.pathname,d},[e,n,o]),l=Fe.default.useMemo(()=>e.map(u=>{var d,p;let s=`/${u.route}`;return{...u,icon:u.icon,route:s,key:(d=u.key)!=null?d:s,label:(p=u.label)!=null?p:t(`${u.name}.${u.name}`,Ft(u.name,"plural"))}}),[e,i,t]),c=Fe.default.useMemo(()=>_r(l),[l]),f=Fe.default.useCallback((u,d,p=!1)=>{let s=d.find(h=>p?h.name===u:h.route===u);if(s){let h=[];return p&&s.route&&h.unshift(s.route),s.parentName&&h.unshift(...f(s.parentName,d,!0)),h}return[]},[]),v=Fe.default.useMemo(()=>f(m,l),[m,l]);return Fe.default.useMemo(()=>{let u=d=>d.reduce((p,s)=>{var h,b;return s.children.length>0&&((h=s.options)==null?void 0:h.hide)!==!0?[...p,{...s,children:u(s.children)}]:typeof s.list<"u"&&((b=s.options)==null?void 0:b.hide)!==!0?[...p,s]:p},[]);return{defaultOpenKeys:v,selectedKey:m,menuItems:u(c)}},[v,m,c])},qi=()=>{let[e,t]=(0,Se.useState)(),{push:r}=ue(),a=Q(),n=["edit","create","show"],{useParams:o}=V(),i=o(),m=ye();return(0,Se.useEffect)(()=>{if(i.resource){let l=m(i.resource);i.action&&n.includes(i.action)&&!l[i.action]&&t(a("pages.error.info",{action:i.action,resource:i.resource},`You may have forgotten to add the "${i.action}" component to "${i.resource}" resource.`))}},[i]),Se.default.createElement(Se.default.Fragment,null,Se.default.createElement("h1",null,a("pages.error.404",void 0,"Sorry, the page you visited does not exist.")),e&&Se.default.createElement("p",null,e),Se.default.createElement("button",{onClick:()=>r("/")},a("pages.error.backHome",void 0,"Back Home")))},H=I(y("react")),ga=()=>{let[e,t]=(0,H.useState)(""),[r,a]=(0,H.useState)(""),n=Q(),{mutate:o}=Nt();return H.default.createElement(H.default.Fragment,null,H.default.createElement("h1",null,n("pages.login.title","Sign in your account")),H.default.createElement("form",{onSubmit:i=>{i.preventDefault(),o({username:e,password:r})}},H.default.createElement("table",null,H.default.createElement("tbody",null,H.default.createElement("tr",null,H.default.createElement("td",null,n("pages.login.username",void 0,"username"),":"),H.default.createElement("td",null,H.default.createElement("input",{type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",autoFocus:!0,required:!0,value:e,onChange:i=>t(i.target.value)}))),H.default.createElement("tr",null,H.default.createElement("td",null,n("pages.login.password",void 0,"password"),":"),H.default.createElement("td",null,H.default.createElement("input",{type:"password",required:!0,size:20,value:r,onChange:i=>a(i.target.value)}))))),H.default.createElement("br",null),H.default.createElement("input",{type:"submit",value:"login"})))},Me=I(y("react")),R=I(y("react")),$i=({providers:e,registerLink:t,forgotPasswordLink:r,rememberMe:a,contentProps:n,wrapperProps:o,renderContent:i,formProps:m})=>{let{Link:l}=V(),[c,f]=(0,R.useState)(""),[v,u]=(0,R.useState)(""),[d,p]=(0,R.useState)(!1),s=Q(),{mutate:h}=Nt(),b=(C,E)=>C?typeof C=="string"?R.default.createElement(l,{to:C},E):C:null,g=()=>e?e.map(C=>{var E;return R.default.createElement("div",{key:C.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},R.default.createElement("button",{onClick:()=>h({providerName:C.name}),style:{display:"flex",alignItems:"center"}},C==null?void 0:C.icon,(E=C.label)!=null?E:R.default.createElement("label",null,C.label)))}):null,P=R.default.createElement("div",{...n},R.default.createElement("h1",{style:{textAlign:"center"}},s("pages.login.title","Sign in to your account")),g(),R.default.createElement("hr",null),R.default.createElement("form",{onSubmit:C=>{C.preventDefault(),h({email:c,password:v,remember:d})},...m},R.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},R.default.createElement("label",null,s("pages.login.fields.email","Email")),R.default.createElement("input",{name:"email",type:"text",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:c,onChange:C=>f(C.target.value)}),R.default.createElement("label",null,s("pages.login.fields.password","Password")),R.default.createElement("input",{type:"password",name:"password",required:!0,size:20,value:v,onChange:C=>u(C.target.value)}),a!=null?a:R.default.createElement(R.default.Fragment,null,R.default.createElement("label",null,s("pages.login.buttons.rememberMe","Remember me"),R.default.createElement("input",{name:"remember",type:"checkbox",size:20,checked:d,value:d.toString(),onChange:()=>{p(!d)}}))),R.default.createElement("br",null),r!=null?r:b("/forgot-password",s("pages.login.buttons.forgotPassword","Forgot password?")),R.default.createElement("input",{type:"submit",value:s("pages.login.signin","Sign in")}),t!=null?t:R.default.createElement("span",null,s("pages.login.buttons.noAccount","Don\u2019t have an account?")," ",b("/register",s("pages.login.register","Sign up"))))));return R.default.createElement("div",{...o},i?i(P):P)},z=I(y("react")),Di=({providers:e,loginLink:t,wrapperProps:r,contentProps:a,renderContent:n,formProps:o})=>{let{Link:i}=V(),[m,l]=(0,z.useState)(""),[c,f]=(0,z.useState)(""),v=Q(),{mutate:u,isLoading:d}=Qr(),p=(b,g)=>b?typeof b=="string"?z.default.createElement(i,{to:b},g):b:null,s=()=>e?e.map(b=>{var g;return z.default.createElement("div",{key:b.name,style:{display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"}},z.default.createElement("button",{onClick:()=>u({providerName:b.name}),style:{display:"flex",alignItems:"center"}},b==null?void 0:b.icon,(g=b.label)!=null?g:z.default.createElement("label",null,b.label)))}):null,h=z.default.createElement("div",{...a},z.default.createElement("h1",{style:{textAlign:"center"}},v("pages.register.title","Sign up for your account")),s(),z.default.createElement("hr",null),z.default.createElement("form",{onSubmit:b=>{b.preventDefault(),u({email:m,password:c})},...o},z.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},z.default.createElement("label",null,v("pages.register.fields.email","Email")),z.default.createElement("input",{name:"email",type:"email",size:20,autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:b=>l(b.target.value)}),z.default.createElement("label",null,v("pages.register.fields.password","Password")),z.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:c,onChange:b=>f(b.target.value)}),z.default.createElement("input",{type:"submit",value:v("pages.register.buttons.submit","Sign up"),disabled:d}),t!=null?t:z.default.createElement(z.default.Fragment,null,z.default.createElement("span",null,v("pages.login.buttons.haveAccount","Have an account?")," ",p("login",v("pages.login.signin","Sign in")))))));return z.default.createElement("div",{...r},n?n(h):h)},X=I(y("react")),Li=({loginLink:e,wrapperProps:t,contentProps:r,renderContent:a,formProps:n})=>{let o=Q(),{Link:i}=V(),[m,l]=(0,X.useState)(""),{mutate:c,isLoading:f}=Wr(),v=(d,p)=>d?typeof d=="string"?X.default.createElement(i,{to:d},p):d:null,u=X.default.createElement("div",{...r},X.default.createElement("h1",{style:{textAlign:"center"}},o("pages.forgotPassword.title","Forgot your password?")),X.default.createElement("hr",null),X.default.createElement("form",{onSubmit:d=>{d.preventDefault(),c({email:m})},...n},X.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},X.default.createElement("label",null,o("pages.forgotPassword.fields.email","Email")),X.default.createElement("input",{name:"email",type:"mail",autoCorrect:"off",spellCheck:!1,autoCapitalize:"off",required:!0,value:m,onChange:d=>l(d.target.value)}),X.default.createElement("input",{type:"submit",disabled:f,value:o("pages.forgotPassword.buttons.submit","Send reset instructions")}),X.default.createElement("br",null),e!=null?e:X.default.createElement("span",null,o("pages.register.buttons.haveAccount","Have an account? ")," ",v("/login",o("pages.login.signin","Sign in"))))));return X.default.createElement("div",{...t},a?a(u):u)},ee=I(y("react")),Ni=({wrapperProps:e,contentProps:t,renderContent:r,formProps:a})=>{let n=Q(),{mutate:o,isLoading:i}=Ur(),[m,l]=(0,ee.useState)(""),[c,f]=(0,ee.useState)(""),v=ee.default.createElement("div",{...t},ee.default.createElement("h1",{style:{textAlign:"center"}},n("pages.updatePassword.title","Update Password")),ee.default.createElement("hr",null),ee.default.createElement("form",{onSubmit:u=>{u.preventDefault(),o({password:m,confirmPassword:c})},...a},ee.default.createElement("div",{style:{display:"flex",flexDirection:"column",padding:25}},ee.default.createElement("label",null,n("pages.updatePassword.fields.password","New Password")),ee.default.createElement("input",{name:"password",type:"password",required:!0,size:20,value:m,onChange:u=>l(u.target.value)}),ee.default.createElement("label",null,n("pages.updatePassword.fields.confirmPassword","Confirm New Password")),ee.default.createElement("input",{name:"confirmPassword",type:"password",required:!0,size:20,value:c,onChange:u=>f(u.target.value)}),ee.default.createElement("input",{type:"submit",disabled:i,value:n("pages.updatePassword.buttons.submit","Update")}))));return ee.default.createElement("div",{...e},r?r(v):v)},ki=e=>{let{type:t}=e;return Me.default.createElement(Me.default.Fragment,null,(()=>{switch(t){case"register":return Me.default.createElement(Di,{...e});case"forgotPassword":return Me.default.createElement(Li,{...e});case"updatePassword":return Me.default.createElement(Ni,{...e});default:return Me.default.createElement($i,{...e})}})())},G=I(y("react")),ya=()=>G.default.createElement(G.default.Fragment,null,G.default.createElement("h1",null,"Welcome on board"),G.default.createElement("p",null,"Your configuration is completed."),G.default.createElement("p",null,"Now you can get started by adding your resources to the"," ",G.default.createElement("code",null,"`resources`")," property of ",G.default.createElement("code",null,"`<Refine>`")),G.default.createElement("div",{style:{display:"flex",gap:8}},G.default.createElement("a",{href:"https://refine.dev",target:"_blank",rel:"noreferrer"},G.default.createElement("button",null,"Documentation")),G.default.createElement("a",{href:"https://refine.dev/examples",target:"_blank",rel:"noreferrer"},G.default.createElement("button",null,"Examples")),G.default.createElement("a",{href:"https://discord.gg/refine",target:"_blank",rel:"noreferrer"},G.default.createElement("button",null,"Community")))),U=I(y("react")),xt=y("@tanstack/react-query"),Ai=y("@tanstack/react-query-devtools"),Fi=y("react"),be=y("react"),Mi="3.99.4",Ti=()=>{let e=(0,be.useContext)(te),t=(0,be.useContext)(ct),r=(0,be.useContext)(je),a=(0,be.useContext)(Kt),n=(0,be.useContext)(Qt),{i18nProvider:o}=(0,be.useContext)(Qe),i=(0,be.useContext)(Wt),m=(0,be.useContext)(ut),{resources:l}=_(),c=e.isProvided,f=!!t.create||!!t.get||!!t.update,v=!!(r!=null&&r.publish)||!!(r!=null&&r.subscribe)||!!(r!=null&&r.unsubscribe),u=!!a.useHistory||!!a.Link||!!a.Prompt||!!a.useLocation||!!a.useParams,d=!!n,p=!!(o!=null&&o.changeLocale)||!!(o!=null&&o.getLocale)||!!(o!=null&&o.translate),s=!!i.close||!!i.open,h=!!m.can;return{providers:{auth:c,auditLog:f,live:v,router:u,data:d,i18n:p,notification:s,accessControl:h},version:Mi,resourceCount:l.length}},Ri=e=>{let t=JSON.stringify(e||{});return typeof btoa<"u"?btoa(t):Buffer.from(t).toString("base64")},Oi=()=>{let e=Ti();return(0,Fi.useEffect)(()=>{if(typeof window>"u"&&!Image)return;let t=new Image;t.src=`https://telemetry.refine.dev/telemetry?payload=${Ri(e)}`},[]),null},Qi=y("react"),Wi=y("react"),Ui=I(y("lodash/isEqual")),Ki=e=>{let t=(0,Wi.useRef)(e);return(0,Ui.default)(t.current,e)||(t.current=e),t.current},Ar=(e,t)=>{let r=Ki(t);return(0,Qi.useMemo)(e,r)},Bi=({authProvider:e,dataProvider:t,routerProvider:r,notificationProvider:a,accessControlProvider:n,auditLogProvider:o,resources:i,DashboardPage:m,ReadyPage:l,LoginPage:c,catchAll:f,children:v,liveProvider:u,i18nProvider:d,mutationMode:p,syncWithLocation:s,warnWhenUnsavedChanges:h,undoableTimeout:b,Title:g,Layout:P,Sider:C,Header:E,Footer:S,OffLayoutArea:w,reactQueryClientConfig:x,reactQueryDevtoolConfig:$,liveMode:q,onLiveEvent:L,disableTelemetry:F,options:O})=>{let{optionsWithDefaults:D,disableTelemetryWithDefault:k,reactQueryWithDefaults:N}=ao({options:O,disableTelemetry:F,liveMode:q,mutationMode:p,reactQueryClientConfig:x,reactQueryDevtoolConfig:$,syncWithLocation:s,warnWhenUnsavedChanges:h,undoableTimeout:b}),Y=Ar(()=>{var T;return N.clientConfig instanceof xt.QueryClient?N.clientConfig:new xt.QueryClient({...N.clientConfig,defaultOptions:{...N.clientConfig.defaultOptions,queries:{refetchOnWindowFocus:!1,keepPreviousData:!0,...(T=N.clientConfig.defaultOptions)==null?void 0:T.queries}}})},[N.clientConfig]),ae=U.default.useMemo(()=>typeof a=="function"?a:()=>a!=null?a:{},[a])(),le=Ar(()=>{let T=[];return i==null||i.forEach(W=>{var de;T.push({key:W.key,name:W.name,label:(de=W.options)==null?void 0:de.label,icon:W.icon,route:Mt(W,i),canCreate:!!W.create,canEdit:!!W.edit,canShow:!!W.show,canDelete:W.canDelete,create:W.create,show:W.show,list:W.list,edit:W.edit,options:W.options,parentName:W.parentName})}),T},[i]);if(le.length===0)return l?U.default.createElement(l,null):U.default.createElement(ya,null);let{RouterComponent:K=U.default.Fragment}=r;return U.default.createElement(xt.QueryClientProvider,{client:Y},U.default.createElement(To,{...ae},U.default.createElement(Cn,{...e!=null?e:{},isProvided:Boolean(e)},U.default.createElement(xo,{...t},U.default.createElement($o,{liveProvider:u},U.default.createElement(oi,{...r},U.default.createElement(Ao,{resources:le},U.default.createElement(Oo,{i18nProvider:d},U.default.createElement(li,{...n!=null?n:{}},U.default.createElement(yi,{...o!=null?o:{}},U.default.createElement(uo,null,U.default.createElement(ro,{mutationMode:D.mutationMode,warnWhenUnsavedChanges:D.warnWhenUnsavedChanges,syncWithLocation:D.syncWithLocation,Title:g,undoableTimeout:D.undoableTimeout,catchAll:f,DashboardPage:m,LoginPage:c,Layout:P,Sider:C,Footer:S,Header:E,OffLayoutArea:w,hasDashboard:!!m,liveMode:D.liveMode,onLiveEvent:L,options:D},U.default.createElement(Ko,null,U.default.createElement(K,null,v,!k&&U.default.createElement(Oi,null),U.default.createElement(ba,null)))))))))))))),N.devtoolConfig===!1?null:U.default.createElement(Ai.ReactQueryDevtools,{initialIsOpen:!1,position:"bottom-right",...N.devtoolConfig}))},Fr=y("react"),ha=({notification:e})=>{let t=Q(),{notificationDispatch:r}=Oe(),{open:a}=Ce(),[n,o]=(0,Fr.useState)(),i=()=>{if(e.isRunning===!0&&(e.seconds===0&&e.doMutation(),e.isSilent||a==null||a({key:`${e.id}-${e.resource}-notification`,type:"progress",message:t("notifications.undoable",{seconds:bt(e.seconds)},`You have ${bt(e.seconds)} seconds to undo`),cancelMutation:e.cancelMutation,undoableTimeout:bt(e.seconds)}),e.seconds>0)){n&&clearTimeout(n);let m=setTimeout(()=>{r({type:"DECREASE_NOTIFICATION_SECOND",payload:{id:e.id,seconds:e.seconds,resource:e.resource}})},1e3);o(m)}};return(0,Fr.useEffect)(()=>{i()},[e]),null},nt=I(y("react")),zi=({children:e,Layout:t,Sider:r,Header:a,Title:n,Footer:o,OffLayoutArea:i})=>{let{Layout:m,Footer:l,Header:c,Sider:f,Title:v,OffLayoutArea:u}=lt(),d=t!=null?t:m;return nt.default.createElement(d,{Sider:r!=null?r:f,Header:a!=null?a:c,Footer:o!=null?o:l,Title:n!=null?n:v,OffLayoutArea:i!=null?i:u},e,nt.default.createElement(Vi,null))},Vi=()=>{let{Prompt:e}=V(),t=Q(),{warnWhen:r,setWarnWhen:a}=Ut(),n=o=>(o.preventDefault(),o.returnValue=t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),o.returnValue);return(0,nt.useEffect)(()=>(r&&window.addEventListener("beforeunload",n),window.removeEventListener("beforeunload",n)),[r]),nt.default.createElement(e,{when:r,message:t("warnWhenUnsavedChanges","Are you sure you want to leave? You have unsaved changes."),setWarnWhen:a})},Te=I(y("react")),ji=({children:e,fallback:t,loading:r})=>{let{isSuccess:a,isLoading:n,isError:o}=Kr(),{replace:i}=ue(),{useLocation:m}=V(),{pathname:l,search:c}=m();if(n)return Te.default.createElement(Te.default.Fragment,null,r)||null;if(o){if(!t){let f=`${l}${c}`;return l.includes("/login")||i(`/login?to=${encodeURIComponent(f)}`),null}return Te.default.createElement(Te.default.Fragment,null,t)}return a?Te.default.createElement(Te.default.Fragment,null,e):null},Mr=y("react"),ba=()=>{let{useLocation:e}=V(),{checkAuth:t}=(0,Mr.useContext)(te),r=e();return(0,Mr.useEffect)(()=>{t==null||t().catch(()=>!1)},[r==null?void 0:r.pathname]),null},Re=I(y("react")),Hi=({resource:e,action:t,params:r,fallback:a,children:n,...o})=>{let{data:i}=pa({resource:e,action:t,params:r});return i!=null&&i.can?Re.default.isValidElement(n)?Re.default.cloneElement(n,o):Re.default.createElement(Re.default.Fragment,null,n):(i==null?void 0:i.can)===!1?Re.default.createElement(Re.default.Fragment,null,a!=null?a:null):null}});var ce=j(y("react")),sr=j(_e());var _i=/(image|photo|avatar|url|logo|cover|thumbnail|icon)/i,mt=(e,t)=>{let r=["name","label","title","count","content","username","nickname","login","firstName","lastName","url"];_i.test(e)&&r.unshift("url");let a=r.find(n=>n in t&&!!t[n]);if(a)return a==="firstName"&&"lastName"in t?["firstName","lastName"]:a};function zt(e,t,r){var n;if(t)return t;let a=r==null?void 0:r.find(o=>o.name===e);return(n=a==null?void 0:a.options)!=null&&n.dataProviderName?a.options.dataProviderName:"default"}var Ue=e=>{var t;return(t=e==null?void 0:e.options)==null?void 0:t.dataProviderName};var Vt=e=>{let t=[...e].filter(Boolean).sort((r,a)=>(a.priority||0)-(r.priority||0))[0];return t||null};var Zi=j(y("prettier/standalone")),Yi=j(y("prettier/parser-typescript"));var jt=e=>e.replace(/ {2,}/g," ").replace(/\n{2,}/g,`
`);var Ht=/(-id|-ids|_id|_ids|Id|Ids|ID|IDs)(\[\])?$/,Pa=(e,t)=>{let r=Ht.test(e),a=typeof t=="string"||typeof t=="number",n=Array.isArray(t)&&t.every(o=>typeof o=="string"||typeof o=="number");return r&&a||r&&n?{key:e,relation:!0,multiple:!!n,type:"relation",priority:1}:!1};var J=e=>e.replace(Ht,"");var Ke=e=>J(e).replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").replace(/-/g," ").split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ");var _t=e=>e.replace(/export\s+(const|let|var|type|interface|function|class)\s+(\w+)\s*(=|:)\s*/g,"$1 $2 = ").split(`
`).filter(n=>!n.trim().startsWith("export default")).join(`
`);var Ca=/import(?:(?:(?:[ \n\t]+([^ *\n\t\{\},]+)[ \n\t]*(?:,|[ \n\t]+))?([ \n\t]*\{(?:[ \n\t]*[^ \n\t"'\{\}]+[ \n\t]*,?)+\})?[ \n\t]*)|[ \n\t]*\*[ \n\t]*as[ \n\t]+([^ \n\t\{\}]+)[ \n\t]+)from[ \n\t]*(?:['"])([^'"\n]+)(?:['"])(?:;?)/g,Gi=/import[ \n\t](?:['"])([^'"\n]+)(?:['"])(?:;?)/g,Ji=/((?:\w|\s|_)*)( as )((?:\w|\s|_)*)( |,)?/g,Zt=(e,t={})=>{let r=e.matchAll(Ca),a=new Set;for(let n of r){let[,o,i,m,l]=n;if(l in t){let c=t[l];if(l==="react")continue;o&&a.add(`const { default: ${o} } = ${c};`),i&&a.add(`const${i.replace(Ji,"$1: $3$4")} = ${c};`),m&&a.add(`const ${m} = ${c};`)}}return jt(`
    ${Array.from(a).join(`
`)}
    ${e.replace(Ca,"").replace(Gi,"")}
    `)};var Ze=j(y("pluralize"));var Yt=(e,t)=>e?t.find(a=>{let n=J(e.key);return a.name===n||a.name===(Ze.default.isPlural(n)?n:Ze.default.plural(n))||a.name===(Ze.default.isSingular(n)?n:Ze.default.singular(n))}):void 0;var Ea=j(y("pluralize"));var ft=(e,t,r="Inferred")=>{let a=e.replace(/[^a-zA-Z0-9]/g," "),n=Ea.default.singular(a),i=Ke(n).replace(/ /g,"")||r,m=t.charAt(0).toUpperCase()+t.slice(1);return/^[a-zA-Z]/.test(i)?`${i}${m}`:`${m}${i}`};var Xi=e=>e?Array.isArray(e)?e.join(""):typeof e=="string"?e:typeof e=="object"||typeof e=="function"?e.toString():typeof e=="number"?String(e):typeof e=="boolean"&&e?"true":e:"",wa=(e,...t)=>e.reduce((a,n,o)=>`${a}${n}${Xi(t[o])}`,"").trim();var Gt=(e,t)=>`
    ${e!=null?e:""}
    
    render(typeof ${t} !== "undefined" ? <${t} /> : <></>);
    `;var Jt=e=>e==null?void 0:e.replace(/(\/\* hidden-start \*\/)(.|\n)*?(\/\* hidden-end \*\/)/g,"");var es=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,pt=e=>es.test(e);function Xt(e,t,r){let a=`${e}`;return t&&(a+="?.",pt(t)?a+=t:a+=`['${t}']`),r&&(a+="?.",pt(r)?a+=r:a+=`['${r}']`),a}function ts(e,t,r){return(r!=null?r:[]).map(n=>Xt(e,t,n))}var xa=(e,t,r,a=' + " " + ')=>Array.isArray(r)?a?ts(e,t,r).join(a):Xt(e,t,r[0]):Xt(e,t,r),er=(e,t,r)=>{let a=e;return t&&(a+=`.${t}`),r&&(Array.isArray(r)?a+=`.${r[0]}`:a+=`.${r}`),a},Sa=e=>Array.isArray(e.accessor)||e.multiple?`accessorKey: "${e.key}"`:e.accessor?`accessorKey: "${er(e.key,void 0,e.accessor)}"`:`accessorKey: "${e.key}"`;var Ia=e=>{let t=e.reduce((a,[n,o,i])=>(a[o]||(a[o]=[]),a[o].includes(n)||(i?a[o].push([n,!0]):a[o].push(n)),a),{});return Object.entries(t).map(([a,n])=>{let o=n.find(c=>Array.isArray(c)&&c[1]),i=n.filter(c=>typeof c=="string"),m=o?`${o[0]}`:"",l=i.length?`{ ${i.join(", ")} }`:"";return`import ${m}${m&&l?", ":""}${l} from "${a}";`})};var tr=j(y("pluralize")),De=(e="")=>tr.default.isSingular(e)?e:tr.default.singular(e);var rr=j(y("pluralize")),Le=(e="")=>rr.default.isPlural(e)?e:rr.default.plural(e);var rs=/^id$/i,qa=e=>rs.test(e);var $a=e=>e.relationInfer&&e.relationInfer.accessor?Array.isArray(e.relationInfer.accessor)?`optionLabel: "${e.relationInfer.accessor[0]}",`:e.relationInfer.accessor!=="title"?`optionLabel: "${e.relationInfer.accessor}",`:"":"";var Da=e=>{};var La=(e,t="")=>{if(Number.isInteger(Number(e)))return t.charAt(0).toLowerCase()+t.slice(1)+e;let a=e.replace(/^\d+/,"").replace(/[^a-zA-Z0-9]/g,"-"),n=Ke(a).replace(/ /g,"");return`${n.charAt(0).toLowerCase()+n.slice(1)}${t.charAt(0).toUpperCase()+t.slice(1)}`};var Na=e=>{let t=(r,a,n,o=t)=>{let i=e.map(l=>l(r,a,n,o));return Vt(i)};return t};var ka=e=>(r,a,n,o,i)=>e.reduce((m,l)=>l(m,a,n,o,i),r);var Aa=(e,t,r,a)=>{let n=Array.isArray(t),o=Array.isArray(t)&&t.every(i=>typeof i=="string"||typeof i=="number");if(n){if(!o){let m=a(e,t[0],r,a);return m?{...m,key:e,multiple:!0,priority:1}:!1}let i=a(e,t[0],r,a)||{type:"string"};return{key:e,multiple:!0,priority:1,type:i==null?void 0:i.type}}return!1};var Fa=(e,t)=>typeof t=="boolean"?{key:e,type:"boolean"}:!1;var ar=j(y("dayjs")),as=/(_at|_on|At|On|AT|ON)(\[\])?$/,Ma=(e,t)=>{let r=as.test(e)&&(0,ar.default)(t).isValid(),a=typeof t=="string"&&(0,ar.default)(t).isValid(),n=typeof t=="string"&&t.length>4;return r||a&&n?{key:e,type:"date",priority:1}:!1};var ns=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Ta=(e,t)=>typeof t=="string"&&ns.test(t)?{key:e,type:"email",priority:1}:!1;var os=/\.(gif|jpe?g|tiff?|png|webp|bmp|svg)$/i,Ra=(e,t)=>typeof t=="string"&&os.test(t)?{key:e,type:"image",priority:2}:!1;var Oa=(e,t)=>typeof t>"u"||t===null?null:!1;var Qa=(e,t)=>typeof t=="number"?{key:e,type:"number"}:!1;var is=/id$/i,Wa=(e,t,r,a)=>{let n=t!==null,o=!Array.isArray(t);if(n&&o&&typeof t=="object"){if(Object.keys(t).length===1&&is.test(Object.keys(t)[0]))return{key:e,type:"relation",relation:!0,accessor:"id",priority:1};let l=mt(e,t);if((l?l.length>0:!1)&&l){let f=l&&Array.isArray(l)?l[0]:l,v=a(f,t[f],t,a);if(v){let u=Array.isArray(l)?l.map(d=>v.accessor?`${d}.${Array.isArray(v.accessor)?v.accessor[0]:v.accessor}`:d):v.accessor?Array.isArray(v.accessor)?`${l}.${v.accessor[0]}`:`${l}.${v.accessor}`:l;return{...v,fieldable:!0,key:e,accessor:u,priority:1}}}return{key:e,fieldable:!1,type:"object",priority:1}}return!1};var Ua=(e,t)=>typeof t=="string"&&t.length>100?{key:e,type:"richtext",priority:1}:!1;var Ka=(e,t)=>typeof t=="string"?{key:e,type:"text"}:!1;var ss=/^(https?|ftp):\/\/(-\.)?([^\s/?\.#-]+\.?)+(\/[^\s]*)?$/i,Ba=(e,t)=>typeof t=="string"&&ss.test(t)?{key:e,type:"url",priority:1}:!1;var za=[Aa,Fa,Ma,Ta,Ra,Oa,Qa,Wa,Pa,Ua,Ka,Ba];var Va=(e,t,r,a)=>e.map(o=>{if(!o.relation&&(o.type==="text"||o.type==="richtext"||o.type==="number")&&!o.canRelation){let i=/^[a-z0-9-]+$/,m=u=>i.test(`${u}`),l=o.key.toLowerCase()!=="id";return!(!o.accessor||typeof o.accessor=="string")||!l?o:(o.multiple?a[o.key]:[a[o.key]]).every(u=>m(o.accessor?u[o.accessor]:u))?{...o,canRelation:!0}:o}return o});var ls=/(image|photo|avatar|cover|thumbnail|icon)/i,ja=e=>e.map(r=>r.type==="url"&&ls.test(r.key)?{...r,type:"image"}:r);var Ha=(e,t)=>e.map(a=>{let n=Yt(a,t);return n?{...a,relation:!0,type:"relation",resource:n}:a});var _a=(e,t,r,a,n)=>e.map(i=>{if(i.relation&&i.type==="relation"&&!i.resource){let m=i.accessor?a[i.key][i.accessor]:a[i.key],l=n(i.key,m,a,n);if(l&&l.type!=="relation")return{...i,fieldable:!0,relation:!1,type:l.type,canRelation:!0}}return i});var Za=[ja,Ha,_a,Va];var Ya=j(y("react")),Ga=j(y("prism-react-renderer")),us=j(y("prism-react-renderer/themes/vsDark"));var se=j(y("react")),cs=j(_e()),vt=y("@aliemir/react-live");var Ja=[["react","React",se.default],["@pankod/refine-core","RefineCore",cs]],nr=se.default.createContext({}),or=({fetchError:e,code:t,additionalScope:r,errorComponent:a})=>{var m;let n=(m=t&&_t(Zt(t,[...Ja,...r!=null?r:[]].reduce((l,[c,f,v,u])=>u?l:{...l,[c]:f},{}))))!=null?m:"",o=se.default.useMemo(()=>({React:se.default,...se.default,...[...Ja,...r!=null?r:[]].reduce((l,[c,f,v])=>({...l,[f]:v}),{})}),[r]),i=se.default.useMemo(()=>()=>{let{error:c}=se.default.useContext(nr);return a?se.default.createElement(a,{error:c?`<p>An error occured while rendering the generated component.You can check the generated code from the below "Show Code" button and fix the error manually.</p>
                                    <p>If you think this is a bug, please report the issue at <a target="_blank" rel="noopener noreferrer" href="https://github.com/refinedev/refine/issues">https://github.com/refinedev/refine/issues</a></p>
                                    <p>Exception:</p>
                                    <code>${c}</code>`:typeof e=="string"?e:e?`<p>Something went wrong while fetching the resource data.</p>
                                    <p>To learn more about the Inferencer, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`:void 0}):null},[a,e]);return se.default.createElement(vt.LiveProvider,{Context:nr,code:n,scope:o,noInline:!0},!e&&se.default.createElement(vt.LivePreview,{Context:nr}),se.default.createElement(i,null))};var Ne=j(y("react")),gt=j(_e());var Xa=(e,t,r)=>{let{resource:a,resourceName:n,id:o,resources:i}=(0,gt.useResource)({resourceNameOrRouteName:t}),m=r!=null?r:o,l=(0,gt.useDataProvider)(),[c,f]=Ne.default.useState(void 0),[v,u]=Ne.default.useState(void 0),[d,p]=Ne.default.useState(!0),[s,h]=Ne.default.useState(!1),b=Ne.default.useCallback(async g=>{var E,S;let P=(E=Ue(a))!=null?E:zt(n,void 0,i),C=l(P);h(!0),f(void 0);try{if(e==="list"||e==="create"){let x=(S=(await C.getList({resource:n})).data)==null?void 0:S[0];x||f(`<p>No records/data found for resource "${n}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),u(x),setTimeout(()=>{h(!1)},500)}if((e==="edit"||e==="show")&&g){let x=(await C.getOne({resource:n,id:g})).data;x||f(`<p>No records/data found for resource "${n}".</p>
                            <p>Please check your data provider and resource.</p>
                            <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),u(x),setTimeout(()=>{h(!1)},500)}}catch(w){console.warn("An error occured while fetching the resource data. Please check the error message below:",w),f(`<p>Something went wrong while fetching the resource data.</p>
                    <p>Please check your data provider and API for resource "${n}".</p>
                    <p>For more info, please check the <a href="https://refine.dev/docs/packages/documentation/inferencer/" target="_blank">documentation</a>.</p>`),setTimeout(()=>{h(!1)},500)}},[e,l,a,n,i]);return Ne.default.useEffect(()=>{p(!1),!s&&!v&&b(m)},[b,m]),{data:v,loading:s,initial:d,error:c}};var Be=j(y("react")),en=j(_e());var ir=y("lodash"),tn=({record:e,fields:t,infer:r})=>{let a=(0,en.useDataProvider)(),[n,o]=Be.default.useState([]),[i,m]=Be.default.useState(!0),[l,c]=Be.default.useState(!1),f=Be.default.useCallback(async v=>{console.groupCollapsed("@pankod/refine-inferencer is trying to detect relations");let u=[];c(!0);try{let d=v.map(async s=>{if(s&&(s.relation||s.canRelation)&&e){let h=Ue(s.resource),b=a(h),g=Array.isArray(s.accessor)?void 0:s.multiple?e[s.key].map(P=>s.accessor?(0,ir.get)(P,s.accessor):P)[0]:s.accessor?(0,ir.get)(e[s.key],s.accessor):e[s.key];if(g&&s.resource)try{let{data:P}=await b.getOne({resource:s.resource.name,id:g});u.push({status:"success",resource:s.resource.name,field:s.key});let C=r("__",P,{},r);return{...s,relationInfer:C}}catch{return u.push({status:"error",resource:s.resource.name,field:s.key}),{...s,relationInfer:null}}if(g){let P,C;try{let{data:w}=await b.getOne({resource:Le(J(s.key)),id:g});u.push({status:"success",resource:Le(J(s.key)),field:s.key}),P=w,C=!0}catch{u.push({status:"error",resource:Le(J(s.key)),field:s.key});try{let{data:x}=await b.getOne({resource:De(J(s.key)),id:g});u.push({status:"success",resource:De(J(s.key)),field:s.key}),P=x,C=!1}catch{return u.push({status:"error",resource:De(J(s.key)),field:s.key}),{...s,relationInfer:null}}}let E=r("__",P,{},r),S=J(s.key);return{...s,relation:!0,type:"relation",resource:{name:C?Le(S):De(S)},fieldable:!1,canRelation:void 0,relationInfer:E}}return{...s,relationInfer:null}}return s}),p=await Promise.all(d);o(p.filter(s=>s)),setTimeout(()=>{c(!1)},500)}catch{setTimeout(()=>{c(!1)},500)}setTimeout(()=>{console.log(`Tried to detect relations with ${u.length} attempts and succeeded with ${u.filter(d=>d.status==="success").length} attempts.`),console.groupEnd()},500)},[a,e]);return Be.default.useEffect(()=>{m(!1),!l&&t&&t.length>0&&n.length===0&&f(t)},[f,l,t,f]),{fields:n,loading:l,initial:i}};var ds=({type:e,additionalScope:t=[],customElements:r=[],fieldTransformers:a=[],renderer:n,loadingComponent:o,errorComponent:i,codeViewerComponent:m})=>{let l=Na([...za,...r]),c=ka([...Za,...a]),f=({resourceName:u,fieldTransformer:d,id:p})=>{var q;let{resource:s,resources:h}=(0,sr.useResource)({resourceNameOrRouteName:u}),{resource:b}=(0,sr.useResource)(),{data:g,loading:P,initial:C,error:E}=Xa(e,u!=null?u:s==null?void 0:s.name,p),S=ce.default.useMemo(()=>{if(g){let L=Object.keys(g).map(D=>{let k=g[D];return l(D,k,g,l)}).filter(Boolean),F=c(L,h,s,g,l);return d?F.flatMap(D=>{let k=d(D);return k?[k]:[]}):F}return[]},[g,h,s,d]),{fields:w,loading:x}=tn({record:g,fields:S,infer:l}),$=ce.default.useMemo(()=>!P&&!x&&!C?n({resource:s,resources:h,fields:w,infer:l,isCustomPage:s.name!==b.name,id:p}):"",[s,h,w,P,x]);return ce.default.createElement(ce.default.Fragment,null,o&&(P||x)&&ce.default.createElement(o,null),!P&&!x&&ce.default.createElement(ce.default.Fragment,null,ce.default.createElement(or,{fetchError:!P&&E?E:!P&&!C&&!g,code:Gt($,ft((q=s.label)!=null?q:s.name,e)),errorComponent:i,additionalScope:t}),m&&ce.default.createElement(m,{code:Jt($),loading:P||x})))};return({name:u,resource:d,fieldTransformer:p,id:s})=>ce.default.createElement(f,{fieldTransformer:p,resourceName:d!=null?d:u,key:d!=null?d:u,id:s})};})();
//# sourceMappingURL=index.js.map